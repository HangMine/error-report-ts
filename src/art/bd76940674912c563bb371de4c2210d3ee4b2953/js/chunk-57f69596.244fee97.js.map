{"version":3,"sources":["webpack:///./src/views/supplier-backend/components/FromFieldText.vue?07b2","webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-loader.js","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?81bd","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?15b1","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?bcb1","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue","webpack:///./src/views/material/info/components/UnitField.vue?c985","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?2d72","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?fefd","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?f308","webpack:///./src/views/supplier-backend/components/FromFieldText.vue","webpack:///./src/views/material/info/components/UnitField.vue?b6eb","webpack:///src/views/material/info/components/UnitField.vue","webpack:///./src/views/material/info/components/UnitField.vue?bf5f","webpack:///./src/views/material/info/components/UnitField.vue","webpack:///./src/utils/i18n-material-type.ts","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?e114","webpack:///./src/api/dictionary.js","webpack:///./src/views/material-mall/share-goods/SvgGenerator.tsx"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","default","_regenerator","_asyncToGenerator2","_defineProperty2","_compositionApi","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defaultOptions","initialValue","undefined","loadingValue","oldValue","useLoader","loader","oldWatcher","params","_ref","_ref$initialValue","_ref$loadingValue","r","reactive","watchSource","resultRef","ref","tmp","that","getCurrentInstance","loaderPromiseRef","$on","mark","_callee2","wrap","_context2","prev","next","watch","_ref3","_callee","_loaderPromiseRef","_context","sent","stop","_x","this","immediate","s","_ref4","_callee3","_tmp","_context3","isRef","__tmp","_x2","_default","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","loading","_l","field","prop","label","material","units","tagsDisplay","notes","staticRenderFns","getCategoryName","id","axios","method","url","data","ids","components","FromFieldText","props","type","require","setup","fields","collapseStatus","val","oldVal","category","categoryName","i18nCategoryName","split","map","name","join","t","materialsTechnology","m","surfaceTechnics","designContent","applicableProductLine","moqUnit","samplePeriodUnit","productionLeadTimeUnit","thicknessUnit","materialCountryOfOrigin","deep","printPatternsInfoTags","printPatternsInfo","tag","patternsTags","patterns","e","component","_t","content","_e","unit","index","$i18n","i18next","language","UnitField","String","required","Number","Array","translateCategoryName","getDictionaryByTypeCode","typeCode","headers","getCountryList","keyword","goodInfo","colorSwatchs","refs","generateSvgInWrapper","wrapper","x","y","width","height","dataUrl","document","createElementNS","innerHTML","appendChild","changeImageInSvg","container","selector","loadImage","_url","Promise","resolve","img","onload","d","path","c","createElement","getContext","drawImage","toDataURL","crossOrigin","src","console","log","g","querySelector","generateQrCode","config","image","qrSVG","toDataUrl","hackMaterialInfo","gf","hackSvg","cs","imgJson","thumbnail","body","then","canvas","w","svgw"],"mappings":"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","file":"js/chunk-57f69596.244fee97.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=style&index=0&id=f41e56ee&lang=scss&scoped=true&\"","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar defaultOptions = {\n  initialValue: undefined,\n  loadingValue: function loadingValue(oldValue) {\n    return oldValue;\n  }\n};\n\nfunction useLoader(loader) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOptions,\n      _ref$initialValue = _ref.initialValue,\n      initialValue = _ref$initialValue === void 0 ? defaultOptions.initialValue : _ref$initialValue,\n      _ref$loadingValue = _ref.loadingValue,\n      loadingValue = _ref$loadingValue === void 0 ? defaultOptions.loadingValue : _ref$loadingValue;\n\n  var r = (0, _compositionApi.reactive)(params);\n\n  var watchSource = function watchSource() {\n    return _objectSpread({}, r);\n  };\n\n  var resultRef = (0, _compositionApi.ref)(initialValue);\n  var tmp = (0, _compositionApi.ref)(null);\n  var that = (0, _compositionApi.getCurrentInstance)();\n  var loaderPromiseRef = (0, _compositionApi.ref)();\n  if (!that) return;\n  that.$on('hook:created', /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            loaderPromiseRef.value = loader(watchSource());\n            (0, _compositionApi.watch)(loaderPromiseRef, /*#__PURE__*/function () {\n              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_loaderPromiseRef) {\n                return _regenerator.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        resultRef.value = loadingValue(resultRef.value);\n                        _context.next = 3;\n                        return _loaderPromiseRef;\n\n                      case 3:\n                        tmp.value = _context.sent;\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), {\n              immediate: true\n            });\n            _context2.next = 4;\n            return loaderPromiseRef.value;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })));\n  var oldWatcher;\n  (0, _compositionApi.watch)(watchSource, function (s) {\n    if (oldWatcher) {\n      oldWatcher();\n    }\n\n    loaderPromiseRef.value = loader(s);\n  });\n  (0, _compositionApi.watch)(tmp, /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(_tmp) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if ((0, _compositionApi.isRef)(_tmp)) {\n                oldWatcher = (0, _compositionApi.watch)(_tmp, function (__tmp) {\n                  resultRef.value = __tmp;\n                }, {\n                  immediate: true\n                });\n              } else {\n                resultRef.value = _tmp;\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }()); // eslint-disable-next-line consistent-return\n\n  return resultRef;\n}\n\nvar _default = useLoader;\nexports.default = _default;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"goods-base\"},[_c('div',{staticClass:\"divider-title\"},[_vm._v(\" \"+_vm._s(_vm.$t('material-mall.goods-detail.product attributes'))+\" \")]),_c('div',{attrs:{\"loading\":_vm.loading}},[_c('ul',{staticClass:\"attr-row\"},[_vm._l((_vm.fields),function(field){return _c('li',{key:field.prop,staticClass:\"field-item\"},[_c('FromFieldText',{attrs:{\"id\":field.label,\"label\":field.label,\"content\":field.value ? field.value : _vm.material[field.prop],\"units\":field.units}})],1)}),_c('li',{staticClass:\"field-item full\"},[_c('FromFieldText',{staticClass:\"field-item-pattern\",attrs:{\"label\":_vm.$t('material.info.print_and_pattern')}},[_vm._v(\" \"+_vm._s(_vm.tagsDisplay)+\" \")])],1),_c('li',{staticClass:\"field-item full\"},[_c('FromFieldText',{attrs:{\"label\":_vm.$t('material.info.notes')}},[_c('div',[_vm._v(_vm._s(_vm.material.notes))])])],1)],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport i18n from 'i18next';\nimport {\n  defineComponent, ref, watch, computed,\n} from '@vue/composition-api';\nimport CustomCollapse from '@/components/collapse/Collapse.vue';\nimport axios from '@/utils/axios';\n\nimport FromFieldText from '@/views/supplier-backend/components/FromFieldText.vue';\nimport translateCategoryName from '@/utils/i18n-material-type';\n\n// 获取大中小类组合的类名\nasync function getCategoryName(id: string) {\n  return ((await axios({\n    method: 'post',\n    url: '/show/category/name',\n    data: {\n      ids: [id],\n    },\n  })).data)[id];\n}\n\nexport default defineComponent({\n  components: {\n    FromFieldText,\n  },\n  props: {\n    material: {\n      type: Object,\n      require: true,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const loading = ref(true);\n    const fields = ref<any>([]);\n    const collapseStatus = ref<Boolean>(false);\n\n\n    watch(() => props.material, async (val, oldVal) => {\n      // 当请求回material数据才渲染页面\n      loading.value = !!oldVal;\n\n      const categoryName = await getCategoryName(val.category) as string;\n      const i18nCategoryName = categoryName.split('/').map(\n        name => translateCategoryName(name),\n      ).join('/');\n\n      fields.value = [\n        {\n          label: i18n.t('material.info.material_type'),\n          value: i18nCategoryName,\n          // units: [\n          //   { type: 'materialType', value: val.materialType },\n          // ],\n        },\n        {\n          label: i18n.t('material.info.materialsTechnology'),\n          prop: 'materialsTechnology',\n          value: val.materialsTechnology\n            ? val.materialsTechnology.split(',').map((m: string) => i18n.t(`material.materialsTechnology.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.surfaceTechnics'),\n          prop: 'surfaceTechnics',\n          value: val.surfaceTechnics\n            ? val.surfaceTechnics.split(',').map((m: string) => i18n.t(`material.surfaceTechnics.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.designContent'),\n          prop: 'designContent',\n          value: val.designContent\n            ? val.designContent.split(',').map((m: string) => i18n.t(`material.designContent.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.applicableProductLine'),\n          prop: 'applicableProductLine',\n          value: val.applicableProductLine\n            ? val.applicableProductLine.split(',').map((m: string) => i18n.t(`material.applicableProductLine.${m}`)).join() : '',\n        },\n        // { label: '材料种类', prop: i18n.t(`material.materialsTechnology.${val.materialsTechnology}`) },\n        // { label: '表面工艺', prop: i18n.t(`material.surfaceTechnics.${val.surfaceTechnics}`) },\n        // { label: '图案内容', prop: i18n.t(`material.designContent.${val.designContent}`) },\n        // { label: '适用产品线', prop: i18n.t(`material.applicableProductLine.${val.applicableProductLine}`) },\n        {\n          label: i18n.t('material.info.moq'),\n          prop: 'moq',\n          units: [\n            { type: 'mqqUnit', value: val.moqUnit },\n          ],\n        },\n        { label: i18n.t('material.info.season'), prop: 'season' },\n        {\n          label: i18n.t('material.info.sample_period'),\n          prop: 'samplePeriod',\n          units: [\n            { type: 'date', value: val.samplePeriodUnit },\n          ],\n        },\n        {\n          label: i18n.t('material.info.lead_time'),\n          prop: 'productionLeadTime',\n          units: [\n            { type: 'date', value: val.productionLeadTimeUnit },\n          ],\n        },\n        { label: i18n.t('material.info.specification'), prop: 'specification' },\n        {\n          label: i18n.t('material.info.thickness'),\n          prop: 'thickness',\n          units: [\n            { type: 'thicknessUnit', value: val.thicknessUnit },\n          ],\n        },\n        {\n          label: i18n.t('material.info.original_country'),\n          units: [\n            { type: 'country', value: val.materialCountryOfOrigin },\n          ],\n        },\n      ];\n    }, { deep: true, immediate: true });\n\n    const printPatternsInfoTags = computed(() => {\n      return props.material.printPatternsInfo?.map((tag: string | object) => {\n        if (typeof tag === 'string') {\n          // return { tag };\n          return tag;\n        }\n        // return tag;\n        return (tag as any).tag;\n        // }) || [];\n      }).join('、') || '';\n    });\n    const patternsTags = computed(() => {\n      return props.material.patterns?.map((tag: string | object) => {\n        if (typeof tag === 'string') {\n          // return { tag };\n          return tag;\n        }\n        // return tag;\n        return (tag as any).tag;\n        // }) || [];\n      }).join('、') || '';\n    });\n    const tagsDisplay = computed(() => {\n      return [printPatternsInfoTags.value, patternsTags.value].filter(e => e && e.length > 0).join('、');\n    });\n\n    return {\n      collapseStatus,\n      fields,\n      loading,\n\n      // printPatternsInfoTags,\n      // patternsTags,\n      tagsDisplay,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GoodsBaseInfo.vue?vue&type=template&id=95a2fe04&scoped=true&\"\nimport script from \"./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"\nexport * from \"./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GoodsBaseInfo.vue?vue&type=style&index=0&id=95a2fe04&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95a2fe04\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail-form-field\"},[_c('div',{staticClass:\"content-box\"},[_c('label',[_vm._v(_vm._s(_vm.label)+\"：\")]),_vm._t(\"default\",[(_vm.content)?_c('span',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(_vm.content)+\" \")]):_vm._e(),_vm._l((_vm.units),function(unit,index){return [_c('UnitField',{key:unit.type,attrs:{\"type\":unit.type,\"value\":unit.value}}),(index < _vm.units.length - 1)?_c('span',{key:index,staticClass:\"unit-sep\"},[_vm._v(\" \"+_vm._s(_vm.$i18n.i18next.language === 'en' ? ' per ' : '/')+\" \")]):_vm._e()]})])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport i18n from 'i18next';\nimport { defineComponent } from '@vue/composition-api';\n\nimport UnitField from '@/views/material/info/components/UnitField.vue';\n\ninterface Unit {\n  type: string,\n  value: number | string,\n}\n\nexport default defineComponent({\n  name: 'MaterialFormFieldText',\n  components: { UnitField },\n  props: {\n    // 标签名称\n    label: {\n      type: String,\n      required: true,\n    },\n    // 内容\n    content: {\n      type: [String, Number],\n      default: '',\n    },\n    // 单位数组\n    units: {\n      type: Array as () => Unit[],\n      default: () => [],\n    },\n  },\n  setup(props) {\n    return {\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FromFieldText.vue?vue&type=template&id=f41e56ee&scoped=true&\"\nimport script from \"./FromFieldText.vue?vue&type=script&lang=ts&\"\nexport * from \"./FromFieldText.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FromFieldText.vue?vue&type=style&index=0&id=f41e56ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f41e56ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"unit-text\"},[_vm._v(_vm._s(_vm.unit))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"unit-text\">{{ unit }}</span>\n</template>\n\n<script>\nimport { defineComponent, ref, watch } from '@vue/composition-api';\nimport i18n from 'i18next';\n\nimport { getCountryList, getDictionaryByTypeCode } from '@/api/dictionary';\n\nexport default defineComponent({\n  props: {\n    // 单位的类型\n    type: {\n      type: String,\n      required: true,\n    },\n    // 单位的值\n    value: {\n      type: [Number, String],\n      // required: true,\n    },\n  },\n  setup(props, { root: { $errHandler } }) {\n    const unit = ref('');\n\n    watch(() => props.value, async () => {\n      // 处理空值和null情况\n      if (props.value) {\n        try {\n          let units;\n          let currentUnit;\n          // 国家字典的情况\n          if (props.type === 'country') {\n            units = (await getCountryList()).data;\n            currentUnit = units.find(u => +u.id === +props.value);\n            // unit.value = currentUnit ? currentUnit.usName : '';\n            unit.value = currentUnit\n              ? (i18n.language === 'en' ? (currentUnit.usName || currentUnit.name) : (currentUnit.name || currentUnit.usName))\n              : '';\n          } else {\n            units = (\n              await getDictionaryByTypeCode(props.type, i18n.language)\n            ).data;\n            currentUnit = units.find(u => +u.itemValue === +props.value);\n            unit.value = currentUnit ? currentUnit.label : '';\n          }\n        } catch (err) {\n          $errHandler(err);\n        }\n      } else {\n        unit.value = '';\n      }\n    }, {\n      immediate: true,\n    });\n\n    return { unit };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.unit-text {\n  display: inline-block;\n  line-height: 22px;;\n  vertical-align: middle;\n  white-space: normal;\n  & + .unit-text {\n    margin-left: 8px;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnitField.vue?vue&type=template&id=8f26f40a&scoped=true&\"\nimport script from \"./UnitField.vue?vue&type=script&lang=js&\"\nexport * from \"./UnitField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f26f40a\",\n  null\n  \n)\n\nexport default component.exports","import i18n from 'i18next';\n\nexport default function translateCategoryName(categoryName: string) {\n  return i18n.t(`material.material-category.${categoryName}`);\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=style&index=0&id=95a2fe04&lang=scss&scoped=true&\"","import { getDictByType as _getDictByType } from '@/loaders/dictionary';\nimport axios from './axios';\n\n/**\n * 根据类型获取该字典数据\n * @param {String} type 类型\n * @returns {Promise}\n */\nexport const getDictByType = async (type) => {\n  return {\n    data: await _getDictByType({ type }),\n  };\n};\n\n/**\n * 根据类型获取该字典数据\n * @param {String} typeCode\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6104\n */\nexport const getDictionaryByTypeCode = (typeCode, language) => {\n  return axios({\n    method: 'get',\n    url: '/bff-center/showCommon/getDictionaryTypeItem',\n    headers: { language },\n    params: { typeCode },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCountryList = (keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCountry',\n    params: { keyword },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} countryId 国家ID\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCityList = (countryId, keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCity',\n    params: { countryId, keyword },\n  });\n};\n\n\nexport const getOSSAuth = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSAuth',\n  });\n};\n\nexport const getOSSUrl = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSUrl',\n  });\n};\n\n// 获取国家下的城市\n\n\n/* ==================== 标签相关 ================== */\n/**\n * 新增标签\n * @param {Object} data { shareId: string, tags: string[], type: string }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6116\n */\nexport const addTags = (data) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/addTags',\n    data,\n  });\n};\n\n/**\n * 删除标签\n * @param {Array} tagIds { string[] }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6128\n */\nexport const removeTags = (tagIds) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/deleteTag',\n    data: tagIds,\n  });\n};\n","import axios from '@/api/axios';\nimport html2canvas from 'html2canvas';\nimport { MaterialGoods } from '@/models/MaterialGood';\nimport useLoader from '@4dst-saas/public-utils/dist/composables/use-loader';\nimport delay from '@4dst-saas/public-utils/dist/delay';\nimport { defineComponent } from '@vue/composition-api';\nimport { QRCodeSVG } from '@cheprasov/qrcode';\nimport {\n  blob2DataUrl,\n} from '_/blob-utils';\nimport GoodsBaseInfo from '../GoodsDetail/GoodsBaseInfo.vue';\nimport svgText from './material-good-svg';\n\nexport default defineComponent({\n  render() {\n    return <div ref='wrapper'>\n      <GoodsBaseInfo vShow={false} material={this.goodInfo}></GoodsBaseInfo>\n    </div>;\n  },\n  props: {\n    goodInfo: {\n      type: Object as () => MaterialGoods,\n    },\n    colorSwatchs: {\n      type: Array as () => String[],\n    },\n    id: {\n      type: String,\n      required: true,\n    },\n  },\n  // @ts-ignore\n  setup(props, { refs }) {\n    // 在容器内，用dataurl生成SVGImage\n    function generateSvgInWrapper(\n      wrapper: SVGElement,\n      x: number,\n      y: number,\n      width: number,\n      height: number,\n      dataUrl: string,\n    ) {\n      const t = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n      t.innerHTML = `<image x=${x} y=${y} width=${width} height=${height} xlink:href=${dataUrl}></image>`;\n      wrapper.appendChild(t);\n    }\n\n    async function changeImageInSvg(\n      container: HTMLElement,\n      selector: string,\n      url: string,\n      x: number,\n      y: number,\n      width = 440,\n    ) {\n      const img = document.createElement('img');\n      let height = 0;\n      // let blob:Blob;\n      async function loadImage(_url: string) {\n        return new Promise<string>((resolve) => {\n          img.onload = async (e) => {\n            const d = e.path[0] as HTMLImageElement;\n            height = width * d.height / d.width;\n\n            const c = document.createElement('canvas');\n            c.width = width;\n            c.height = height;\n            c.getContext('2d')!.drawImage(img, 0, 0, width, height);\n            // c.toBlob(b => resolve(b), 'image/png');\n            resolve(c.toDataURL('image/png'));\n          };\n          img.crossOrigin = '';\n          img.src = _url;\n          console.log(_url);\n        });\n      }\n      const dataUrl = await loadImage(url);\n\n      const g = container.querySelector(selector) as SVGElement;\n      generateSvgInWrapper(g, x, y, width, height, dataUrl);\n    }\n    function generateQrCode(id: string) {\n      const config = {\n        image: {\n          width: 258,\n          height: 258,\n        },\n      };\n      const qrSVG = new QRCodeSVG(`https://baidu.com?id=${id}`, config);\n      const dataUrl = qrSVG.toDataUrl() as string;\n      console.log(dataUrl);\n      generateSvgInWrapper(\n        (refs.wrapper as HTMLDivElement).querySelector('#qrcode-wrapper') as SVGElement,\n        0,\n        0,\n        258,\n        258,\n        dataUrl,\n      );\n    }\n\n    function hackMaterialInfo(gf: typeof props.goodInfo) {}\n    async function hackSvg(container: HTMLElement, g: typeof props.goodInfo, cs: typeof props.colorSwatchs) {\n      // 替换缩略图\n      changeImageInSvg(container, '#drape-wrapper', g?.imgJson.thumbnail, 135, 94);\n      // 生成二维码并写进图中\n      generateQrCode(props.id);\n      // 替换面料数据信息\n      hackMaterialInfo(g);\n      await delay(1000);\n      html2canvas(document.body).then(canvas => {\n        document.body.appendChild(canvas);\n      });\n    }\n    useLoader(({ goodInfo, colorSwatchs }) => {\n      if (goodInfo && colorSwatchs) {\n        console.log(goodInfo, colorSwatchs);\n        const w = refs.wrapper as HTMLDivElement;\n        const svgw = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\n        svgw.innerHTML = svgText;\n        w.appendChild(svgw);\n        hackSvg(w, goodInfo, colorSwatchs);\n      }\n    }, props);\n  },\n});\n"],"sourceRoot":""}