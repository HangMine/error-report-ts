{"version":3,"sources":["webpack:///./src/views/material-mall/GoodsDetail/MaterialCarousel.vue?0644","webpack:///./src/assets/img/material/scale_texture.svg","webpack:///./src/views/material-mall/GoodsDetail/MaterialCarousel.vue?d854","webpack:///./src/views/material-mall/GoodsDetail/MaterialCarousel.vue?d0ff","webpack:///./src/views/material-mall/GoodsDetail/MaterialCarousel.vue?1fbb","webpack:///./src/views/material-mall/GoodsDetail/MaterialCarousel.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","ref","attrs","initialIndex","on","$event","$act","changeIndex","_l","item","i","key","staticClass","type","url","showRenderFlag","_v","_s","$t","_e","directives","name","rawName","value","showScale","expression","staticStyle","scale","previewImage","$emit","modelLoadedList","includes","id","materialId","staticRenderFns","components","VideoPlayer","ModelPurePreviewer","props","swiperList","Array","required","String","default","size","tyep","Number","setup","root","$ImageViewer","$Dialog","carousel","imgList","reduce","acc","cur","push","show","index","activeIndex","targetElems","previewVideo","sourceUrl","dialogify","is","sourceURL","fullscreen","width","height","top","bottom","center","previewModel","modelId","mode","flex","carouselSetActiveItem","setActiveItem","delay","imageType","parseInt","isCloudRenderComplete","component"],"mappings":"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","file":"js/chunk-73031084.f9b52a75.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialCarousel.vue?vue&type=style&index=0&id=ee5148c6&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/scale_texture.93bf9923.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-carousel',{ref:\"carousel\",attrs:{\"indicator-position\":\"outside\",\"initial-index\":_vm.initialIndex,\"autoplay\":false},on:{\"change\":function($event){return _vm.$act(_vm.changeIndex, [$event])}}},_vm._l((_vm.swiperList),function(item,i){return _c('el-carousel-item',{key:i,staticClass:\"flex-center\"},[(item.type === 'image')?[_c('base-image',{staticClass:\"material-img\",attrs:{\"fit\":\"contain\",\"src\":item.url,\"data-img-type\":\"material-info\"}}),(_vm.showRenderFlag(item))?_c('span',{staticClass:\"material-render-flag\"},[_vm._v(_vm._s(_vm.$t(\"material-mall.preview_picture\")))]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showScale(item)),expression:\"showScale(item)\"}],staticClass:\"img-scale\"},[_c('img',{staticStyle:{\"height\":\"calc(50% - 33px)\"},attrs:{\"src\":require('@/assets/img/material/scale_texture.svg')}}),_c('div',{staticClass:\"scale-text\"},[_vm._v(_vm._s(item.scale))]),_c('img',{staticStyle:{\"height\":\"calc(50% - 33px)\",\"transform\":\"rotate(180deg)\"},attrs:{\"src\":require('@/assets/img/material/scale_texture.svg')}})]),_c('i',{staticClass:\"icon-handle iconfont icon-zoom\",on:{\"click\":function($event){return _vm.$act(_vm.previewImage)}}}),_c('i',{staticClass:\"icon-handle iconfont icon-sharing\",on:{\"click\":function($event){return _vm.$emit('share')}}})]:(item.type === 'video')?[_c('div',{staticClass:\"material-video\"},[_c('VideoPlayer',{attrs:{\"sourceURL\":item.url,\"autoplay\":\"\"}}),_c('i',{staticClass:\"iconfont iconshipin\"})],1)]:(item.type === 'model')?[_c('div',{staticClass:\"material-model\"},[(_vm.modelLoadedList.includes(i))?_c('ModelPurePreviewer',{attrs:{\"modelId\":item.id,\"materialId\":_vm.materialId,\"mode\":\"modelMaterial\"}}):_c('base-image',{attrs:{\"fit\":\"contain\",\"src\":item.url,\"data-img-type\":\"material-info\"}}),_c('i',{staticClass:\"iconfont iconmoxing\"})],1)]:_vm._e()],2)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, ref } from '@vue/composition-api';\n\nimport VideoPlayer from '@/components/video/index.vue';\nimport ModelPurePreviewer from '@/views/model/preview/ModelPurePreviewer.vue';\nimport { delay } from '@4dst-saas/public-utils/dist/delay';\n\nexport default defineComponent({\n  name: 'CarouselMaterialImages',\n  components: {\n    VideoPlayer,\n    ModelPurePreviewer,\n  },\n  props: {\n    swiperList: {\n      type: Array as () => { type: string, url: string, imageType: string, id: string, isCloudRenderComplete?: '0' | '1', scale: string }[],\n      required: true,\n    },\n    materialId: {\n      type: String,\n      default: '',\n    },\n    size: {\n      tyep: String,\n      default: '',\n    },\n    initialIndex: {\n      type: Number,\n      default: 0,\n    },\n  },\n  // @ts-ignore\n  setup(props, { root: { $ImageViewer, $Dialog } }) {\n    const carousel = ref(null);\n\n    async function previewImage() {\n      const imgList = props.swiperList.reduce((acc, cur) => {\n        // @ts-ignore\n        if (cur.type === 'image') acc.push(cur.url);\n        return acc;\n      }, []);\n      await $ImageViewer.show(imgList as string[], {\n        index: ((carousel.value) as any).activeIndex,\n        targetElems: '.material-img',\n      });\n    }\n\n    async function previewVideo(sourceUrl: string) {\n      await $Dialog.dialogify({\n        is: VideoPlayer,\n        props: {\n          sourceURL: sourceUrl,\n        },\n      }, {\n        props: {\n          fullscreen: true,\n          width: '100%',\n          height: '100%',\n          top: '0',\n          bottom: '0',\n          center: true,\n        },\n      });\n    }\n\n    async function previewModel(id: string) {\n      await $Dialog.dialogify({\n        is: ModelPurePreviewer,\n        props: {\n          modelId: id,\n          materialId: props.materialId,\n          mode: 'modelMaterial',\n        },\n      }, {\n        props: {\n          fullscreen: true,\n          width: '100%',\n          height: '100%',\n          top: '0',\n          bottom: '0',\n          flex: 'column',\n          center: true,\n        },\n      });\n    }\n\n    // 设置轮播图的滚动的index(外部调用)\n    function carouselSetActiveItem(index: number) {\n      ((carousel.value) as any).setActiveItem(index);\n    }\n\n    const modelLoadedList = ref<number[]>([]);\n\n    async function changeIndex(index: number) {\n      if (props.swiperList[index].type === 'model') {\n        await delay(500);\n        modelLoadedList.value = [...modelLoadedList.value, index];\n      }\n    }\n\n    function showRenderFlag(item: typeof props.swiperList[0]) {\n      return item.imageType && ['thumbnail', 'flat', 'texture', 'crease', 'toeThumbnail'].includes(item.imageType)\n        && parseInt(item.isCloudRenderComplete as string, 10) !== 1;\n    }\n\n    function showScale(item: typeof props.swiperList[0]) {\n      // return item.imageType && (item.imageType === 'texture' || item.imageType === 'flat');\n      return !!item.scale;\n    }\n\n    return {\n      carousel, previewImage, previewVideo, previewModel, carouselSetActiveItem, changeIndex, modelLoadedList, showRenderFlag, showScale,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialCarousel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialCarousel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MaterialCarousel.vue?vue&type=template&id=ee5148c6&scoped=true&\"\nimport script from \"./MaterialCarousel.vue?vue&type=script&lang=ts&\"\nexport * from \"./MaterialCarousel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MaterialCarousel.vue?vue&type=style&index=0&id=ee5148c6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee5148c6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}