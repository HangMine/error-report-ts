{"version":3,"sources":["webpack:///./src/components/dynamic-form/SampleOrder/SampleForm.vue?5055","webpack:///./src/components/dynamic-form/SampleOrder/SampleForm.vue","webpack:///./src/components/dynamic-form/SampleOrder/sample.ts","webpack:///./src/components/dynamic-form/SampleOrder/SampleForm.vue?de79","webpack:///./src/components/dynamic-form/SampleOrder/SampleForm.vue?23c4"],"names":["staticRenderFns","schema","$schema","$id","type","title","description","default","required","sort","properties","styleName","i18n","t","maxLength","validator","styleNumber","lastName","lastNumber","soleName","soleNumber","vampName","vampNumber","colorType","custom","customType","wrapperClass","ref","modifyDesc","dataReceiviedTime","deadline","shoeType","sampleSize","sampleQuantity","season","gender","series","bindOrderNo","labels","limit","customInputs","sampleForm","props","id","String","f","f2","render","this","formData","formItemClass","formItemGenerator","v","map","i","colorName","colorNumber","max","e","inputValue","inputLabel","window","close","$act","submit","setup","data","opener","detail","value","JSON","parse","stringify","key","j2t","validate","level","LEVELS","ERROR","$refs","colorTypeForm","customInputForm","Object","assign","component"],"mappings":"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","file":"js/chunk-34ba222c.98daa322.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SampleForm.vue?vue&type=style&index=0&id=462c0f70&lang=scss&scoped=true&\"","var render, staticRenderFns\nimport script from \"./SampleForm.vue?vue&type=script&lang=tsx&\"\nexport * from \"./SampleForm.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./SampleForm.vue?vue&type=style&index=0&id=462c0f70&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"462c0f70\",\n  null\n  \n)\n\nexport default component.exports","import i18n from '@/i18n';\nimport { JSONschema } from '@4dst-saas/form-utils/dist/components/jsonschema2form';\n\nexport const schema: JSONschema = {\n  $schema: 'http://json-schema.org/draft-07/schema',\n  $id: 'http://example.com/example.json',\n  type: 'object',\n  title: 'The root schema',\n  description: 'The root schema comprises the entire JSON document.',\n  default: {},\n  required: [\n    'styleName', 'lastName',\n  ],\n  sort: [\n    'styleName', 'styleNumber', 'lastName', 'lastNumber', 'soleName', 'soleNumber',\n    'vampName', 'vampNumber', 'colorType', 'modifyDesc',\n    'dataReceiviedTime', 'deadline', 'shoeType', 'sampleSize', 'sampleQuantity',\n    'season', 'gender', 'series', 'bindOrderNo', 'labels', 'customInputs',\n  ],\n  properties: {\n    styleName: {\n      $id: '#/properties/styleName',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.style_name'),\n      default: '',\n      maxLength: 18,\n      validator: ['styleName'],\n    },\n    styleNumber: {\n      $id: '#/properties/styleNumber',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.style_number'),\n      maxLength: 18,\n      default: '',\n    },\n    lastName: {\n      $id: '#/properties/lastName',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.shoe_name'),\n      maxLength: 18,\n      default: '',\n      validator: ['lastName'],\n    },\n    lastNumber: {\n      $id: '#/properties/lastNumber',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.shoe_number'),\n      maxLength: 18,\n      default: '',\n    },\n    soleName: {\n      $id: '#/properties/soleName',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.outsole_name'),\n      maxLength: 18,\n      default: '',\n    },\n    soleNumber: {\n      $id: '#/properties/soleNumber',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.outsole_number'),\n      maxLength: 18,\n      default: '',\n    },\n    vampName: {\n      $id: '#/properties/vampName',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.upper_name'),\n      maxLength: 18,\n      default: '',\n    },\n    vampNumber: {\n      $id: '#/properties/vampNumber',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.upper_number'),\n      maxLength: 18,\n      default: '',\n    },\n    colorType: {\n      $id: '#/properties/colorType',\n      type: 'array',\n      maxLength: 18,\n      custom: true,\n      customType: 'ColorType',\n      wrapperClass: 'custom-component-wrap',\n      ref: 'colorTypeForm',\n    },\n    modifyDesc: {\n      $id: '#/properties/modifyDesc',\n      type: 'array',\n      custom: true,\n      customType: 'ModifyRemark',\n      wrapperClass: 'custom-component-wrap',\n    },\n    dataReceiviedTime: {\n      $id: '#/properties/dataReceiviedTime',\n      type: 'string',\n      custom: true,\n      customType: 'DateHourPicker',\n      title: i18n.t('order_management.sample_dynamic_form.receive_date'),\n    },\n    deadline: {\n      $id: '#/properties/deadline',\n      type: 'string',\n      custom: true,\n      customType: 'DateHourPicker',\n      title: i18n.t('order_management.sample_dynamic_form.style_delivery'),\n    },\n    shoeType: {\n      $id: '#/properties/shoeType',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.shoe_type'),\n      maxLength: 18,\n      default: '',\n    },\n    sampleSize: {\n      $id: '#/properties/sampleSize',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.sample_size'),\n      maxLength: 18,\n      default: '',\n    },\n    sampleQuantity: {\n      $id: '#/properties/sampleQuantity',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.sample_amount'),\n      maxLength: 18,\n      default: '',\n    },\n    season: {\n      $id: '#/properties/season',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.season'),\n      maxLength: 18,\n      default: '',\n    },\n    gender: {\n      $id: '#/properties/gender',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.gender'),\n      maxLength: 18,\n      default: '',\n    },\n    series: {\n      $id: '#/properties/series',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.collection'),\n      maxLength: 18,\n      default: '',\n    },\n    bindOrderNo: {\n      $id: '#/properties/bindOrderNo',\n      type: 'string',\n      title: i18n.t('order_management.sample_dynamic_form.customer_order_number'),\n      default: '',\n    },\n    labels: {\n      $id: '#/properties/labels',\n      type: 'array',\n      title: i18n.t('order_management.sample_dynamic_form.tag'),\n      custom: true,\n      customType: 'VueInputTag',\n      wrapperClass: 'flex-column',\n      limit: 1,\n    },\n    customInputs: {\n      $id: '#/properties/customInputs',\n      type: 'array',\n      custom: true,\n      customType: 'CustomInput',\n      wrapperClass: 'custom-component-wrap',\n      ref: 'customInputForm',\n    },\n  },\n};\nexport default {};\n","\nimport { defineComponent, getCurrentInstance, ref } from '@vue/composition-api';\nimport JSONschema2Type from '@4dst-saas/form-utils/dist/components/jsonschema2form';\nimport formItemGenerator from '@/components/dynamic-form/formItemGenerator';\nimport isFilled from '@/utils/validators/is-filled';\nimport strLength from '@/utils/validators/str-length';\nimport AppError from '@/utils/error';\nimport { i18n } from '@/i18n';\nimport { ColorType, CustomInput, Sample } from '../OrderSamples.vue';\nimport { schema } from './sample';\n\nconst sampleForm = defineComponent({\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n    // 是否禁用上传\n    f: {\n      type: String,\n    },\n    // 是否禁用编辑要求\n    f2: {\n      type: String,\n    },\n  },\n  render() {\n    const s = this as InstanceType<typeof sampleForm>;\n    return (\n      <section class=\"form-page\">\n        <div class=\"form-container\">\n          <div class=\"title\">{i18n.t('order_management.sample_dynamic_form.style_detail')}</div>\n          <JSONschema2Type ref=\"j2t\" form={this.formData}\n            disabled={this.f2 === '1'}\n            size=\"small\"\n            class=\"custom-form\"\n            setting={{\n              formItemClass: 'custom-form-item',\n            }}\n            jsonschema={schema}\n            formItemGenerator={formItemGenerator}\n            formItemValidator={{\n              styleName(v: string) {\n                isFilled(v);\n              },\n              lastName(v: string) {\n                isFilled(v);\n              },\n              colorType(v: ColorType[]) {\n                try {\n                  v.map(i => {\n                    const { colorName, colorNumber } = i;\n                    strLength(colorName ?? '', { max: 18 });\n                    strLength(colorNumber ?? '', { max: 18 });\n                    return i;\n                  });\n                } catch (e) {\n                  return false;\n                }\n                return true;\n              },\n              customInputs(v: CustomInput[]) {\n                v.map(i => {\n                  const { inputValue, inputLabel } = i;\n                  strLength(inputValue ?? '', { max: 18 });\n                  strLength(inputLabel ?? '', { max: 18 });\n                  return i;\n                });\n              },\n            }}\n          />\n        </div>\n        <div class=\"form-submit-section\">\n          <el-button type=\"default\" round onclick={() => window.close()}>{i18n.t('order_management.sample_dynamic_form.cancel')}</el-button>\n          <el-button type=\"primary\" round onclick={() => this.$act(this.submit)}>{i18n.t('order_management.sample_dynamic_form.save')}</el-button>\n        </div>\n      </section>\n    );\n  },\n  setup(props) {\n    const data = ref(window.opener[`sample_${props.id}`] as Sample);\n    const { detail } = data.value;\n    const formData = ref(JSON.parse(\n      JSON.stringify(data.value, (key, value) => {\n        if (key === 'detail') {\n          return null;\n        }\n        return value;\n      }),\n    ));\n    // console.log(JSON.stringify(data.value, function replacer(key, value) {\n    //   if (value === window.opener) {\n    //     return null;\n    //   }\n    //   console.log(this, key, value);\n    //   return value;\n    // }));\n    // const formData = JSON.parse(JSON.stringify(data.value));\n    const j2t = ref();\n    async function submit() {\n      if (j2t.value) {\n        try {\n          await j2t.value.validate();\n        } catch (e) {\n          throw new AppError(i18n.t('validator.form_val_fail'), {\n            level: AppError.LEVELS.ERROR,\n          });\n        }\n        await j2t.value.$refs.colorTypeForm.validate();\n        await j2t.value.$refs.customInputForm.validate();\n        // 校验成功后赋值\n        Object.assign(data.value, formData.value, { detail });\n        window.close();\n      }\n    }\n    // watch(() => {return props.f2}, () => {\n    //   sampleJson.$set()\n    // })\n    return {\n      data,\n      submit,\n      j2t,\n      formData,\n    };\n  },\n});\nexport default sampleForm;\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SampleForm.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SampleForm.vue?vue&type=script&lang=tsx&\""],"sourceRoot":""}