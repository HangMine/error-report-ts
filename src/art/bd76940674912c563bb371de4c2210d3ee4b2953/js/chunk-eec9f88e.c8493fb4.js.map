{"version":3,"sources":["webpack:///./src/components/upload/src/upload-style-normal.vue?0466","webpack:///./src/views/material-mall/components/DisplayModeSwitcher.vue?0c7a","webpack:///./src/views/material-mall/components/DisplayModeSwitcher.vue?9313","webpack:///./src/views/material-mall/components/DisplayModeSwitcher.vue?c0d3","webpack:///./src/views/material-mall/components/DisplayModeSwitcher.vue?c03e","webpack:///./src/views/material-mall/components/DisplayModeSwitcher.vue","webpack:///./src/assets/img/material-mart/template_banner.png","webpack:///./src/views/supplier-backend/preview/homepage/HomePageDefault.vue?9060","webpack:///./src/views/supplier-backend/preview/homepage/HomePageDefault.vue?54f9","webpack:///./src/views/supplier-backend/preview/homepage/HomePageDefault.vue?88a2","webpack:///./src/views/supplier-backend/preview/homepage/HomePageDefault.vue?0b33","webpack:///./src/views/supplier-backend/preview/homepage/HomePageDefault.vue","webpack:///./src/utils/composables/use-callback-when-last-element-shown.ts","webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-closest.js","webpack:///./src/components/upload/index.vue","webpack:///./src/components/upload/src/upload-drag.vue?bd3b","webpack:///./src/components/upload/src/upload-style-normal.vue?468a","webpack:///src/components/upload/src/upload-style-normal.vue","webpack:///./src/components/upload/src/upload-style-normal.vue?f0ac","webpack:///./src/components/upload/src/upload-style-normal.vue","webpack:///src/components/upload/src/upload-drag.vue","webpack:///./src/components/upload/src/upload-drag.vue?edcf","webpack:///./src/components/upload/src/upload-drag.vue","webpack:///./src/components/upload/src/upload-file-input.vue?00c4","webpack:///src/components/upload/src/upload-file-input.vue","webpack:///./src/components/upload/src/upload-file-input.vue?9a5b","webpack:///./src/components/upload/src/upload-file-input.vue","webpack:///src/components/upload/index.vue","webpack:///./src/components/upload/index.vue?d890","webpack:///./src/components/upload/index.vue?3c63"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","value","on","v","$emit","staticRenderFns","ViewTool","model","event","prop","props","type","String","default","component","module","exports","attrs","company","logo","_v","_s","name","handleClick","callback","$$v","activeName","expression","$t","params","$set","goods","length","displayMode","_e","_l","e","index","MaterialItem","key","id","tag","previewList","staticStyle","companyId","HomePageDefault","components","CompanyInfo","DisplayModeSwitcher","materialItem","Function","Object","setup","root","preview","$props","supplierPage","backgroundClass","keyword","orderBy","asc","supplierArticleName","size","val","totalPage","currentPage","axios","method","url","res","data","initialValue","fetchGoodsList","page","useFilters","orders","searchs","filters","args","pages","records","loadMore","targetPage","Array","isArray","push","list","map","imgJson","thumbnail","$ImageViewer","show","targetElems","isQt","callbackWhenLastElementShown","targetSelectorOrSelector","io","watcher","currentVm","nL","$nextTick","targets","$el","querySelectorAll","target","IntersectionObserver","entries","obs","forEach","entry","intersectionRatio","unobserve","rootMargin","threshold","observe","immediate","terminate","disconnect","callbackWhenLastElementShownNotCompositionVersion","listName","$watch","children","childElementCount","beforeDestroy","$options","call","defineProperty","useClosest","_compositionApi","_vueClosest","componentName","that","getCurrentInstance","computed","closest","_default","dragoverStatus","$event","preventDefault","dataTransfer","files","handleDragOver","_t","styleType","buffer","imgUrl","stopPropagation","vm","visible","toggleVisible","inject","methods","UploadStyleNormal","ref","accept","multiple","uploadFiles","disabled","Boolean","$refs","inputFile","click","UploadDrag","UploadFileInput","maxSize","Number","Infinity","minSize","draggable","provide","imgs","unmatchFiles","mounted","destroyed","handleDeleteFile","handleToggleVisible","status","_checkFiles","Promise","console","info","file","extensionList","includes","extension","result","unmatchFilesLength","resolve"],"mappings":"kJAAA,W,oCCAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,MAAM,CAACG,MAAM,CAAe,UAAdP,EAAIQ,MAAoB,SAAU,UAAW,eAAeC,GAAG,CAAC,MAAQ,SAAUC,GAAK,OAAOV,EAAIW,MAAM,QAAQ,YAAc,CAACP,EAAG,IAAI,CAACE,YAAY,0BAA0BF,EAAG,MAAM,CAACG,MAAM,CAAe,UAAdP,EAAIQ,MAAoB,UAAW,SAAU,eAAeC,GAAG,CAAC,MAAQ,SAAUC,GAAK,OAAOV,EAAIW,MAAM,QAAQ,WAAa,CAACP,EAAG,IAAI,CAACE,YAAY,4BAClfM,EAAkB,G,YCehBC,EAAW,6BAAgB,CAC/BC,MAAO,CACLC,MAAO,QACPC,KAAM,SAERC,MAAO,CACLT,MAAO,CACLU,KAAMC,OACNC,QAAS,YAKA,IC7Bma,I,wBCQ9aC,EAAY,eACd,EACAtB,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAAS,E,oICnBfC,EAAOC,QAAU,IAA0B,oC,oCCA3C,W,yCCAA,IAAIxB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,SAASkB,MAAM,CAAC,IAAM,EAAQ,QAAkD,IAAM,QAAQpB,EAAG,KAAK,CAACA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWkB,MAAM,CAAC,IAAMxB,EAAIyB,SAAWzB,EAAIyB,QAAQC,KAAK,IAAM,YAAY1B,EAAI2B,GAAG,IAAI3B,EAAI4B,GAAG5B,EAAIyB,SAAWzB,EAAIyB,QAAQI,MAAM,OAAOzB,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,UAAU,CAACK,GAAG,CAAC,YAAYT,EAAI8B,aAAahB,MAAM,CAACN,MAAOR,EAAc,WAAE+B,SAAS,SAAUC,GAAMhC,EAAIiC,WAAWD,GAAKE,WAAW,eAAe,CAAC9B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,+BAA+B,KAAO,SAAS/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,uCAAuC,KAAO,gBAAgB/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,uCAAuC,KAAO,gBAAgB/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,2CAA2C,KAAO,oBAAoB/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,qCAAqC,KAAO,cAAc/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,+BAA+B,KAAO,SAAS/B,EAAG,cAAc,CAACoB,MAAM,CAAC,MAAQxB,EAAImC,GAAG,mCAAmC,KAAO,oBAAoB,GAAG/B,EAAG,WAAW,CAACE,YAAY,aAAakB,MAAM,CAAC,KAAO,QAAQ,cAAc,iBAAiB,YAAcxB,EAAImC,GAAG,oCAAoCrB,MAAM,CAACN,MAAOR,EAAIoC,OAAc,QAAEL,SAAS,SAAUC,GAAMhC,EAAIqC,KAAKrC,EAAIoC,OAAQ,UAAWJ,IAAME,WAAW,qBAAqB,KAAyB,kBAAnBlC,EAAIiC,WAAgC7B,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAAEN,EAAS,MAAEI,EAAG,MAAM,CAACE,YAAY,yCAAyC,CAACF,EAAG,IAAI,CAACE,YAAY,uBAAuB,CAACN,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAImC,GAAG,uCAAwC,CAACnC,EAAIsC,MAAMC,aAAanC,EAAG,sBAAsB,CAACU,MAAM,CAACN,MAAOR,EAAe,YAAE+B,SAAS,SAAUC,GAAMhC,EAAIwC,YAAYR,GAAKE,WAAW,kBAAkB,GAAGlC,EAAIyC,KAAMzC,EAAIsC,OAAStC,EAAIsC,MAAMC,OAAS,EAAG,CAACnC,EAAG,MAAM,CAACE,YAAY,kBAAkBN,EAAI0C,GAAI1C,EAAS,OAAE,SAAS2C,EAAEC,GAAO,OAAOxC,EAAGJ,EAAI6C,aAAa,CAACC,IAAIH,EAAEI,GAAGC,IAAI,YAAY1C,YAAY,qBAAqBkB,MAAM,CAAC,aAAemB,EAAE,YAAc3C,EAAIwC,aAAa/B,GAAG,CAAC,QAAU,WAAc,OAAOT,EAAIiD,YAAYL,UAAe,IAAIxC,EAAG,MAAM,CAACE,YAAY,cAAc4C,YAAY,CAAC,OAAS,UAAU,CAAClD,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAImC,GAAG,4CAA4C,GAAG/B,EAAG,cAAc,CAACoB,MAAM,CAAC,UAAYxB,EAAImD,cAAc,IACljFvC,EAAkB,G,8KC8DhBwC,EAAkB,6BAAgB,CACtCvB,KAAM,kBACNwB,WAAY,CACVC,YAAA,aACAC,sBAAA,YAEFtC,MAAO,CACLkC,UAAW,CACTjC,KAAMC,OACNC,QAAS,IAEXoC,aAAc,CACZtC,KAAM,CAACuC,SAAUC,UAGrBC,MAfsC,SAehC1C,EAfgC,GAejB,QAAN2C,EAAM,EAANA,KACPC,EAAO,UAAG,IAA2B,kBAA9B,aAAG,EAAuCrD,MACjDqC,EAAe5B,EAAMuC,aAAevC,EAAMuC,aAA3B,OAA0CK,QAA1C,IAA0CA,OAA1C,EAA0CA,EAASC,OAAON,aACzEO,EAAY,UAAG,IAAgC,uBAAnC,aAAG,EAAiDvD,MACtEuD,IAAiBA,EAAaC,gBAAkB,IAChD,IAAMxB,EAAc,iBAAI,SAElBP,EAAa,iBAAI,OACjBG,EAAS,sBAAS,CACtBe,UAAWlC,EAAMkC,UACjBc,QAAS,GACTC,QAAS,QACTC,KAAK,EACLC,oBAAqB,GACrBC,KAAM,KAER,SAASvC,IAEPM,EAAO6B,QAAU,GACjB7B,EAAO8B,QAAU,QACjB9B,EAAO+B,KAAM,EACb/B,EAAOiC,KAAO,GACW,QAArBpC,EAAWzB,OACb4B,EAAO6B,QAAU,GACjB7B,EAAO8B,QAAU,eACjB9B,EAAO+B,KAAM,EACb/B,EAAOiC,KAAO,IACgB,eAArBpC,EAAWzB,OACpB4B,EAAO6B,QAAU,GACjB7B,EAAO8B,QAAU,QACjB9B,EAAO+B,KAAM,EACb/B,EAAOiC,KAAO,IACgB,eAArBpC,EAAWzB,MACpB4B,EAAO6B,QAAU,iBACa,mBAArBhC,EAAWzB,MACpB4B,EAAO6B,QAAU,qBACa,aAArBhC,EAAWzB,QACpB4B,EAAO6B,QAAU,gBAGrB,oBAAM,kBAAM7B,EAAO6B,WAAS,SAACK,GACF,kBAArBrC,EAAWzB,QACbyB,EAAWzB,MAAQ,UAMvB,IAYI+D,EAoCAC,EAhDE/C,EAAU,IAAS,yDAAC,8GAAS0B,EAAT,EAASA,UAAT,SACL,OAAAsB,EAAA,MAAM,CACvBC,OAAQ,MACRC,IAAK,kCACLvC,OAAQ,CACNW,GAAII,KALgB,cAClByB,EADkB,OAOpBC,KAPoB,kBAQjBD,GARiB,2CAAD,sDAStBxC,EAAQ,CACT0C,aAAc,OA1DG,SA6DJC,EA7DI,gGA6DnB,8IACE5B,iBADF,MACcf,EAAOe,UADrB,MAEEc,eAFF,MAEY7B,EAAO6B,QAFnB,MAGEC,eAHF,MAGY9B,EAAO8B,QAHnB,MAIEC,WAJF,MAIQ/B,EAAO+B,IAJf,MAKEC,2BALF,MAKwBhC,EAAOgC,oBAL/B,MAMEY,YANF,MAMS,EANT,MAOEX,YAPF,MAOSjC,EAAOiC,KAPhB,EASQY,IAAeb,EATvB,SAUqB,OAAAK,EAAA,MAAM,CACvBE,IAAK,qCACLD,OAAQ,OACRG,KAAM,CACJG,OACAX,OACAa,OAAQ,CAAC,CACPrD,KAAMqC,EACN1D,MAAO2D,IAETgB,QAASlB,EACTmB,QAASH,EAAa,CACpB,CACEpD,KAAM,YACNrB,MAAO2C,GAET,CACEtB,KAAM,sBACNrB,MAAO4D,IAEP,CAAC,CAAEvC,KAAM,YAAarB,MAAO2C,OA9BvC,cAUQyB,EAVR,OAgCMC,KAhCN,kBAiCSD,GAjCT,2CA7DmB,wBAiGnB,IAAMtC,EAAQ,IAAS,yDAAC,WAAO+C,GAAP,uGACJN,EAAeM,GADX,cAChBT,EADgB,OAEtBJ,EAAc,EACdD,EAAYK,EAAIU,MAHM,kBAIfV,EAAIW,SAJW,2CAAD,sDAKpBnD,GAtGgB,SAyGJoD,IAzGI,6FAyGnB,qHAAwBC,EAAxB,+BAAqCjB,EAAc,IAC7CkB,MAAMC,QAAQrD,EAAM9B,QAAUiF,GAAclB,GADlD,8BAEI,EAAAjC,EAAM9B,OAAMoF,KAFhB,4BAE+Bb,EAAe,iCACrC3C,GADoC,IAEvC4C,KAAMS,KAJZ,mBAKQF,QALR,oDAMIf,IANJ,4CAzGmB,iCAkJJvB,EAlJI,gGAkJnB,WAA2BL,GAA3B,8FACQiD,EADR,OACevD,QADf,IACeA,OADf,EACeA,EAAO9B,MAAMsF,KAAI,SAACnD,GAAD,oBAAYA,QAAZ,IAAYA,GAAZ,UAAYA,EAAGoD,eAAf,aAAY,EAAYC,aADxD,SAEQpC,EAAKqC,aAAaC,KAAKL,EAAM,CACjCjD,QACAuD,YAAa,kBAJjB,2CAlJmB,wBA0JnB,OAvCK/D,EAAOiC,MAEV,eAA6B/B,EAAOkD,EAAU,uBAqCzC,CACLlD,QAGAkD,WACAvC,cAEAhB,aACAH,cACAL,UACAoB,eACAT,SACAI,cACA4D,KAAA,WAIS,ICzPib,I,wBCQ5b/E,EAAY,eACd,EACAtB,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAAS,E,mLCLT,SAAUgF,EACdR,EAAuB9D,EAAoBuE,GAE3C,IAAIC,EACAC,EACEC,EAAY,kCAClB,wBAAU,WACRD,EAAU,oBAAM,yBAAMX,QAAN,IAAMA,OAAN,EAAMA,EAAMrF,QAAb,yDAAoB,WAAOkG,GAAP,8FAC7BA,GAAMA,EAAGnE,QAAUmE,EAAGnE,OAAS,GADF,uCAEzBkE,QAFyB,IAEzBA,OAFyB,EAEzBA,EAAWE,YAFc,OAIS,kBAA7BL,GACHM,EAAUH,EAAWI,IAAIC,iBAAiBR,GAChDS,EAASH,EAAQA,EAAQrE,OAAS,IAElCwE,EAAST,EAAyB9F,MAEpC+F,EAAK,IAAIS,sBAAqB,SAACC,EAASC,GACtCD,EAAQE,SAAQ,SAAAC,GACVA,EAAMC,kBAAoB,IAAOD,EAAML,SAAWA,IACpDG,EAAII,UAAUF,EAAML,QACpBhF,UAGH,CACD6B,KAAM,KACN2D,WAAY,kBACZC,UAAW,KAEbjB,EAAGkB,QAAQV,GAtBoB,2CAApB,sDAwBZ,CACDW,WAAW,OAGf,IAAMC,EAAY,WACZnB,GACFA,IAEED,GACFA,EAAGqB,cAIP,OADA,yBAAYD,GACLA,EAGH,SAAUE,EACdC,EAAkB/F,EAAoBuE,GAEtC,IAAIC,EAEEE,EAAaxG,KACnBwG,EAAUsB,OAAOD,EAAjB,yDAA2B,WAAOpB,GAAP,8FACrBA,GAAMA,EAAGnE,OAAS,GADG,gCAEjBkE,EAAUE,YAFO,OAMiB,kBAA7BL,GACHM,EAAUH,EAAWI,IAAIC,iBAAiBR,GAChDS,EAASH,EAAQA,EAAQrE,OAAS,IAGlCwE,EAAST,EAAyB0B,SAAS1B,EAAyB2B,kBAAoB,GAE1F1B,EAAK,IAAIS,sBAAqB,SAACC,EAASC,GACtCD,EAAQE,SAAQ,SAAAC,GAEkB,IAA5BA,EAAMC,oBACRH,EAAII,UAAUF,EAAML,QACpBhF,UAGH,CACD6B,KAAM,KACN2D,WAAY,kBACZC,UAAW,IAEbjB,EAAGkB,QAAQV,GA1BY,2CAA3B,uDALgF,IAkCxEmB,EAAkBzB,EAAU0B,SAA5BD,cACRzB,EAAU0B,SAASD,cAAgB,WAE7B3B,GACFA,EAAGqB,aAEDM,GACFA,EAAcE,KAAK3B,IAKV,U,kCC1Gf/C,OAAO2E,eAAe9G,EAAS,aAAc,CAC3Cf,OAAO,IAETe,EAAQ+G,WAAaA,EACrB/G,EAAQH,aAAU,EAElB,IAAImH,EAAkB,EAAQ,QAE1BC,EAAc,EAAQ,QAG1B,SAASF,EAAWG,GAClB,IAAIC,GAAO,EAAIH,EAAgBI,sBAC/B,OAAO,EAAIJ,EAAgBK,WAAU,WACnC,GAAKF,EAIL,OAAOF,EAAYK,QAAQT,KAAKM,EAAMD,MAI1C,IAAIK,EAAWR,EACf/G,EAAQH,QAAU0H,G,kLCzBd,EAAQ,E,qECAR,EAAS,WAAa,IAAI9I,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,MAAM,CAAE,SAAYP,EAAI+I,gBAAiB7F,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQzC,GAAG,CAAC,KAAO,SAASuI,GAAgC,OAAxBA,EAAOC,iBAAwBjJ,EAAIW,MAAM,OAAQqI,EAAOE,aAAaC,QAAQ,SAAW,SAASH,GAAgC,OAAxBA,EAAOC,iBAAwBjJ,EAAIoJ,eAAeJ,IAAS,UAAY,SAASA,GAAQhJ,EAAI+I,gBAAiB,KAAS,CAAC/I,EAAIqJ,GAAG,UAAU,CAAoB,WAAlBrJ,EAAIsJ,UAAwBlJ,EAAG,uBAAuBJ,EAAIyC,QAAQ,IAC7gB7B,EAAkB,GCDlB,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,uBAAuB,CAAEN,EAAIuJ,OAAa,OAAEnJ,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,YAAYkB,MAAM,CAAC,IAAMxB,EAAIuJ,OAAOC,UAAUpJ,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACE,YAAY,4BAA4BG,GAAG,CAAC,MAAQ,SAASuI,GAAiC,OAAzBA,EAAOS,kBAAyBzJ,EAAI0J,GAAG/I,MAAM,cAAcP,EAAG,IAAI,CAACE,YAAY,WAAWC,MAAMP,EAAI2J,QAAU,iBAAmB,WAAWlJ,GAAG,CAAC,MAAQ,SAASuI,GAAiC,OAAzBA,EAAOS,kBAAyBzJ,EAAI4J,cAAcZ,WAAgB5I,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACE,YAAY,iCAAiCF,EAAG,IAAI,CAACE,YAAY,eAAe,CAACN,EAAI2B,GAAG3B,EAAI4B,GAAG5B,EAAImC,GAAG,0BAC/vB,EAAkB,GCqBtB,GACE0H,OAAQ,CAAC,KAAM,UACfhF,KAFF,WAGI,MAAO,CACL8E,SAAS,IAGbG,QAAS,CACPF,cADJ,WAEM3J,KAAK0J,SAAW1J,KAAK0J,QACrB1J,KAAKyJ,GAAG/I,MAAM,iBAAkBV,KAAK0J,YChCgV,I,wBCQvXtI,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCHf,GACEQ,KAAM,aACNwB,WAAY,CACV0G,kBAAJ,GAEEF,OAAQ,CAAC,aACThF,KANF,WAOI,MAAO,CACLkE,gBAAgB,IAGpBe,QAAS,CACPV,eADJ,WAEWnJ,KAAK8I,iBAAgB9I,KAAK8I,gBAAiB,MC7B6T,ICO/W,EAAY,eACd,EACA,EACAnI,GACA,EACA,KACA,KACA,MAIa,I,QClBX,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAAC4J,IAAI,YAAY1J,YAAY,SAASkB,MAAM,CAAC,OAASxB,EAAIiK,OAAO,SAAWjK,EAAIkK,SAAS,KAAO,QAAQzJ,GAAG,CAAC,OAAST,EAAImK,gBAChO,EAAkB,GCUP,GACbtI,KAAM,kBACNgI,OAAQ,CAAC,SAAU,YACnB5I,MAAO,CACLmJ,SAAU,CACRlJ,KAAMmJ,UAGVP,QAAS,CACP,gBACO7J,KAAKmK,UAAUnK,KAAKqK,MAAMC,UAAUC,SAE3C,cACE,MAAM,MAAErB,GAAUlJ,KAAKqK,MAAMC,UACzBpB,EAAM5G,SACRtC,KAAKU,MAAM,OAAQwI,GAInBlJ,KAAKqK,MAAMC,UAAU/J,MAAQ,OC9ByL,ICO1N,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,I,QCXf,GACEqB,KAAM,aACNwB,WAAY,CACVoH,WAAJ,EACIC,gBAAJ,GAEEzJ,MAAO,CAELqI,UAAW,CACTpI,KAAMC,OACNC,QAAS,UAGXuJ,QAAS,CACPzJ,KAAM0J,OACNxJ,QAASyJ,KAGXC,QAAS,CACP5J,KAAM0J,OACNxJ,QAAS,GAGX6I,OAAQ,CACN/I,KAAMC,OACNC,QAAS,IAGX2J,UAAW,CACT7J,KAAMmJ,QACNjJ,SAAS,GAGX8I,SAAU,CACRhJ,KAAMmJ,QACNjJ,SAAS,GAGXgJ,SAAU,CACRlJ,KAAMmJ,QACNjJ,SAAS,IAGb4J,QA3CF,WA4CI,MAAO,CACLtB,GAAIzJ,KAAKyJ,GACTH,OAAQtJ,KAAKsJ,OACbU,OAAQhK,KAAKgK,OACbC,SAAUjK,KAAKiK,SACfZ,UAAWrJ,KAAKqJ,UAChBc,SAAUnK,KAAKmK,WAGnBvF,KArDF,WAsDI,MAAO,CACL6E,GAAI,IAAI,EAAd,WACMH,OAAQ,CACNC,OAAQ,IAEVyB,KAAM,GACNC,aAAc,KAGlBC,QA/DF,WA+DA,WAEIlL,KAAKyJ,GACT,yBAAM,OAAN,wBACA,kCAAM,OAAN,6BAEE0B,UArEF,WAsEInL,KAAKyJ,GAAK,MAEZI,QAAS,CACP,OADJ,SACA,oKACA,mBAEA,WAHA,iEAMA,6BANA,UAMA,EANA,OAQA,WARA,wBASA,iDACA,uBAVA,2BAcA,oBAdA,+CAiBIuB,iBAlBJ,WAmBMpL,KAAKsJ,OAAOC,OAAS,GACrBvJ,KAAKU,MAAM,WAGb2K,oBAvBJ,SAuBA,GACMrL,KAAKU,MAAM,iBAAkB4K,IAG/BC,YA3BJ,SA2BA,cACM,OAAO,IAAIC,SAAQ,SAAzB,KACQ,IAAR,KAEQtC,EAAMhC,SAAQ,SAAtB,GAGU,GAFAuE,QAAQC,KAAKC,GAEK,IAAdA,EAAKvH,KAAT,CAMA,GAAI,EAAd,QACY,IAAZ,WACA,cACA,sBACA,iBACA,wCACY,IAAKwH,EAAcC,SAASC,GAE1B,YADA,EAAd,qBAMcH,EAAKvH,KAAO,EAA1B,QACY,EAAZ,uEAIU2H,EAAOpG,KAAKgG,QAvBV,EAAZ,0EA2BQ,IAAR,wBACmC,IAAvBK,EACF,EAAV,+FACA,MACU,EAAV,2EAIQD,EAAOzJ,OAAS,GAAI2J,EAAQF,QAIlCjM,OAlJF,WAkJA,0BACA,iCAGA,GACMyB,MAAO,CACLuB,GAAI,YAENxC,MAAO,CACL6J,SAAR,GAEM3J,GAAI,CACF+J,MAAO,WACL,EAAV,qCAKI,OAAO,EAAX,cACA,IADA,CAEA,mBAAM,GAAN,CAAQ,KAAR,qCACA,oBAHA,uCAKA,eALA,SAKA,aALA,IAKA,oBChL8V,IdQ1V,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,S,2CenBf","file":"js/chunk-eec9f88e.c8493fb4.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-style-normal.vue?vue&type=style&index=0&id=0eab218a&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DisplayModeSwitcher.vue?vue&type=style&index=0&id=e0fef154&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"display-mode-switcher flex\"},[_c('div',{class:[_vm.value === 'drape' ? 'select': 'default', 'flex-center'],on:{\"click\":function (v) { return _vm.$emit('input','drape'); }}},[_c('i',{staticClass:\"iconfont icon-drape\"})]),_c('div',{class:[_vm.value === 'drape' ? 'default': 'select', 'flex-center'],on:{\"click\":function (v) { return _vm.$emit('input','flat'); }}},[_c('i',{staticClass:\"iconfont icon-flat\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent } from '@vue/composition-api';\n\nconst ViewTool = defineComponent({\n  model: {\n    event: 'input',\n    prop: 'value',\n  },\n  props: {\n    value: {\n      type: String,\n      default: 'drape',\n    },\n  },\n});\n// type ViewTool = InstanceType<typeof ViewTool>;\nexport default ViewTool;\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DisplayModeSwitcher.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DisplayModeSwitcher.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DisplayModeSwitcher.vue?vue&type=template&id=e0fef154&scoped=true&\"\nimport script from \"./DisplayModeSwitcher.vue?vue&type=script&lang=ts&\"\nexport * from \"./DisplayModeSwitcher.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DisplayModeSwitcher.vue?vue&type=style&index=0&id=e0fef154&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e0fef154\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/template_banner.329bd032.png\";","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomePageDefault.vue?vue&type=style&index=0&id=70dd1a74&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"homepage-default\"},[_c('div',{staticClass:\"header\"},[_c('img',{staticClass:\"banner\",attrs:{\"src\":require('@/assets/img/material-mart/template_banner.png'),\"alt\":\"横幅\"}}),_c('h1',[_c('div',{staticClass:\"logo flex-center\"},[_c('img',{staticClass:\"logo-img\",attrs:{\"src\":_vm.company && _vm.company.logo,\"alt\":\"logo\"}})]),_vm._v(\" \"+_vm._s(_vm.company && _vm.company.name)+\" \")]),_c('div',{staticClass:\"tab-bar flex-space-between\"},[_c('el-tabs',{on:{\"tab-click\":_vm.handleClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.new'),\"name\":\"new\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.most_viewed'),\"name\":\"mostViewed\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.staff_picks'),\"name\":\"staffPicks\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.core_collection'),\"name\":\"coreCollection\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.in_season'),\"name\":\"inSeason\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('material-mall.page_name.all'),\"name\":\"all\"}}),_c('el-tab-pane',{attrs:{\"label\":_vm.$t('supplier-backend.supplier_brief'),\"name\":\"supplierBrief\"}})],1),_c('el-input',{staticClass:\"search-box\",attrs:{\"size\":\"small\",\"prefix-icon\":\"el-icon-search\",\"placeholder\":_vm.$t('supplier-backend.preview.search')},model:{value:(_vm.params.keyword),callback:function ($$v) {_vm.$set(_vm.params, \"keyword\", $$v)},expression:\"params.keyword\"}})],1)]),(_vm.activeName !== 'supplierBrief')?_c('div',{staticClass:\"material-list\"},[(_vm.goods)?_c('div',{staticClass:\"material-list-head flex-space-between\"},[_c('p',{staticClass:\"material-list-count\"},[_vm._v(_vm._s(_vm.$t('material-mall.totally_search_results', [_vm.goods.length])))]),_c('DisplayModeSwitcher',{model:{value:(_vm.displayMode),callback:function ($$v) {_vm.displayMode=$$v},expression:\"displayMode\"}})],1):_vm._e(),(_vm.goods && _vm.goods.length > 0)?[_c('div',{staticClass:\"flex flex-wrap\"},_vm._l((_vm.goods),function(e,index){return _c(_vm.MaterialItem,{key:e.id,tag:\"component\",staticClass:\"material-good-item\",attrs:{\"materialInfo\":e,\"displayMode\":_vm.displayMode},on:{\"preview\":function () { return _vm.previewList(index); }}})}),1)]:_c('div',{staticClass:\"flex-center\",staticStyle:{\"height\":\"300px\"}},[_vm._v(_vm._s(_vm.$t('supplier-backend.preview.no_product')))])],2):_c('CompanyInfo',{attrs:{\"companyId\":_vm.companyId}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\nimport {\n  defineComponent, ref, Ref, reactive, computed, watch,\n} from '@vue/composition-api';\nimport axios from '@/api/axios';\nimport useLoader from '_/composables/use-loader';\nimport useClosest from '_/composables/use-closest';\nimport { callbackWhenLastElementShown } from '@/utils/composables/use-callback-when-last-element-shown';\n// import { getCurrentCompany } from '@/loaders/company';\nimport CompanyInfo from '@/views/supplier-backend/company-info/index.vue';\nimport SupplierPage from '@/views/supplier-page/index.vue';\nimport DisplayModeSwitcher from '@/views/material-mall/components/DisplayModeSwitcher.vue';\nimport isQt from '@/utils/is-qt';\nimport Preview from '../index.vue';\n\nconst HomePageDefault = defineComponent({\n  name: 'HomePageDefault',\n  components: {\n    CompanyInfo,\n    DisplayModeSwitcher,\n  },\n  props: {\n    companyId: {\n      type: String,\n      default: '',\n    },\n    materialItem: {\n      type: [Function, Object],\n    },\n  },\n  setup(props, { root }) {\n    const preview = useClosest<typeof Preview>('Preview')?.value;\n    const MaterialItem = props.materialItem ? props.materialItem : preview?.$props.materialItem;\n    const supplierPage = useClosest<typeof SupplierPage>('SupplierPage')?.value;\n    supplierPage && (supplierPage.backgroundClass = '');\n    const displayMode = ref('drape');\n\n    const activeName = ref('new');\n    const params = reactive({\n      companyId: props.companyId,\n      keyword: '',\n      orderBy: 'click',\n      asc: false,\n      supplierArticleName: '',\n      size: 50,\n    });\n    function handleClick() {\n      // 默认全部面料\n      params.keyword = '';\n      params.orderBy = 'click';\n      params.asc = false;\n      params.size = 50;\n      if (activeName.value === 'new') {\n        params.keyword = '';\n        params.orderBy = 'gmtStoreTime';\n        params.asc = false;\n        params.size = 50;\n      } else if (activeName.value === 'mostViewed') {\n        params.keyword = '';\n        params.orderBy = 'click';\n        params.asc = false;\n        params.size = 50;\n      } else if (activeName.value === 'staffPicks') {\n        params.keyword = '推荐|Staff Picks';\n      } else if (activeName.value === 'coreCollection') {\n        params.keyword = '主营|Core Collection';\n      } else if (activeName.value === 'inSeason') {\n        params.keyword = '当季|In Season';\n      }\n    }\n    watch(() => params.keyword, (val) => {\n      if (activeName.value === 'supplierBrief') {\n        activeName.value = 'all';\n      }\n    });\n    // const company = computed(() => {\n    //   return getCurrentCompany();\n    // });\n    const company = useLoader(async ({ companyId }) => {\n      const res = (await axios({\n        method: 'get',\n        url: '/authcenter/company/get/info/id',\n        params: {\n          id: companyId,\n        },\n      })).data;\n      return res;\n    }, params, {\n      initialValue: null,\n    });\n    let totalPage: number;\n    async function fetchGoodsList({\n      companyId = params.companyId,\n      keyword = params.keyword,\n      orderBy = params.orderBy,\n      asc = params.asc,\n      supplierArticleName = params.supplierArticleName,\n      page = 1,\n      size = params.size,\n    }) {\n      const useFilters = !!supplierArticleName;\n      const res = (await axios({\n        url: '/mall/supplier/materials/published',\n        method: 'post',\n        data: {\n          page,\n          size,\n          orders: [{\n            name: orderBy,\n            value: asc,\n          }],\n          searchs: keyword,\n          filters: useFilters ? [\n            {\n              name: 'companyId',\n              value: companyId,\n            },\n            {\n              name: 'supplierArticleName',\n              value: supplierArticleName,\n            },\n          ] : [{ name: 'companyId', value: companyId }],\n        },\n      })).data;\n      return res;\n    }\n    let currentPage: number;\n    const goods = useLoader(async (args) => {\n      const res = await fetchGoodsList(args);\n      currentPage = 1;\n      totalPage = res.pages;\n      return res.records;\n    }, params);\n\n\n    async function loadMore(targetPage = currentPage + 1) {\n      if (Array.isArray(goods.value) && targetPage <= totalPage) {\n        goods.value.push(...(await fetchGoodsList({\n          ...params,\n          page: targetPage,\n        })).records);\n        currentPage++;\n      }\n    }\n\n    if (!params.size) {\n      // loadMore();\n      callbackWhenLastElementShown(goods, loadMore, '.material-good-item');\n    }\n\n    // let iObserver:IntersectionObserver;\n\n    // watch(() => goods?.value, async (nL) => {\n    //   if (nL) {\n    //     if (iObserver) iObserver.disconnect();\n    //     await root.$nextTick();\n    //     const targets = document.querySelectorAll('.material-good-item');\n    //     const target = targets[targets.length - 1];\n    //     console.log(target);\n    //     iObserver = new IntersectionObserver(() => loadMore(), {\n    //       threshold: 1,\n    //     });\n    //     iObserver.observe(target);\n    //   }\n    // });\n    // async function changeOrder(order: {order: string, asc: boolean}) {\n    //   const { query } = root.$route;\n    //   root.$router.replace({\n    //     query: {\n    //       ...query,\n    //       orderBy: order.order,\n    //       asc: order.asc.toString(),\n    //     },\n    //   });\n    // }\n\n    async function previewList(index: number) {\n      const list = goods?.value.map((e: any) => e?.imgJson?.thumbnail) as String[];\n      await root.$ImageViewer.show(list, {\n        index,\n        targetElems: '.material-img',\n      });\n    }\n\n    return {\n      goods,\n\n      // changeOrder,\n      loadMore,\n      previewList,\n\n      activeName,\n      handleClick,\n      company,\n      MaterialItem,\n      params,\n      displayMode,\n      isQt,\n    };\n  },\n});\nexport default HomePageDefault;\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomePageDefault.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomePageDefault.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HomePageDefault.vue?vue&type=template&id=70dd1a74&scoped=true&\"\nimport script from \"./HomePageDefault.vue?vue&type=script&lang=ts&\"\nexport * from \"./HomePageDefault.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HomePageDefault.vue?vue&type=style&index=0&id=70dd1a74&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70dd1a74\",\n  null\n  \n)\n\nexport default component.exports","import {\n  watch, Ref, getCurrentInstance, onUnmounted, onMounted,\n} from '@vue/composition-api';\nimport Vue from 'vue';\nimport 'intersection-observer';\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelector: string\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, container: Ref<Element>\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelectorOrSelector: string | Ref<Element>,\n) {\n  let io:IntersectionObserver;\n  let watcher: any;\n  const currentVm = getCurrentInstance();\n  onMounted(() => {\n    watcher = watch(() => list?.value, async (nL) => {\n      if (nL && nL.length && nL.length > 0) {\n        await currentVm?.$nextTick();\n        let target: Element;\n        if (typeof targetSelectorOrSelector === 'string') {\n          const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n          target = targets[targets.length - 1];\n        } else {\n          target = targetSelectorOrSelector.value;\n        }\n        io = new IntersectionObserver((entries, obs) => {\n          entries.forEach(entry => {\n            if (entry.intersectionRatio > 0.9 && entry.target === target) {\n              obs.unobserve(entry.target);\n              callback();\n            }\n          });\n        }, {\n          root: null,\n          rootMargin: '0px 0px 0px 0px',\n          threshold: 0.9,\n        });\n        io.observe(target);\n      }\n    }, {\n      immediate: true,\n    });\n  });\n  const terminate = () => {\n    if (watcher) {\n      watcher();\n    }\n    if (io) {\n      io.disconnect();\n    }\n  };\n  onUnmounted(terminate);\n  return terminate;\n}\n\nexport function callbackWhenLastElementShownNotCompositionVersion(\n  listName: string, callback: ()=> any, targetSelectorOrSelector: string | Element,\n) {\n  let io:IntersectionObserver;\n  // @ts-ignore\n  const currentVm = (this as InstanceType<typeof Vue>);\n  currentVm.$watch(listName, async (nL) => {\n    if (nL && nL.length > 0) {\n      await currentVm.$nextTick();\n\n      let target;\n\n      if (typeof targetSelectorOrSelector === 'string') {\n        const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n        target = targets[targets.length - 1];\n        // console.log(target);\n      } else {\n        target = targetSelectorOrSelector.children[targetSelectorOrSelector.childElementCount - 1];\n      }\n      io = new IntersectionObserver((entries, obs) => {\n        entries.forEach(entry => {\n          // console.log(entry.intersectionRatio);\n          if (entry.intersectionRatio === 1) {\n            obs.unobserve(entry.target);\n            callback();\n          }\n        });\n      }, {\n        root: null,\n        rootMargin: '0px 0px 0px 0px',\n        threshold: 1,\n      });\n      io.observe(target);\n    }\n  });\n  const { beforeDestroy } = currentVm.$options;\n  currentVm.$options.beforeDestroy = function newBeforeDestroy() {\n    // console.log('beforedestroy');\n    if (io) {\n      io.disconnect();\n    }\n    if (beforeDestroy) {\n      beforeDestroy.call(currentVm);\n    }\n  };\n}\n\nexport default callbackWhenLastElementShown;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useClosest = useClosest;\nexports.default = void 0;\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nvar _vueClosest = require(\"../plugins/vue-closest\");\n\n// import { InstanceOfVue } from '@/typings/vue-types.d';\nfunction useClosest(componentName) {\n  var that = (0, _compositionApi.getCurrentInstance)();\n  return (0, _compositionApi.computed)(function () {\n    if (!that) {\n      return undefined;\n    }\n\n    return _vueClosest.closest.call(that, componentName);\n  });\n}\n\nvar _default = useClosest;\nexports.default = _default;","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6d242180&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6d242180\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ 'dragover': _vm.dragoverStatus },staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},on:{\"drop\":function($event){$event.preventDefault();return _vm.$emit('file', $event.dataTransfer.files)},\"dragover\":function($event){$event.preventDefault();return _vm.handleDragOver($event)},\"dragleave\":function($event){_vm.dragoverStatus = false}}},[_vm._t(\"default\",[(_vm.styleType === 'normal')?_c('upload-style-normal'):_vm._e()])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-style-normal\"},[(_vm.buffer.imgUrl)?_c('div',{staticClass:\"previewer-box\"},[_c('img',{staticClass:\"previewer\",attrs:{\"src\":_vm.buffer.imgUrl}}),_c('div',{staticClass:\"previewer-veil\"},[_c('i',{staticClass:\"iconfont icon-file-delete\",on:{\"click\":function($event){$event.stopPropagation();return _vm.vm.$emit('delete')}}}),_c('i',{staticClass:\"iconfont\",class:_vm.visible ? 'icon-eye-slash' : 'icon-eye',on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleVisible($event)}}})])]):_c('div',{staticClass:\"upload-area\"},[_c('i',{staticClass:\"iconfont icon-upload-cloud-o\"}),_c('p',{staticClass:\"upload-text\"},[_vm._v(_vm._s(_vm.$t('upload.upload')))])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"html\">\n  <div class=\"upload-style-normal\">\n    <!-- 上传预览图 -->\n    <div v-if=\"buffer.imgUrl\" class=\"previewer-box\">\n      <img :src=\"buffer.imgUrl\" class=\"previewer\">\n      <div class=\"previewer-veil\">\n        <i class=\"iconfont icon-file-delete\" @click.stop=\"vm.$emit('delete')\" />\n        <i\n          class=\"iconfont\"\n          :class=\"visible ? 'icon-eye-slash' : 'icon-eye'\"\n          @click.stop=\"toggleVisible\" />\n      </div>\n    </div>\n    <!-- 上传按钮 -->\n    <div v-else class=\"upload-area\">\n      <i class=\"iconfont icon-upload-cloud-o\" />\n      <p class=\"upload-text\">{{ $t('upload.upload') }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  inject: ['vm', 'buffer'],\n  data() {\n    return {\n      visible: true,\n    };\n  },\n  methods: {\n    toggleVisible() {\n      this.visible = !this.visible;\n      this.vm.$emit('toggle-visible', this.visible);\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.upload-style-normal {\n  width: 100px;\n  height: 100px;\n  border-radius: 4px;\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.previewer-box {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  &:hover .previewer-veil {\n    display: flex;\n  }\n\n  .previewer {\n    width: 100%;\n    height: 100%;\n  }\n  .previewer-veil {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 2;\n    background-color: rgba(0, 0, 0, 0.6);\n\n    .iconfont {\n      position: absolute;\n      padding: 0 5px;\n      left: 0;\n      top: 6px;\n      z-index: 2;\n      font-size: 16px;\n      color: #fff;\n      transition: all linear 100ms;\n      &:hover {\n        color: $color-primary;\n      }\n    }\n    .icon-file-delete {\n      left: auto;\n      right: 0;\n      top: 5px;\n    }\n  }\n}\n\n.upload-area {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  color: #7f7f7f;\n  border: 1px dashed #ccc;\n  border-radius: 4px;\n  transition: all linear 150ms;\n  &:hover {\n    color: #2878ff;\n    border-color: #2878ff;\n  }\n  .upload-text {\n    margin-top: 5px;\n    font-size: 12px;\n  }\n  .iconfont {\n    font-size: 24px;\n    font-weight: 400;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-style-normal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-style-normal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload-style-normal.vue?vue&type=template&id=0eab218a&scoped=true&lang=html&\"\nimport script from \"./upload-style-normal.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-style-normal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload-style-normal.vue?vue&type=style&index=0&id=0eab218a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0eab218a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    :class=\"{ 'dragover': dragoverStatus }\"\n    style=\"width: 100%; height: 100%;\"\n    @drop.prevent=\"$emit('file', $event.dataTransfer.files)\"\n    @dragover.prevent=\"handleDragOver\"\n    @dragleave=\"dragoverStatus = false\">\n    <slot>\n      <upload-style-normal v-if=\"styleType === 'normal'\" />\n    </slot>\n  </div>\n</template>\n\n<script>\nimport UploadStyleNormal from './upload-style-normal';\n\nexport default {\n  name: 'UploadDrag',\n  components: {\n    UploadStyleNormal,\n  },\n  inject: ['styleType'],\n  data() {\n    return {\n      dragoverStatus: false,\n    };\n  },\n  methods: {\n    handleDragOver() {\n      if (!this.dragoverStatus) this.dragoverStatus = true;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-drag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-drag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload-drag.vue?vue&type=template&id=2ff9226d&\"\nimport script from \"./upload-drag.vue?vue&type=script&lang=js&\"\nexport * from \"./upload-drag.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{ref:\"inputFile\",staticClass:\"hidden\",attrs:{\"accept\":_vm.accept,\"multiple\":_vm.multiple,\"type\":\"file\"},on:{\"change\":_vm.uploadFiles}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <input\n    :accept=\"accept\"\n    :multiple=\"multiple\"\n    type=\"file\"\n    class=\"hidden\"\n    ref=\"inputFile\"\n    @change=\"uploadFiles\" />\n</template>\n\n<script lang=\"javascript\">\nexport default {\n  name: 'UploadFileInput',\n  inject: ['accept', 'multiple'],\n  props: {\n    disabled: {\n      type: Boolean,\n    },\n  },\n  methods: {\n    triggerUpload() {\n      if (!this.disabled) this.$refs.inputFile.click();\n    },\n    uploadFiles() {\n      const { files } = this.$refs.inputFile;\n      if (files.length) {\n        this.$emit('file', files);\n\n        // 每次上传完，把input(file)的值设置空\n        // 解决两次选取同一个文件不能触发相应事件的问题\n        this.$refs.inputFile.value = '';\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-file-input.vue?vue&type=script&lang=javascript&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload-file-input.vue?vue&type=script&lang=javascript&\"","import { render, staticRenderFns } from \"./upload-file-input.vue?vue&type=template&id=06a2a601&\"\nimport script from \"./upload-file-input.vue?vue&type=script&lang=javascript&\"\nexport * from \"./upload-file-input.vue?vue&type=script&lang=javascript&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Vue from 'vue';\nimport i18n from 'i18next';\n\nimport UploadDrag from './src/upload-drag';\nimport UploadFileInput from './src/upload-file-input';\n\nexport default {\n  name: 'UploadArea',\n  components: {\n    UploadDrag,\n    UploadFileInput,\n  },\n  props: {\n    // 上传区域的样式\n    styleType: {\n      type: String,\n      default: 'normal',\n    },\n    // 上传文件最大限制\n    maxSize: {\n      type: Number,\n      default: Infinity,\n    },\n    // 上传文件最小限制\n    minSize: {\n      type: Number,\n      default: 1,\n    },\n    // 支持的格式：（可以用一下分隔符[,;、；|]）\n    accept: {\n      type: String,\n      default: '',\n    },\n    // 支持拖拽状态\n    draggable: {\n      type: Boolean,\n      default: true,\n    },\n    // 支持多文件上传状态\n    multiple: {\n      type: Boolean,\n      default: false,\n    },\n    // 功能激活状态\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  provide() {\n    return {\n      vm: this.vm,\n      buffer: this.buffer,\n      accept: this.accept,\n      multiple: this.multiple,\n      styleType: this.styleType,\n      disabled: this.disabled,\n    };\n  },\n  data() {\n    return {\n      vm: new Vue(), // 示例化一个vue，做该部件的事件传递的中间者\n      buffer: { // 中间对象，做该部件的部分参数传递的中间者\n        imgUrl: '',\n      },\n      imgs: [],\n      unmatchFiles: [], // 没有符合规范的问题\n    };\n  },\n  mounted() {\n    // 局部事件监听\n    this.vm\n      .$on('delete', () => this.handleDeleteFile())\n      .$on('toggle-visible', (status) => this.handleToggleVisible(status));\n  },\n  destroyed() {\n    this.vm = null;\n  },\n  methods: {\n    async upload(files) {\n      this.unmatchFiles = [];\n      // 校验是否禁止状态\n      if (this.disabled) return;\n\n      // 如果当前上传的文件没有通过校验，不往下执行\n      const matchFiles = await this._checkFiles(Array.from(files));\n\n      if (!this.multiple) {\n        this.buffer.imgUrl = window.URL.createObjectURL(matchFiles[0]);\n        this.$emit('upload', matchFiles[0]);\n        return;\n      }\n\n      this.$emit('upload', matchFiles);\n    },\n    // 处理删除文件事件\n    handleDeleteFile() {\n      this.buffer.imgUrl = '';\n      this.$emit('delete');\n    },\n    // 处理重新上传文件事件\n    handleToggleVisible(status) {\n      this.$emit('toggle-visible', status);\n    },\n    // 检查文件是否符合上传规范\n    _checkFiles(files) {\n      return new Promise((resolve, reject) => {\n        const result = [];\n\n        files.forEach(file => {\n          console.info(file);\n          // 过滤空文件\n          if (file.size === 0) {\n            this.$message.warning(i18n.t('upload.msg.exceed_size', { filename: file.name }));\n            return;\n          }\n\n          // 校验文件是否符合上传格式; 如果没有格式要求，则不做格式校验\n          if (this.accept) {\n            const extensionList = this.accept\n              .toLowerCase()\n              .replace(/[\\s/.]/g, '')\n              .split(/[,;、；|]/);\n            const extension = file.name.split('.').pop().toLowerCase();\n            if (!extensionList.includes(extension)) {\n              this.unmatchFiles.push(file);\n              return;\n            }\n          }\n\n          // 校验文件是否符合大小规范\n          if (file.size > this.maxSize) {\n            this.$message.warning(i18n.t('upload.msg.exceed_size', { filename: file.name }));\n            return;\n          }\n\n          result.push(file);\n        });\n\n        // 根据没有符合格式的文件数量，显示不同的提示\n        const unmatchFilesLength = this.unmatchFiles.length;\n        if (unmatchFilesLength === 1) {\n          this.$message.warning(i18n.t('upload.msg.invalid_file_format', { filename: this.unmatchFiles[0].name }));\n        } else if (unmatchFilesLength >= 2) {\n          this.$message.warning(i18n.t('upload.msg.invalid_files_format', { filesNum: unmatchFilesLength }));\n        }\n\n        // eslint-disable-next-line\n        result.length > 0 ? resolve(result) : null;\n      });\n    },\n  },\n  render() {\n    const { draggable, disabled } = this;\n\n    // 容器的属性\n    const data = {\n      attrs: {\n        id: 'dropzone',\n      },\n      class: {\n        disabled,\n      },\n      on: {\n        click: () => {\n          this.$refs.uploadInput.triggerUpload();\n        },\n      },\n    };\n\n    return (\n      <div {...data}>\n        {draggable ? <upload-drag on-file={this.upload}>{this.$slots.default}</upload-drag>\n          : this.$slots.default\n        }\n        <upload-file-input disabled={this.disabled} on-file={this.upload} ref=\"uploadInput\"></upload-file-input>\n      </div>\n    );\n  },\n};\n</script>\n\n<style scoped>\n.disabled {\n  background-color: rgba(0, 0, 0, 0.05);\n  cursor: not-allowed;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6d242180&scoped=true&lang=css&\""],"sourceRoot":""}