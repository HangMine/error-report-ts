{"version":3,"sources":["webpack:///./src/components/OverText.vue?2cdc","webpack:///./src/components/OverText.vue?ec56","webpack:///./src/components/OverText.vue?05eb","webpack:///./src/components/OverText.vue","webpack:///./src/views/test/Home/review/useWidthTransitionEnd.ts","webpack:///./src/views/test/Home/review/List.vue?845f","webpack:///./src/views/test/Home/review/useCols.ts","webpack:///./src/assets/img/empty.png","webpack:///./src/components/OverText.vue?0f06","webpack:///./src/views/test/Home/review/List.vue?aeca","webpack:///./src/views/test/Home/review/List.vue?e360","webpack:///./src/views/test/Home/review/List.vue?34ac","webpack:///./src/views/test/Home/review/List.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","attrs","content","$attrs","ref","style","_t","staticRenderFns","name","inheritAttrs","components","props","width","type","Number","String","default","setup","refs","root","emit","state","isOver","wrapStyle","setSlotsElInline","slotEls","wrap","children","forEach","el","display","init","WrapEl","scrollWidth","clientWidth","textContent","$nextTick","component","useWidthTransitionEnd","overText","handleWidthTransitionend","i","Array","isArray","value","item","useCols","inicColsNum","_this","currentColsNum","review","colsNum","colWidth","colWidthStyle","module","exports","directives","rawName","expression","on","toCols","_v","_l","title","key","$event","refInFor","_s","fetchList","params","listLength","isSearch","map","_","hid","OverText","searchValue","Boolean","list","loading","immediate","colWrapStyle","paddingRight"],"mappings":"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","file":"js/chunk-2d82b4b0.2fb5cba8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"over-text\"},[(_vm.isOver)?[_c('el-tooltip',_vm._b({attrs:{\"effect\":\"dark\",\"content\":_vm.content,\"tabindex\":null}},'el-tooltip',_vm.$attrs,false),[_c('div',{ref:\"wrap\",staticClass:\"over-text-wrap\",style:(_vm.wrapStyle)},[_vm._t(\"default\")],2)])]:[_c('div',{ref:\"wrap\",staticClass:\"over-text-wrap\",style:(_vm.wrapStyle)},[_vm._t(\"default\")],2)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, onMounted, getCurrentInstance,\n} from '@vue/composition-api';\n\nexport default defineComponent({\n  name: 'over-text',\n  inheritAttrs: false,\n  components: {},\n  props: {\n    width: {\n      type: [Number, String],\n      default: 'auto',\n    },\n  },\n  setup(props, { refs, emit, root }) {\n    const _this = getCurrentInstance();\n    const state = reactive({\n      isOver: false,\n      content: '',\n      wrapStyle: {\n        width: typeof props.width === 'string' ? props.width : `${props.width}px`,\n      },\n    });\n\n    const setSlotsElInline = () => {\n      // 这里的refs.wrap已经是isOver的wrap\n      const slotEls = [...refs.wrap.children] as HTMLElement[];\n      slotEls.forEach(el => {\n        el.style.display = 'inline';\n      });\n    };\n\n    // 可能从外部调用,不能修改名字\n    const init = async () => {\n      const WrapEl = refs.wrap as HTMLElement;\n\n      if (WrapEl.scrollWidth > WrapEl.clientWidth) {\n        state.isOver = true;\n        state.content = WrapEl.textContent || '';\n\n        await root.$nextTick();\n        setSlotsElInline();\n      } else {\n        // 必须设置,有些场景可能从toolTip变成不需要toolTip\n        state.isOver = false;\n      }\n    };\n\n    onMounted(async () => {\n      init();\n    });\n\n    return {\n      ...toRefs(state),\n      init,\n    };\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OverText.vue?vue&type=template&id=06da4a7a&scoped=true&\"\nimport script from \"./OverText.vue?vue&type=script&lang=ts&\"\nexport * from \"./OverText.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OverText.vue?vue&type=style&index=0&id=06da4a7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06da4a7a\",\n  null\n  \n)\n\nexport default component.exports","import {\n  reactive, computed, ref, toRefs, getCurrentInstance, onMounted, watch, SetupContext,\n} from '@vue/composition-api';\n\nconst useWidthTransitionEnd = () => {\n  const overText = ref<any[]|null>(null);\n  const handleWidthTransitionend = (i:number) => {\n    if (i !== 0) return; // 只监听第一列的宽度动画,然后初始化所有OverText,因为排版分成cols和list两种\n    if (!Array.isArray(overText.value)) return;\n    overText.value.forEach(item => item.init());\n  };\n  return {\n    overText,\n    handleWidthTransitionend,\n  };\n};\n\nexport default useWidthTransitionEnd;\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=32e83e31&lang=scss&scoped=true&\"","import {\n  reactive, computed, ref, toRefs, getCurrentInstance, onMounted, watch, SetupContext,\n} from '@vue/composition-api';\n\nconst useCols = (inicColsNum:number) => {\n  const _this:any = getCurrentInstance();\n  const state = reactive({\n    currentColsNum: inicColsNum,\n  });\n  const review = ref(null);\n  watch(() => _this.colsNum, () => {\n    if (!review.value || _this.colsNum < 16) {\n      state.currentColsNum = _this.colsNum;\n      return;\n    }\n    // 小于1600px的屏幕不能是16列，图标太小看不见\n    state.currentColsNum = (review.value! as HTMLDivElement).clientWidth > 1600 ? _this.colsNum : 8;\n  });\n  const colWidth = computed(() => 100 / state.currentColsNum);\n  const colWidthStyle = computed(() => ({\n    width: `${colWidth.value}%`,\n  }));\n  return {\n    ...toRefs(state),\n    review,\n    colWidth,\n    colWidthStyle,\n  };\n};\n\nexport default useCols;\n","module.exports = __webpack_public_path__ + \"img/empty.bb61be1a.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=style&index=0&id=06da4a7a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"review\",staticClass:\"meet-home__review--list\"},[_c('div',{staticClass:\"back-btn\",on:{\"click\":_vm.toCols}},[_c('i',{staticClass:\"el-icon-arrow-left\"}),_vm._v(\"返回 \")]),_c('ul',_vm._l((_vm.list),function(ref,i){\nvar title = ref.title;\nreturn _c('li',{key:i,staticClass:\"list-item\",style:(_vm.colWrapStyle),on:{\"transitionend\":function($event){return _vm.handleWidthTransitionend(i)}}},[_c('div',{staticClass:\"list-item-content\"},[_c('img',{staticClass:\"list-item-content-img\",attrs:{\"src\":require('@/assets/img/empty.png')}}),_c('OverText',{ref:\"overText\",refInFor:true},[_c('div',{staticClass:\"list-item-content-title\"},[_vm._v(\" \"+_vm._s(title)+\" \")])])],1)])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, watch,\n} from '@vue/composition-api';\nimport OverText from '@/components/OverText.vue';\nimport useCols from './useCols';\nimport useWidthTransitionEnd from './useWidthTransitionEnd';\n\nconst fetchList = async (params:any) => {\n  const listLength = params.isSearch ? 10 : 20;\n  return [...Array(listLength)].map((_, i) => ({\n    hid: `1_${i}`,\n    title: `测试1_${i}`,\n  }));\n};\n\nexport default defineComponent({\n  name: 'meet-home__review--list',\n  components: { OverText },\n  props: {\n    colsNum: {\n      type: Number as () => 4 | 8 | 16,\n      default: 8,\n    },\n    searchValue: {\n      type: String,\n      default: '',\n    },\n    isSearch: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props, { refs, emit, root }) {\n    const state = reactive({\n      list: [] as any[],\n      loading: false,\n    });\n    watch(() => ([props.searchValue, props.isSearch]), async () => {\n      try {\n        state.loading = true;\n        state.list = await fetchList({ isSearch: props.isSearch });\n      } finally {\n        state.loading = false;\n      }\n    }, { immediate: true });\n    const {\n      currentColsNum, review, colWidth, colWidthStyle,\n    } = useCols(props.colsNum);\n    const colWrapStyle = computed(() => ({\n      ...colWidthStyle.value,\n      paddingRight: `${props.colsNum === 16 ? 10 : 30}px`,\n    }));\n    const { overText, handleWidthTransitionend } = useWidthTransitionEnd();\n    const toCols = () => {\n      emit('to-cols');\n    };\n    return {\n      ...toRefs(state),\n      toCols,\n      currentColsNum,\n      review,\n      colWrapStyle,\n      overText,\n      handleWidthTransitionend,\n    };\n  },\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=32e83e31&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=ts&\"\nexport * from \"./List.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=32e83e31&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32e83e31\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}