{"version":3,"sources":["webpack:///./src/views/supplier-backend/components/FromFieldText.vue?07b2","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?81bd","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?15b1","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?bcb1","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue","webpack:///./src/views/material/info/components/UnitField.vue?c985","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?2d72","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?fefd","webpack:///./src/views/supplier-backend/components/FromFieldText.vue?f308","webpack:///./src/views/supplier-backend/components/FromFieldText.vue","webpack:///./src/views/material/info/components/UnitField.vue?b6eb","webpack:///src/views/material/info/components/UnitField.vue","webpack:///./src/views/material/info/components/UnitField.vue?bf5f","webpack:///./src/views/material/info/components/UnitField.vue","webpack:///./src/utils/i18n-material-type.ts","webpack:///./src/views/material-mall/GoodsDetail/GoodsBaseInfo.vue?e114","webpack:///./src/api/dictionary.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","loading","_l","field","key","prop","label","value","material","units","tagsDisplay","notes","staticRenderFns","getCategoryName","id","axios","method","url","data","ids","components","FromFieldText","props","type","Object","require","default","setup","fields","collapseStatus","val","oldVal","category","categoryName","i18nCategoryName","split","map","name","join","t","materialsTechnology","m","surfaceTechnics","designContent","applicableProductLine","moqUnit","samplePeriodUnit","productionLeadTimeUnit","thicknessUnit","materialCountryOfOrigin","deep","immediate","printPatternsInfoTags","printPatternsInfo","tag","patternsTags","patterns","filter","e","length","component","_t","content","_e","unit","index","$i18n","i18next","language","UnitField","String","required","Number","Array","translateCategoryName","getDictionaryByTypeCode","typeCode","headers","params","getCountryList","keyword"],"mappings":"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","file":"js/chunk-5cda8d1c.16952f08.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=style&index=0&id=f41e56ee&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"goods-base\"},[_c('div',{staticClass:\"divider-title\"},[_vm._v(\" \"+_vm._s(_vm.$t('material-mall.goods-detail.product attributes'))+\" \")]),_c('div',{attrs:{\"loading\":_vm.loading}},[_c('ul',{staticClass:\"attr-row\"},[_vm._l((_vm.fields),function(field){return _c('li',{key:field.prop,staticClass:\"field-item\"},[_c('FromFieldText',{attrs:{\"id\":field.label,\"label\":field.label,\"content\":field.value ? field.value : _vm.material[field.prop],\"units\":field.units}})],1)}),_c('li',{staticClass:\"field-item full\"},[_c('FromFieldText',{staticClass:\"field-item-pattern\",attrs:{\"label\":_vm.$t('material.info.print_and_pattern')}},[_vm._v(\" \"+_vm._s(_vm.tagsDisplay)+\" \")])],1),_c('li',{staticClass:\"field-item full\"},[_c('FromFieldText',{attrs:{\"label\":_vm.$t('material.info.notes')}},[_c('div',[_vm._v(_vm._s(_vm.material.notes))])])],1)],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport i18n from 'i18next';\nimport {\n  defineComponent, ref, watch, computed,\n} from '@vue/composition-api';\nimport CustomCollapse from '@/components/collapse/Collapse.vue';\nimport axios from '@/utils/axios';\n\nimport FromFieldText from '@/views/supplier-backend/components/FromFieldText.vue';\nimport translateCategoryName from '@/utils/i18n-material-type';\n\n// 获取大中小类组合的类名\nasync function getCategoryName(id: string) {\n  return ((await axios({\n    method: 'post',\n    url: '/show/category/name',\n    data: {\n      ids: [id],\n    },\n  })).data)[id];\n}\n\nexport default defineComponent({\n  components: {\n    FromFieldText,\n  },\n  props: {\n    material: {\n      type: Object,\n      require: true,\n      default: () => ({}),\n    },\n  },\n  setup(props) {\n    const loading = ref(true);\n    const fields = ref<any>([]);\n    const collapseStatus = ref<Boolean>(false);\n\n\n    watch(() => props.material, async (val, oldVal) => {\n      // 当请求回material数据才渲染页面\n      loading.value = !!oldVal;\n\n      const categoryName = await getCategoryName(val.category) as string;\n      const i18nCategoryName = categoryName.split('/').map(\n        name => translateCategoryName(name),\n      ).join('/');\n\n      fields.value = [\n        {\n          label: i18n.t('material.info.material_type'),\n          value: i18nCategoryName,\n          // units: [\n          //   { type: 'materialType', value: val.materialType },\n          // ],\n        },\n        {\n          label: i18n.t('material.info.materialsTechnology'),\n          prop: 'materialsTechnology',\n          value: val.materialsTechnology\n            ? val.materialsTechnology.split(',').map((m: string) => i18n.t(`material.materialsTechnology.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.surfaceTechnics'),\n          prop: 'surfaceTechnics',\n          value: val.surfaceTechnics\n            ? val.surfaceTechnics.split(',').map((m: string) => i18n.t(`material.surfaceTechnics.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.designContent'),\n          prop: 'designContent',\n          value: val.designContent\n            ? val.designContent.split(',').map((m: string) => i18n.t(`material.designContent.${m}`)).join() : '',\n        },\n        {\n          label: i18n.t('material.info.applicableProductLine'),\n          prop: 'applicableProductLine',\n          value: val.applicableProductLine\n            ? val.applicableProductLine.split(',').map((m: string) => i18n.t(`material.applicableProductLine.${m}`)).join() : '',\n        },\n        // { label: '材料种类', prop: i18n.t(`material.materialsTechnology.${val.materialsTechnology}`) },\n        // { label: '表面工艺', prop: i18n.t(`material.surfaceTechnics.${val.surfaceTechnics}`) },\n        // { label: '图案内容', prop: i18n.t(`material.designContent.${val.designContent}`) },\n        // { label: '适用产品线', prop: i18n.t(`material.applicableProductLine.${val.applicableProductLine}`) },\n        {\n          label: i18n.t('material.info.moq'),\n          prop: 'moq',\n          units: [\n            { type: 'mqqUnit', value: val.moqUnit },\n          ],\n        },\n        { label: i18n.t('material.info.season'), prop: 'season' },\n        {\n          label: i18n.t('material.info.sample_period'),\n          prop: 'samplePeriod',\n          units: [\n            { type: 'date', value: val.samplePeriodUnit },\n          ],\n        },\n        {\n          label: i18n.t('material.info.lead_time'),\n          prop: 'productionLeadTime',\n          units: [\n            { type: 'date', value: val.productionLeadTimeUnit },\n          ],\n        },\n        { label: i18n.t('material.info.specification'), prop: 'specification' },\n        {\n          label: i18n.t('material.info.thickness'),\n          prop: 'thickness',\n          units: [\n            { type: 'thicknessUnit', value: val.thicknessUnit },\n          ],\n        },\n        {\n          label: i18n.t('material.info.original_country'),\n          units: [\n            { type: 'country', value: val.materialCountryOfOrigin },\n          ],\n        },\n      ];\n    }, { deep: true, immediate: true });\n\n    const printPatternsInfoTags = computed(() => {\n      return props.material.printPatternsInfo?.map((tag: string | object) => {\n        if (typeof tag === 'string') {\n          // return { tag };\n          return tag;\n        }\n        // return tag;\n        return (tag as any).tag;\n        // }) || [];\n      }).join('、') || '';\n    });\n    const patternsTags = computed(() => {\n      return props.material.patterns?.map((tag: string | object) => {\n        if (typeof tag === 'string') {\n          // return { tag };\n          return tag;\n        }\n        // return tag;\n        return (tag as any).tag;\n        // }) || [];\n      }).join('、') || '';\n    });\n    const tagsDisplay = computed(() => {\n      return [printPatternsInfoTags.value, patternsTags.value].filter(e => e && e.length > 0).join('、');\n    });\n\n    return {\n      collapseStatus,\n      fields,\n      loading,\n\n      // printPatternsInfoTags,\n      // patternsTags,\n      tagsDisplay,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./GoodsBaseInfo.vue?vue&type=template&id=95a2fe04&scoped=true&\"\nimport script from \"./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"\nexport * from \"./GoodsBaseInfo.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./GoodsBaseInfo.vue?vue&type=style&index=0&id=95a2fe04&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95a2fe04\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail-form-field\"},[_c('div',{staticClass:\"content-box\"},[_c('label',[_vm._v(_vm._s(_vm.label)+\"：\")]),_vm._t(\"default\",[(_vm.content)?_c('span',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(_vm.content)+\" \")]):_vm._e(),_vm._l((_vm.units),function(unit,index){return [_c('UnitField',{key:unit.type,attrs:{\"type\":unit.type,\"value\":unit.value}}),(index < _vm.units.length - 1)?_c('span',{key:index,staticClass:\"unit-sep\"},[_vm._v(\" \"+_vm._s(_vm.$i18n.i18next.language === 'en' ? ' per ' : '/')+\" \")]):_vm._e()]})])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport i18n from 'i18next';\nimport { defineComponent } from '@vue/composition-api';\n\nimport UnitField from '@/views/material/info/components/UnitField.vue';\n\ninterface Unit {\n  type: string,\n  value: number | string,\n}\n\nexport default defineComponent({\n  name: 'MaterialFormFieldText',\n  components: { UnitField },\n  props: {\n    // 标签名称\n    label: {\n      type: String,\n      required: true,\n    },\n    // 内容\n    content: {\n      type: [String, Number],\n      default: '',\n    },\n    // 单位数组\n    units: {\n      type: Array as () => Unit[],\n      default: () => [],\n    },\n  },\n  setup(props) {\n    return {\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FromFieldText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FromFieldText.vue?vue&type=template&id=f41e56ee&scoped=true&\"\nimport script from \"./FromFieldText.vue?vue&type=script&lang=ts&\"\nexport * from \"./FromFieldText.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FromFieldText.vue?vue&type=style&index=0&id=f41e56ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f41e56ee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"unit-text\"},[_vm._v(_vm._s(_vm.unit))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"unit-text\">{{ unit }}</span>\n</template>\n\n<script>\nimport { defineComponent, ref, watch } from '@vue/composition-api';\nimport i18n from 'i18next';\n\nimport { getCountryList, getDictionaryByTypeCode } from '@/api/dictionary';\n\nexport default defineComponent({\n  props: {\n    // 单位的类型\n    type: {\n      type: String,\n      required: true,\n    },\n    // 单位的值\n    value: {\n      type: [Number, String],\n      // required: true,\n    },\n  },\n  setup(props, { root: { $errHandler } }) {\n    const unit = ref('');\n\n    watch(() => props.value, async () => {\n      // 处理空值和null情况\n      if (props.value) {\n        try {\n          let units;\n          let currentUnit;\n          // 国家字典的情况\n          if (props.type === 'country') {\n            units = (await getCountryList()).data;\n            currentUnit = units.find(u => +u.id === +props.value);\n            // unit.value = currentUnit ? currentUnit.usName : '';\n            unit.value = currentUnit\n              ? (i18n.language === 'en' ? (currentUnit.usName || currentUnit.name) : (currentUnit.name || currentUnit.usName))\n              : '';\n          } else {\n            units = (\n              await getDictionaryByTypeCode(props.type, i18n.language)\n            ).data;\n            currentUnit = units.find(u => +u.itemValue === +props.value);\n            unit.value = currentUnit ? currentUnit.label : '';\n          }\n        } catch (err) {\n          $errHandler(err);\n        }\n      } else {\n        unit.value = '';\n      }\n    }, {\n      immediate: true,\n    });\n\n    return { unit };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.unit-text {\n  display: inline-block;\n  line-height: 22px;;\n  vertical-align: middle;\n  white-space: normal;\n  & + .unit-text {\n    margin-left: 8px;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnitField.vue?vue&type=template&id=8f26f40a&scoped=true&\"\nimport script from \"./UnitField.vue?vue&type=script&lang=js&\"\nexport * from \"./UnitField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f26f40a\",\n  null\n  \n)\n\nexport default component.exports","import i18n from 'i18next';\n\nexport default function translateCategoryName(categoryName: string) {\n  return i18n.t(`material.material-category.${categoryName}`);\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GoodsBaseInfo.vue?vue&type=style&index=0&id=95a2fe04&lang=scss&scoped=true&\"","import { getDictByType as _getDictByType } from '@/loaders/dictionary';\nimport axios from './axios';\n\n/**\n * 根据类型获取该字典数据\n * @param {String} type 类型\n * @returns {Promise}\n */\nexport const getDictByType = async (type) => {\n  return {\n    data: await _getDictByType({ type }),\n  };\n};\n\n/**\n * 根据类型获取该字典数据\n * @param {String} typeCode\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6104\n */\nexport const getDictionaryByTypeCode = (typeCode, language) => {\n  return axios({\n    method: 'get',\n    url: '/bff-center/showCommon/getDictionaryTypeItem',\n    headers: { language },\n    params: { typeCode },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCountryList = (keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCountry',\n    params: { keyword },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} countryId 国家ID\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCityList = (countryId, keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCity',\n    params: { countryId, keyword },\n  });\n};\n\n\nexport const getOSSAuth = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSAuth',\n  });\n};\n\nexport const getOSSUrl = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSUrl',\n  });\n};\n\n// 获取国家下的城市\n\n\n/* ==================== 标签相关 ================== */\n/**\n * 新增标签\n * @param {Object} data { shareId: string, tags: string[], type: string }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6116\n */\nexport const addTags = (data) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/addTags',\n    data,\n  });\n};\n\n/**\n * 删除标签\n * @param {Array} tagIds { string[] }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6128\n */\nexport const removeTags = (tagIds) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/deleteTag',\n    data: tagIds,\n  });\n};\n"],"sourceRoot":""}