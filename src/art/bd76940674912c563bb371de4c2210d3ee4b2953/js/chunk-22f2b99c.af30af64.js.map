{"version":3,"sources":["webpack:///./src/views/model/detail/annotation/AnnotationUser.vue","webpack:///./src/views/model/detail/annotation/AnnotationUser.vue?83e5","webpack:///./src/views/model/detail/annotation/AnnotationUser.vue?937c","webpack:///./src/views/model/detail/annotation/AnnotationItem.vue?3157","webpack:///./src/views/model/detail/annotation/index.vue?5917","webpack:///./src/views/model/detail/annotation/AnnotationItem.vue?ff61","webpack:///src/views/model/detail/annotation/AnnotationItem.vue","webpack:///./src/views/model/detail/annotation/AnnotationItem.vue?dd5f","webpack:///./src/views/model/detail/annotation/AnnotationItem.vue","webpack:///src/views/model/detail/annotation/index.vue","webpack:///./src/views/model/detail/annotation/index.vue?18c8","webpack:///./src/views/model/detail/annotation/index.vue","webpack:///./src/views/model/detail/annotation/AnnotationUser.vue?30ea","webpack:///./src/assets/img/public/placeholder/placeholder-empty-notification.png","webpack:///./src/assets/img/header/default_avatar.png","webpack:///./src/views/model/detail/annotation/index.vue?acd7"],"names":["staticRenderFns","extend","props","user","type","Object","required","time","Number","functional","render","_h","parent","headImg","name","$filters","date","component","_vm","this","$createElement","_c","_self","staticClass","host","_e","_v","_s","$t","on","hideAnnotationSidebar","staticStyle","attrs","annotationVersions","_l","version","currentVersionOnly","relateId","modelId","key","vCode","tdAnnotationResponseList","annotation","id","class","active","activeId","$event","activateAnnotation","idx","scopedSlots","_u","readonly","fn","modifierInfo","stopPropagation","removeAnnotation","proxy","$emit","directives","rawName","value","expression","gmtModifyTime","_t","muted","content","hasImage","components","AnnotationUser","computed","accessoryInfo","disableDelete","Boolean","default","AnnotationItem","Scrollable","catalogId","String","workspaceId","modelName","data","versions","modelId_","filter","v","length","mounted","$root","$on","fetchAnnotationList","methods","JSON","parse","stringify","module","exports"],"mappings":"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","file":"js/chunk-22f2b99c.af30af64.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./AnnotationUser.vue?vue&type=script&lang=tsx&\"\nexport * from \"./AnnotationUser.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./AnnotationUser.vue?vue&type=style&index=0&id=3c68d870&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c68d870\",\n  null\n  \n)\n\nexport default component.exports","\nimport defaultAvatar from '@/assets/img/header/default_avatar.png';\nimport Vue from 'vue';\n\nexport default Vue.extend({\n  props: {\n    user: {\n      type: Object as () => { headImg: string, gmtModifyTime: number, name: string },\n      required: true,\n    },\n    time: {\n      type: Number,\n    },\n  },\n  functional: true,\n  render(_h, { props: { user, time }, parent }) {\n    return <div class=\"annotation-user-info\">\n      <base-image defaultImage={defaultAvatar}\n        class=\"user-avatar\" src={user.headImg} />\n      <div class=\"user\">\n        <div class=\"user-name text-one-line\">{ user.name }</div>\n        {\n          !time ? null\n            : <div class=\"user-time\">\n              { parent!.$filters.date(time, 'MM/DD/YYYY HH:mm') }\n            </div>\n        }\n      </div>\n    </div>;\n  },\n});\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationUser.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationUser.vue?vue&type=script&lang=tsx&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationItem.vue?vue&type=style&index=0&id=39b0e672&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"annotation-container\"},[(!_vm.host)?_c('div',{staticClass:\"annotation-nav\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.$t('model.detail.annotation.tags'))+\" \")]),_c('div',[_c('i',{staticClass:\"iconfont icon-delete\",on:{\"click\":_vm.hideAnnotationSidebar}})])]):_vm._e(),(_vm.annotationVersions)?_c('scrollable',{staticStyle:{\"flex\":\"1\"},attrs:{\"y\":\"\"}},[(_vm.annotationVersions.length)?_c('ul',[_vm._l((_vm.annotationVersions),function(version){return [(!_vm.currentVersionOnly || version.relateId === _vm.modelId)?_c('li',{key:version.relateId,staticClass:\"annotation-version-item\"},[_c('h3',{staticClass:\"version-title\"},[_vm._v(\" \"+_vm._s(_vm.$t('model.detail.annotation.version'))+\" \"+_vm._s(version.vCode)+\" \")]),(version.tdAnnotationResponseList.length)?_c('ul',_vm._l((version.tdAnnotationResponseList),function(annotation){return _c('li',{key:annotation.id,staticClass:\"annotation-item\",class:{active: _vm.activeId === annotation.id},on:{\"click\":function($event){return _vm.activateAnnotation(annotation, version.relateId, true)}}},[(version.relateId === _vm.modelId)?_c('span',{staticClass:\"number\"},[_vm._v(\" \"+_vm._s(annotation.idx)+\" \")]):_vm._e(),_c('AnnotationItem',{staticStyle:{\"flex\":\"1\"},attrs:{\"annotation\":annotation},scopedSlots:_vm._u([(!_vm.readonly)?{key:\"tools\",fn:function(){return [(annotation.modifierInfo.id === _vm.user.id && version.relateId === _vm.modelId)?_c('i',{staticClass:\"iconfont iconedit\",on:{\"click\":function($event){$event.stopPropagation();return _vm.activateAnnotation(annotation, version.relateId, false)}}}):_vm._e(),(annotation.modifierInfo.id === _vm.user.id)?_c('i',{staticClass:\"iconfont icon-file-delete\",on:{\"click\":function($event){$event.stopPropagation();return _vm.removeAnnotation(version.tdAnnotationResponseList, annotation, version.relateId)}}}):_vm._e()]},proxy:true}:null],null,true)})],1)}),0):_c('div',{staticClass:\"annotation-empty\"},[_c('div',{staticClass:\"annotation-empty-creation\",on:{\"click\":function($event){return _vm.$emit('creating-annotation')}}},[_c('i',{staticClass:\"iconfont iconbiaozhu-xianxing\"}),_c('span',[_vm._v(\" \"+_vm._s(_vm.$t('model.detail.annotation.create_tag'))+\" \")])])])]):_vm._e()]})],2):_c('div',{staticClass:\"version-empty-annotation\"},[_c('img',{attrs:{\"src\":require(\"@/assets/img/public/placeholder/placeholder-empty-notification.png\")}}),_c('p',{staticClass:\"placeholder-text\"},[_vm._v(\" \"+_vm._s(_vm.$t('model.detail.annotation.no_tags_found'))+\" \")])])]):_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(true),expression:\"true\"}],staticStyle:{\"flex\":\"1\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"annotation-item-container\"},[_c('div',{staticClass:\"flex-space-between\"},[_c('AnnotationUser',{attrs:{\"user\":_vm.annotation.modifierInfo,\"time\":_vm.annotation.gmtModifyTime}}),_c('div',{staticClass:\"tools\"},[_vm._t(\"tools\",null,{\"item\":_vm.annotation})],2)],1),_c('p',{staticClass:\"annotation-message scrollable-y\",class:{muted: !_vm.annotation.content}},[(_vm.hasImage)?_c('span',{staticClass:\"img\"},[_vm._v(_vm._s(_vm.$t('model.comment.img')))]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.annotation.content ? _vm.annotation.content : _vm.hasImage ? '' : _vm.$t('model.detail.annotation.no_content')))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"annotation-item-container\">\n    <div class=\"flex-space-between\">\n      <AnnotationUser :user=\"annotation.modifierInfo\" :time=\"annotation.gmtModifyTime\"/>\n      <div class=\"tools\">\n        <slot name=\"tools\" :item=\"annotation\"/>\n      </div>\n    </div>\n    <p\n      class=\"annotation-message scrollable-y\"\n      :class=\"{muted: !annotation.content}\"\n    >\n    <span class=\"img\" v-if=\"hasImage\">{{\n        $t('model.comment.img')}}</span>\n    {{\n    annotation.content ? annotation.content : hasImage ? '' : $t('model.detail.annotation.no_content')\n    }}</p>\n  </div>\n</template>\n\n<script>\nimport AnnotationUser from './AnnotationUser.vue';\n\n\nexport default {\n  components: {\n    AnnotationUser,\n  },\n  computed: {\n    /** @return { Boolean } */\n    hasImage() {\n      const { annotation } = this;\n      return annotation.accessoryInfo\n      && annotation.accessoryInfo.images\n      && annotation.accessoryInfo.images.length;\n    },\n  },\n  name: 'AnnotationItem',\n  props: {\n    annotation: {\n      type: Object,\n      required: true,\n    },\n    disableDelete: {\n      type: Boolean,\n      default: false,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.img {\n  font-weight: bold;\n  color: #222;\n  &:before {\n    content: '['\n  }\n  &:after {\n    content: ']'\n  }\n}\n.annotation-item-container {\n  &:hover .tools {\n    display: block;\n  }\n  .tools {\n    display: none;\n    /deep/ {\n      i {\n        font-size: 18px;\n        padding: 4px;\n        color: rgb(81, 81, 81);\n        cursor: pointer;\n        &:hover {\n          color: #317eff;\n        }\n      }\n    }\n  }\n\n  .annotation-message {\n    margin-top: 12px;\n    line-height: 20px;\n    max-height: 180px;\n    word-break: break-all;\n    &.muted {\n      color: #ccc;\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AnnotationItem.vue?vue&type=template&id=39b0e672&scoped=true&\"\nimport script from \"./AnnotationItem.vue?vue&type=script&lang=js&\"\nexport * from \"./AnnotationItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AnnotationItem.vue?vue&type=style&index=0&id=39b0e672&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39b0e672\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"annotation-container\">\n    <!-- 批注操作框 -->\n    <div v-if=\"!host\" class=\"annotation-nav\">\n      <p>\n        {{ $t('model.detail.annotation.tags') }}\n      </p>\n      <div>\n        <i class=\"iconfont icon-delete\" @click=\"hideAnnotationSidebar\" />\n      </div>\n    </div>\n    <!-- 批注列表内容 -->\n    <scrollable y style=\"flex: 1\" v-if=\"annotationVersions\">\n      <ul v-if=\"annotationVersions.length\">\n        <template v-for=\"version in annotationVersions\">\n          <li v-if=\"!currentVersionOnly || version.relateId === modelId\" :key=\"version.relateId\" class=\"annotation-version-item\">\n            <h3 class=\"version-title\">\n              {{ $t('model.detail.annotation.version') }} {{ version.vCode }}\n            </h3>\n            <ul v-if=\"version.tdAnnotationResponseList.length\">\n              <li\n                @click=\"activateAnnotation(annotation, version.relateId, true)\"\n                v-for=\"annotation in version.tdAnnotationResponseList\"\n                :key=\"annotation.id\"\n                class=\"annotation-item\"\n                :class=\"{active: activeId === annotation.id}\">\n                <span\n                  class=\"number\"\n                  v-if=\"version.relateId === modelId\">\n                  {{annotation.idx}}\n                </span>\n                <AnnotationItem\n                  :annotation=\"annotation\"\n                  style=\"flex: 1\">\n                  <template v-if=\"!readonly\" v-slot:tools>\n                    <i\n                      v-if=\"annotation.modifierInfo.id === user.id && version.relateId === modelId\"\n                      class=\"iconfont iconedit\"\n                      @click.stop=\"activateAnnotation(annotation, version.relateId, false)\" />\n                    <i\n                      v-if=\"annotation.modifierInfo.id === user.id\"\n                      class=\"iconfont icon-file-delete\"\n                      @click.stop=\"removeAnnotation(version.tdAnnotationResponseList, annotation, version.relateId)\" />\n                  </template>\n\n                </AnnotationItem>\n              </li>\n            </ul>\n            <div class=\"annotation-empty\" v-else>\n              <div\n                class=\"annotation-empty-creation\"\n                @click=\"$emit('creating-annotation')\">\n                <i class=\"iconfont iconbiaozhu-xianxing\" />\n                <span>\n                  {{ $t('model.detail.annotation.create_tag') }}\n                </span>\n              </div>\n            </div>\n          </li>\n\n        </template>\n      </ul>\n      <!-- 鞋模型没有任何批注时 -->\n      <div v-else class=\"version-empty-annotation\">\n        <img src=\"@/assets/img/public/placeholder/placeholder-empty-notification.png\" />\n        <p class=\"placeholder-text\">\n          {{ $t('model.detail.annotation.no_tags_found') }}\n        </p>\n      </div>\n    </scrollable>\n    <div v-else style=\"flex: 1\" v-loading=\"true\"></div>\n  </div>\n</template>\n\n<script>\n\nimport { getAnnotationList, deleteAnnotation } from '@/api/shoe';\nimport Scrollable from '@/components/Scrollable';\n\nimport { getHost } from '@/utils/exec';\nimport { getContextUser } from '@/loaders/context';\nimport AnnotationItem from './AnnotationItem';\n\nexport default {\n  name: 'AnnotationSidebar',\n  components: {\n    AnnotationItem,\n    Scrollable,\n  },\n  props: {\n    readonly: {\n      type: Boolean,\n      required: false,\n    },\n    currentVersionOnly: {\n      type: Boolean,\n      required: false,\n    },\n    catalogId: {\n      type: String,\n      required: true,\n    },\n    workspaceId: {\n      type: String,\n      required: true,\n    },\n    modelId: {\n      type: String,\n      required: true,\n    },\n    modelName: {\n      type: String,\n      required: true,\n    },\n    activeId: {\n      type: String,\n    },\n  },\n  data() {\n    return {\n      versions: null,\n      host: null,\n    };\n  },\n  computed: {\n    modelId_() {\n      return this.modelId || this.versions[0]?.relateId;\n    },\n    /** @return { any } */\n    annotationVersions() {\n      if (!this.versions) return null;\n      return this.versions.filter(v => {\n        return v.tdAnnotationResponseList.length;\n      });\n    },\n    /** @return { Item<User> } */\n    user() {\n      return getContextUser();\n    },\n  },\n  async created() {\n    this.fetchAnnotationList();\n    this.host = await getHost();\n  },\n  mounted() {\n    this.$root.$on('add-annotation', this.fetchAnnotationList);\n  },\n  methods: {\n    // 隐藏批注侧边栏\n    hideAnnotationSidebar() {\n      this.$emit('close');\n    },\n    async removeAnnotation(annotations, ann, versionId) {\n      // 删除批注列表上的批注\n      annotations.splice(annotations.findIndex(annotation => annotation.id === ann.id), 1);\n      await deleteAnnotation(ann.id, this.workspaceId, versionId, this.catalogId, this.modelName);\n      this.$emit('annotation-remove', ann);\n    },\n    activateAnnotation(annotation, modelId, readonly) {\n      if (modelId === this.modelId) {\n        this.$emit('annotation-display', {\n          annotation: JSON.parse(JSON.stringify(annotation)), modelId, readonly,\n        });\n        // this.host.actAnnotationOperation({ action: 'annotation-display', params: ann });\n      } else {\n        this.$emit('model-preview', {\n          workspaceId: this.workspaceId,\n          catalogId: this.catalogId,\n          annotation,\n          modelId,\n          readonly,\n        });\n        // eslint-disable-next-line\n        // this.host.actAnnotationOperation({ action: 'model-preview', params: modelId });\n      }\n    },\n    async fetchAnnotationList() {\n      const versions = (await getAnnotationList(\n        this.catalogId, undefined, this.workspaceId,\n      )).data;\n      versions.forEach(version => {\n        version.tdAnnotationResponseList.forEach((ann, idx) => {\n          ann.threeDimensionalInfo.id = ann.id;\n          ann.idx = version.tdAnnotationResponseList.length - idx;\n        });\n      });\n      this.$emit('load-annotations', versions);\n      this.versions = versions;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.annotation-container {\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  .annotation-nav {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 56px;\n    padding: 0 20px;\n    font-size: 16px;\n    border-bottom: 2px solid #b9bdc2;\n\n    .iconfont {\n      font-size: 28px;\n      color: #7f7f7f;\n      cursor: pointer;\n      transition: all 200ms;\n      & + .iconfont {\n        margin-left: 20px;\n      }\n    }\n    .iconpizhutianchong {\n      color: #2c71e5;\n      &:hover {\n        color: #5a97ff;\n      }\n      &:active {\n        color: #2c71e5;\n      }\n    }\n  }\n}\n\n.annotation-version-item {\n  .version-title {\n    padding: 0 16px;\n    margin-top: 15px;\n    font-size: 18px;\n    margin-bottom: 5px;\n  }\n  .annotation-item {\n    cursor: pointer;\n    padding: 20px 16px;\n    position: relative;\n    transition: all 200ms;\n    display: flex;\n    > .number {\n      margin-top: 4px;\n      font-size: 20px;\n      width: 1.5em;\n      margin-right: 16px;\n      line-height: 16px;\n      border-right: 1px #d8d8d8 solid;\n      height: 16px;\n    }\n    &:hover {\n      background-color: #edeff2;\n    }\n    &.active {\n      background-color: #e9f1ff;\n    }\n    &:after {\n      position: absolute;\n      left: 16px;\n      bottom: 0;\n      right: 16px;\n      content: \"\";\n      display: block;\n      border-bottom: 1px solid #ddd;\n    }\n  }\n}\n\n.version-empty-annotation {\n  margin-top: 50px;\n  text-align: center;\n  .placeholder-text {\n    margin-top: 30px;\n    color: #999;\n  }\n}\n.annotation-empty {\n  .annotation-empty-creation {\n    @extend %flex-center;\n    width: 220px;\n    height: 36px;\n    margin: 20px auto;\n    border: 1px solid #c1c5ca;\n    border-radius: 20px;\n    cursor: pointer;\n    transition: all 200ms;\n    &:hover {\n      color: #317eff;\n      border-color: currentColor;\n    }\n    .iconfont {\n      margin-right: 5px;\n      color: inherit;\n    }\n  }\n  .annotation-empty-text {\n    line-height: 60px;\n    color: #999;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7207bcd2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7207bcd2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7207bcd2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AnnotationUser.vue?vue&type=style&index=0&id=3c68d870&scoped=true&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/placeholder-empty-notification.708d93fa.png\";","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7207bcd2&lang=scss&scoped=true&\""],"sourceRoot":""}