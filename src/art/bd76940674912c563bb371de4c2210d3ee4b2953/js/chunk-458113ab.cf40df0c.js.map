{"version":3,"sources":["webpack:///./src/views/order-management/order-progress/index.vue?45f6","webpack:///./src/views/order-management/order-progress/OrderProgress.vue","webpack:///./src/views/order-management/order-progress/OrderProgress.vue?5504","webpack:///./src/views/order-management/order-progress/OrderProgress.vue?ca07","webpack:///./src/views/order-management/order-progress/index.vue?6c9e","webpack:///./src/views/order-management/order-progress/index.vue?c057","webpack:///./src/views/order-management/order-progress/index.vue","webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-loader.js","webpack:///./src/views/order-management/order-form/FormHeader.vue?ad72","webpack:///./src/views/order-management/order-form/FormHeader.vue?9c8e","webpack:///./src/views/order-management/order-form/FormHeader.vue?6a70","webpack:///./src/views/order-management/order-form/FormHeader.vue","webpack:///./src/views/order-management/order-progress/OrderProgress.vue?e2ed","webpack:///./src/views/order-management/order-progress/index.vue?9716","webpack:///./src/views/order-management/order-form/FormHeader.vue?44f7"],"names":["_vm","this","_h","$createElement","_c","_self","attrs","orderNo","staticClass","$route","query","staticRenderFns","type","attr1","i18n","t","attr2","steps","orderProgress","props","String","required","render","whenNull","width","height","s","demandOrders","orderInfo","titles","computedDemandOrders","length","complateCount","data","default","row","did","map","item","index","progressStatus","round","active","backgroundColor","handleChangeProgress","name","setup","demandOrdersWithProgress","axios","url","method","params","res","value","push","JSON","parse","form","progress","parsedProgress","Object","keys","p","initialValue","options","typeCode","headers","language","cOrders","dOrder","materialName","find","itemValue","materialType","label","styleName","lastNumber","forEach","demandDetail","target","templateObj","filter","findItem","st","n","i","targetIndex","indexOf","parttern","current","currentDetail","post","stringify","component","computed","components","FormHeader","OrderProgress","_interopRequireDefault","defineProperty","exports","_regenerator","_asyncToGenerator2","_defineProperty2","_compositionApi","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","source","key","getOwnPropertyDescriptors","defineProperties","defaultOptions","undefined","loadingValue","oldValue","useLoader","loader","oldWatcher","_ref","_ref$initialValue","_ref$loadingValue","r","reactive","watchSource","resultRef","ref","tmp","that","getCurrentInstance","loaderPromiseRef","$on","mark","_callee2","wrap","_context2","prev","next","watch","_ref3","_callee","_loaderPromiseRef","_context","sent","stop","_x","immediate","_ref4","_callee3","_tmp","_context3","isRef","__tmp","_x2","_default","_m","on","goBack","_v","_s","cancelText","title","$t","order","root","routeName","status","$router","go","$confirm","confirmButtonText","cancelButtonText","showClose","then","catch"],"mappings":"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","file":"js/chunk-458113ab.cf40df0c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('form-header',{attrs:{\"title\":_vm.orderNo,\"withSideBar\":true}}),_c('div',{staticClass:\"progress-container\"},[_c('OrderProgress',{attrs:{\"orderNo\":_vm.$route.query.orderNo}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render, staticRenderFns\nimport script from \"./OrderProgress.vue?vue&type=script&lang=tsx&\"\nexport * from \"./OrderProgress.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./OrderProgress.vue?vue&type=style&index=0&id=de2ba440&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"de2ba440\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent, ref, computed } from '@vue/composition-api';\nimport axios from '@/utils/axios';\nimport { Sample } from '@/components/dynamic-form/OrderSamples.vue';\nimport { Material } from '@/components/dynamic-form/OrderMaterials.vue';\nimport useLoader from '_/composables/use-loader';\nimport i18n, { i18next } from '@/i18n';\n\ntype OrderDetail = {\n  attachment: string,\n  companyId: string,\n  companyName: string,\n  creator: string,\n  creatorName: string,\n  deliveryTime: number,\n  form: string,\n  gmtCreateTime: number,\n  gmtUpdateTime: number,\n  orderNo: string,\n  orderTime: number,\n  progress?: string,\n  type: number,\n  status: string,\n};\n\ntype ItemProgress = {\n  name: string,\n  width: number,\n  progressStatus: number,\n};\n\ntype ProgressJSONItem = {\n  demandDetail: string,\n  templateObj: Array<ItemProgress>\n};\n\ntype ProgressJSON = {\n  [key: string]: ProgressJSONItem\n};\n\nconst getTitleByType = (type: number) => {\n  if (type === 1) {\n    return {\n      attr1: i18n.t('order_management.progress.collection'),\n      attr2: i18n.t('order_management.progress.type'),\n      steps: i18n.t('order_management.progress.progress'),\n    };\n  }\n  return {\n    attr1: i18n.t('order_management.progress.style_name'),\n    attr2: i18n.t('order_management.progress.last_name'),\n    steps: i18n.t('order_management.progress.progress'),\n  };\n};\n\nconst orderProgress = defineComponent({\n  props: {\n    orderNo: {\n      type: String,\n      required: true,\n    },\n  },\n  render() {\n    const whenNull = <div vLoading={true} style={{\n      width: '100%',\n      height: '300px',\n    }}></div>;\n    const s = this as InstanceType<typeof orderProgress>;\n    if (!s.demandOrders || !s.orderInfo) return whenNull;\n    const titles = getTitleByType(s.orderInfo.type);\n    return <div>\n      <header class=\"flex\" style=\"padding: 10px 0 30px 20px; position: relative;\">\n        <div class=\"count\" style=\"color: #333\">\n          <span>{s.computedDemandOrders.length}</span>\n          {i18n.t('order_management.progress.order_total')}\n        </div>\n        <div class=\"count\" style=\"color: #27C21D\">\n          <span>{s.complateCount}</span>\n          {i18n.t('order_management.progress.order_completed')}\n        </div>\n        <div class=\"count\" style=\"color: #2979FF\">\n          <span>{s.computedDemandOrders.length - s.complateCount}</span>\n          {i18n.t('order_management.progress.order_processing')}\n        </div>\n        {\n          /**\n           * <div style=\"position: absolute; right: 0; color: #999\">\n                <i></i>\n                如有任何疑问，请联系您的专属客户经理或者客服中心：Customer@4dstc.com\n              </div>\n           */\n        }\n        <div style=\"position: absolute; right: 0; top: 35px; color: #999\">\n          <i></i>\n          {i18n.t('order_management.progress.help')}\n        </div>\n      </header>\n\n      <el-table props={{ data: s.computedDemandOrders }}\n        header-cell-class-name=\"customer-header\"\n        cell-class-name=\"customer-row\">\n        <el-table-column prop='attr1' label={titles.attr1}\n          width=\"300\" show-overflow-tooltip></el-table-column>\n\n        <el-table-column prop='attr2' label={titles.attr2}\n          width=\"300\" show-overflow-tooltip></el-table-column>\n\n        <el-table-column prop='steps' label={titles.steps}\n          min-width=\"760\" scopedSlots={{\n            default({ row: { steps, did } }: { row: { steps?: ItemProgress[], did: string } }) {\n              if (!steps) return <div></div>;\n              return <div class='flex'>\n                {\n                  steps.map((item, index) => <div value={!!item.progressStatus}\n                    class={{\n                      'no-arrow': index === 0,\n                      round: index === 0 || index === steps.length - 1,\n                      active: !!item.progressStatus,\n                      'progress-btn': true,\n                    }}\n                    style={{\n                      width: `${item.width}px`,\n                      backgroundColor: item.progressStatus ? '#2878ff' : '#fff',\n                    }} onchange={\n                      () => {\n                        s.handleChangeProgress(did, item.name, steps);\n                      }\n                    }>{item.name}</div>)\n                }\n              </div>;\n            },\n          }}></el-table-column>\n\n\n      </el-table>\n    </div>;\n  },\n  setup(props) {\n    const demandOrders = ref<any[]>([]);\n    const demandOrdersWithProgress = ref<ProgressJSONItem[]>([]);\n\n    const orderInfo = useLoader(async ({ orderNo }) => {\n      const res = (await axios({\n        url: '/order/order/detail',\n        method: 'GET',\n        params: {\n          orderNo,\n        },\n      })).data as OrderDetail;\n\n      demandOrders.value.push(...JSON.parse(res.form));\n      if (res.progress) {\n        const parsedProgress = JSON.parse(res.progress);\n        demandOrdersWithProgress.value.push(...Object.keys(parsedProgress).map(\n          p => {\n            return parsedProgress[p];\n          },\n        ));\n      }\n      return res;\n    }, props, {\n      initialValue: null,\n    });\n\n    const options = useLoader(async () => {\n      const res = (await axios({\n        url: '/operating/dict/getDictionaryTypeItem',\n        method: 'get',\n        params: {\n          typeCode: 'materialType',\n        },\n        headers: {\n          language: i18next.language,\n        },\n      })).data;\n      return res;\n    }, {}, {\n      initialValue: null,\n    });\n\n    const computedDemandOrders = computed(() => {\n      let cOrders = [] as {\n        attr1: string,\n        attr2: string,\n        did?: string,\n        steps?: ItemProgress[]\n      }[];\n      if (!orderInfo.value || !demandOrders.value.length) return cOrders;\n      const { type } = orderInfo.value!;\n      if (type === 1) {\n        cOrders = (demandOrders.value as Material[]).map(dOrder => ({\n          attr1: dOrder.materialName,\n          attr2: options.value\n            ? options.value.find((item: any) => item.itemValue === dOrder.materialType)!.label\n            : dOrder.materialType,\n          did: dOrder.did,\n        }));\n      } else if (type === 2) {\n        cOrders = (demandOrders.value as Sample[]).map(dOrder => ({\n          did: dOrder.did,\n          attr1: dOrder.styleName,\n          attr2: String(dOrder.lastNumber),\n        }));\n      }\n      if (!demandOrdersWithProgress.value.length) return cOrders;\n      demandOrdersWithProgress.value.forEach((dOrder) => {\n        const { did } = (JSON.parse(dOrder.demandDetail) as { did: string });\n        const target = cOrders.find(item => item.did === did);\n        if (target) {\n          target.steps = dOrder.templateObj;\n        }\n      });\n      return cOrders;\n    });\n\n    const complateCount = computed(() => {\n      if (!computedDemandOrders.value.length) return 0;\n      return computedDemandOrders.value.filter(\n        item => item.steps && item.steps[item.steps.length - 1].progressStatus,\n      ).length;\n    });\n\n    async function handleChangeProgress(did: string, name: string, steps: ItemProgress[]) {\n      // 第一步，修改样式\n      function findItem(st: ItemProgress[], n: string) {\n        return st.find(i => i.name === n)!;\n      }\n      const target = findItem(steps, name);\n      const targetIndex = steps.indexOf(target);\n      const parttern = target.progressStatus;\n      for (let i = 0; i < targetIndex; i++) {\n        steps[i].progressStatus = 1;\n      }\n      steps[targetIndex].progressStatus = parttern === 0 ? 1 : 0;\n      for (let i = targetIndex + 1; i < steps.length; i++) {\n        steps[i].progressStatus = 0;\n      }\n\n      // 第二步，找到progress中对应的对象，覆盖并调接口保存\n      const { progress } = orderInfo.value!;\n      if (progress) {\n        const parsedProgress = JSON.parse(progress);\n        const keys = Object.keys(parsedProgress);\n        for (let i = 0; i < keys.length; i++) {\n          const current = parsedProgress[keys[i]] as ProgressJSONItem;\n          const currentDetail = JSON.parse(current.demandDetail);\n          if (currentDetail.did === did) {\n            current.templateObj = steps;\n            break;\n          }\n        }\n        axios.post('/operating/task/order/progress', {\n          orderNo: props.orderNo,\n          progress: JSON.stringify(parsedProgress),\n        });\n      }\n    }\n\n\n    return {\n      orderInfo,\n      demandOrders,\n      complateCount,\n\n      computedDemandOrders,\n      handleChangeProgress,\n    };\n  },\n});\nexport default orderProgress;\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProgress.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProgress.vue?vue&type=script&lang=tsx&\"","\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent } from '@vue/composition-api';\nimport FormHeader from '../order-form/FormHeader.vue';\nimport OrderProgress from './OrderProgress.vue';\n\nexport default defineComponent({\n  computed: {\n    orderNo() {\n      return this.$route.query.orderNo;\n    },\n  },\n  components: {\n    FormHeader,\n    OrderProgress,\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=1c313f40&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=1c313f40&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c313f40\",\n  null\n  \n)\n\nexport default component.exports","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar defaultOptions = {\n  initialValue: undefined,\n  loadingValue: function loadingValue(oldValue) {\n    return oldValue;\n  }\n};\n\nfunction useLoader(loader) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOptions,\n      _ref$initialValue = _ref.initialValue,\n      initialValue = _ref$initialValue === void 0 ? defaultOptions.initialValue : _ref$initialValue,\n      _ref$loadingValue = _ref.loadingValue,\n      loadingValue = _ref$loadingValue === void 0 ? defaultOptions.loadingValue : _ref$loadingValue;\n\n  var r = (0, _compositionApi.reactive)(params);\n\n  var watchSource = function watchSource() {\n    return _objectSpread({}, r);\n  };\n\n  var resultRef = (0, _compositionApi.ref)(initialValue);\n  var tmp = (0, _compositionApi.ref)(null);\n  var that = (0, _compositionApi.getCurrentInstance)();\n  var loaderPromiseRef = (0, _compositionApi.ref)();\n  if (!that) return;\n  that.$on('hook:created', /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            loaderPromiseRef.value = loader(watchSource());\n            (0, _compositionApi.watch)(loaderPromiseRef, /*#__PURE__*/function () {\n              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_loaderPromiseRef) {\n                return _regenerator.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        resultRef.value = loadingValue(resultRef.value);\n                        _context.next = 3;\n                        return _loaderPromiseRef;\n\n                      case 3:\n                        tmp.value = _context.sent;\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), {\n              immediate: true\n            });\n            _context2.next = 4;\n            return loaderPromiseRef.value;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })));\n  var oldWatcher;\n  (0, _compositionApi.watch)(watchSource, function (s) {\n    if (oldWatcher) {\n      oldWatcher();\n    }\n\n    loaderPromiseRef.value = loader(s);\n  });\n  (0, _compositionApi.watch)(tmp, /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(_tmp) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if ((0, _compositionApi.isRef)(_tmp)) {\n                oldWatcher = (0, _compositionApi.watch)(_tmp, function (__tmp) {\n                  resultRef.value = __tmp;\n                }, {\n                  immediate: true\n                });\n              } else {\n                resultRef.value = _tmp;\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }()); // eslint-disable-next-line consistent-return\n\n  return resultRef;\n}\n\nvar _default = useLoader;\nexports.default = _default;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-start form-header\"},[_c('div',{staticClass:\"left-part\"},[_vm._m(0),_c('span',{staticClass:\"cursor-pointer\",on:{\"click\":_vm.goBack}},[_vm._v(_vm._s(_vm.cancelText))]),_c('span',[_vm._v(\"|\")]),_c('span',[_vm._v(_vm._s(_vm.title ? _vm.title : _vm.$t('order_management.form.create_order')))])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"cursor-pointer\"},[_c('i',{staticClass:\"el-icon-arrow-left\"})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, onMounted, ref } from '@vue/composition-api';\nimport i18n from 'i18next';\n\nexport default defineComponent({\n  props: {\n    cancelText: {\n      type: String,\n      default: i18n.t('file-list.back'),\n    },\n    title: {\n      type: String,\n      default: i18n.t('order_management.form.create_order'),\n    },\n    order: {\n      type: Object,\n    },\n  },\n  setup(props, { root }) {\n    const routeName = ref<string | null | undefined>('');\n    onMounted(() => {\n      routeName.value = root.$route.name;\n    });\n    const goBack = () => {\n      if (routeName.value === 'orderProgress') {\n        root.$router.go(-1);\n        return;\n      }\n      if (props.order && props.order.status && props.order.status === 6) {\n        root.$router.go(-1);\n        return;\n      }\n      if (root.$route.query.orderNo) {\n        root.$router.go(-1);\n        return;\n      }\n      root.$confirm(i18n.t('order_management.cancel_confirm.desc'),\n        i18n.t('order_management.cancel_confirm.title'), {\n          confirmButtonText: i18n.t('order_management.delete_confirm.confirm'),\n          cancelButtonText: i18n.t('order_management.delete_confirm.cancel'),\n          showClose: false,\n        }).then(() => {\n        root.$router.go(-1);\n      }).catch(() => {});\n    };\n    return {\n      goBack,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormHeader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormHeader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./FormHeader.vue?vue&type=template&id=a29546fa&scoped=true&\"\nimport script from \"./FormHeader.vue?vue&type=script&lang=ts&\"\nexport * from \"./FormHeader.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./FormHeader.vue?vue&type=style&index=0&id=a29546fa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a29546fa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderProgress.vue?vue&type=style&index=0&id=de2ba440&scoped=true&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=1c313f40&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormHeader.vue?vue&type=style&index=0&id=a29546fa&lang=scss&scoped=true&\""],"sourceRoot":""}