{"version":3,"sources":["webpack:///./src/components/Tree.vue?e5e4","webpack:///./src/views/supplier-backend/statistics/index.vue?3a90","webpack:///./src/components/LazyImage.vue?b46f","webpack:///src/components/LazyImage.vue","webpack:///./src/components/LazyImage.vue?1707","webpack:///./src/components/LazyImage.vue","webpack:///./src/views/supplier-backend/statistics/index.vue?0376","webpack:///./src/views/supplier-backend/statistics/index.vue?a1e4","webpack:///./src/views/supplier-backend/statistics/index.vue","webpack:///./src/components/Tree.vue?12ca","webpack:///src/components/Tree.vue","webpack:///./src/components/Tree.vue?2284","webpack:///./src/components/Tree.vue","webpack:///./src/views/supplier-backend/statistics/index.vue?52e8","webpack:///./src/components/LazyImage.vue?201a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","nativeOn","$event","preventDefault","search","$t","model","value","filters","callback","$$v","$set","expression","loading","on","_v","_s","searchText","treeData","getChildren","isCategoryExpandable","opened","scopedSlots","_u","key","fn","ref","data","class","selectedTreeNode","isRootNode","clickTreeNode","name","columns","pageKey","sizeKey","currentSize","loaded","row","getCategory","category","imgJson","flat","staticRenderFns","_t","src","undefined","thumb_","style","defalutLoadingBackground","_e","slot","_g","_b","alignCenter","clickHandler","$attrs","$listeners","backgroundImage","defaultImage","entries","forEach","entry","intersectionRatio","vm","root","rootMargin","threshold","NONE","CONTAIN","COVER","FILL","SCALE_DOWN","mixins","inheritAttrs","props","imgClass","String","url","default","fit","type","lazy","Boolean","makeThumb","thumb","pThumb_","url_","imageWidth","imageHeight","computed","imageStyle","$isServer","isSupportObjectFit","ObjectFit","mounted","$watch","immediate","beforeDestroy","removeLazyLoadListener","methods","getThumb","width","containerWidth","height","containerHeight","handleLazyLoad","show","addLazyLoadListener","observeVm","has","$el","set","io","observe","unobserve","delete","getImageStyle","isSmaller","vertical","$emit","component","fetchChildCategory","params","axios","fetchMaterialName","ids","method","components","HTable","Tree","LazyImage","setup","refs","state","emit","id","subCount","children","title","i18n","t","keyword","categoryId","categoryObj","categoryPath","categoryArr","split","map","item","join","node","isLoading","table","load","length","parentId","treeNode","init","rootNode","JSON","parse","stringify","rows","records","categoryIds","isHidden","isRoot","isDragging","isOpened","isDroppable","insertIndex","isDraggable","target","currentTarget","handleDragStart","handleDragOver","handleDragEnd","valueKey","pendingChildren","stopPropagation","toggle","handleContextmenu","dragenter","handleDragEnter","dragleave","handleDragLeave","drop","handleDrop","labelKey","scopedData","loadedChildren","directives","rawName","_l","i","openedItems","hidden","draggable","droppable","expandable","draggingData","indexs","concat","nodes","updateDraggingData","v","e","Object","keys","$scopedSlots","scope","other","isShowOther","handleOtherContextmenu","loadedVisibleChildrenLength","Function","showOther","Array","ancestors","getOpenedItems","innerOpened","isExpandable","parent","index","s","includes","filter","isArray","push","splice","othercontextmenu","ev","contextmenu","dataTransfer","dropEffect","_enterElement","clearOpenTimeout","setOpenTimeout","_openTimeout","setTimeout","clearTimeout","slice","watch"],"mappings":"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","file":"js/chunk-10078156.c86210e6.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=style&index=0&id=c5ece6ca&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"supplier-backend__statistics\"},[_c('el-form',{attrs:{\"inline\":\"\",\"size\":\"small\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.search($event)}}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":_vm.$t(\n            'supplier-backend.count-statistics.filters_placeholer.materialName'\n          ),\"clearable\":\"\"},model:{value:(_vm.filters.keyword),callback:function ($$v) {_vm.$set(_vm.filters, \"keyword\", $$v)},expression:\"filters.keyword\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.search}},[_vm._v(_vm._s(_vm.searchText))])],1)],1),_c('div',{staticClass:\"flex\"},[_c('el-card',{staticClass:\"tree-card\"},[_c('tree',{staticClass:\"supplier-backend__statistics-tree\",attrs:{\"data\":_vm.treeData,\"load\":_vm.getChildren,\"expandable\":_vm.isCategoryExpandable,\"opened\":_vm.opened},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n          var data = ref.data;\nreturn [_c('div',{staticClass:\"tree-item\",class:{\n              'tree-selected': data === _vm.selectedTreeNode,\n              'not-root': !_vm.isRootNode(data),\n            },on:{\"click\":function($event){return _vm.clickTreeNode(data)}}},[_vm._v(\" \"+_vm._s(data.name)+\" \")])]}}])})],1),_c('el-card',{staticClass:\"table-card\"},[_c('HTable',{ref:\"table\",attrs:{\"url\":\"mall/mall/category/categoryStatisticsCompanyIdByPage\",\"fetchType\":\"post\",\"params\":_vm.filters,\"columns\":_vm.columns,\"page\":{ pageKey: 'cursor', sizeKey: 'limit', currentSize: 20 },\"show-row-id\":\"\",\"initSearch\":false},on:{\"loaded\":_vm.loaded},scopedSlots:_vm._u([{key:\"category\",fn:function(ref){\n            var row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(_vm.getCategory(row.category))+\" \")]}},{key:\"imgJson\",fn:function(ref){\n            var row = ref.row;\nreturn [_c('LazyImage',{staticClass:\"material-image\",attrs:{\"src\":(row.imgJson && row.imgJson.flat) || '',\"lazy\":false,\"fit\":\"contain\"}})]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"el-image\"},[_vm._t(\"default\"),(!_vm.src)?_vm._t(\"default\",[_c('div',{staticClass:\"img-default\",style:({backgroundImage: (\"url('\" + _vm.defaultImage + \"')\") })})]):(_vm.thumb_ === undefined)?_vm._t(\"placeholder\",[(_vm.loading)?_c('div',{staticClass:\"img-loading\",style:({ 'background-color': _vm.defalutLoadingBackground })}):_vm._e()]):(_vm.thumb_ === null)?_vm._t(\"error\",[_c('div',{staticClass:\"img-error\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"iconfont icon-img-load-error\"})])]):_c('img',_vm._g(_vm._b({staticClass:\"el-image__inner\",class:{ 'el-image__inner--center': _vm.alignCenter },style:(_vm.imageStyle),attrs:{\"data-thumb\":typeof _vm.thumb_,\"data-src\":_vm.src,\"src\":_vm.thumb_},on:{\"click\":_vm.clickHandler}},'img',_vm.$attrs,false),_vm.$listeners))],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"el-image\">\n    <slot></slot>\n    <slot v-if=\"!src\">\n      <div class=\"img-default\" :style=\"{backgroundImage: `url('${defaultImage}')` }\"></div>\n    </slot>\n    <slot v-else-if=\"thumb_ === undefined\" name=\"placeholder\">\n      <div class=\"img-loading\" v-if=\"loading\" :style=\"{ 'background-color': defalutLoadingBackground }\">\n        <!-- <i class=\"el-icon-loading\"></i> -->\n      </div>\n    </slot>\n    <slot v-else-if=\"thumb_ === null\" name=\"error\">\n      <div class=\"img-error\" slot=\"error\">\n        <i class=\"iconfont icon-img-load-error\"></i>\n      </div>\n    </slot>\n    <img\n      v-else\n      class=\"el-image__inner\"\n      v-bind=\"$attrs\"\n      v-on=\"$listeners\"\n      :data-thumb=\"typeof thumb_\"\n      :data-src=\"src\"\n      @click=\"clickHandler\"\n      :src=\"thumb_\"\n      :style=\"imageStyle\"\n      :class=\"{ 'el-image__inner--center': alignCenter }\" />\n  </div>\n</template>\n\n<script>\n\nimport 'intersection-observer';\nimport Locale from 'element-ui/lib/mixins/locale';\nimport { signUrl, isOssUrl, isNeedSignOssUrl } from '@/utils/oss/utils';\nimport loadImage from '_/load-image';\nimport envs from '@/utils/envs';\nimport filterThumb from '@/filters/thumb';\n\nconst useStyle = false;\n\nconst styles = [\n  { size: 64, style: 'xs' },\n  { size: 128, style: 's' },\n  { size: 256, style: 'm' },\n  { size: 512, style: 'l' },\n  { size: 1024, style: 'xl' },\n];\n\nconst observeVm = new WeakMap();\nconst io = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    if (entry.intersectionRatio > 0) {\n      const vm = observeVm.get(entry.target);\n      vm.entry = true;\n    }\n  });\n}, {\n  root: null,\n  rootMargin: '0px',\n  threshold: 0.5,\n});\n\nconst isSupportObjectFit = () => document.documentElement.style.objectFit !== undefined;\nconst ObjectFit = {\n  NONE: 'none',\n  CONTAIN: 'contain',\n  COVER: 'cover',\n  FILL: 'fill',\n  SCALE_DOWN: 'scale-down',\n};\nexport default {\n  mixins: [Locale],\n  inheritAttrs: false,\n  props: {\n    imgClass: String,\n    url: {\n      default: () => function url() {\n        return this.src;\n      },\n    },\n    src: String,\n    fit: {\n      type: String,\n      default: 'fill',\n    },\n    lazy: {\n      type: Boolean,\n      default: true,\n    },\n    defaultImage: {\n      type: String,\n      default: require('@/assets/img/public/default-image.png'),\n    },\n    defalutLoadingBackground: {\n      type: String,\n      default: '#f7f7f7',\n    },\n    makeThumb: {\n      // 制作缩略图\n      default: () => async (src, options) => {\n        let thumbOptions = { ...options, mode: options.fit === 'scale-down' ? 'fit' : options.fit };\n        if (useStyle) { // 使用预设缩略图规格\n          const size = Math.max(options.width, options.height);\n          const matchStyle = styles.find(item => item.size > size) ?? styles[styles.length - 1];\n          thumbOptions = { style: `${matchStyle.style}_${options.mode}` };\n        }\n        // 返回配置处理后的oss/管道路径\n        let result = (!options.width || !options.height) ? src : filterThumb(src, thumbOptions);\n        if (!isOssUrl(src)) {\n          return result;\n        }\n        if (envs.VUE_APP_OSS_SIGN && isNeedSignOssUrl(result)) {\n          result = await signUrl(result);\n        }\n        return result;\n      },\n\n    },\n    thumb: {\n      default: true,\n    },\n  },\n  data() {\n    return {\n      entry: false,\n      pThumb_: undefined,\n      thumb_: undefined,\n      url_: undefined,\n      loading: false,\n      imageWidth: 0,\n      imageHeight: 0,\n    };\n  },\n  computed: {\n    /** @return {any} */\n    imageStyle() {\n      const { fit } = this;\n      if (!this.$isServer && fit) {\n        return isSupportObjectFit()\n          ? { 'object-fit': fit }\n          : this.getImageStyle(fit);\n      }\n      return {};\n    },\n    /** @return {any} */\n    alignCenter() {\n      return !this.$isServer && !isSupportObjectFit() && this.fit !== ObjectFit.FILL;\n    },\n  },\n  mounted() {\n    this.$watch('lazy', (lazy) => {\n      if (lazy) {\n        this.addLazyLoadListener();\n      } else {\n        this.entry = true;\n      }\n    }, {\n      immediate: true,\n    });\n    this.$watch(() => ({ src: this.src, entry: this.entry }), async ({ src, entry }) => {\n      if (src && entry) {\n        this.loadImage();\n      }\n    }, {\n      immediate: true,\n    });\n  },\n  beforeDestroy() {\n    if (this.lazy) {\n      this.removeLazyLoadListener();\n    }\n  },\n  methods: {\n    // 获取容器长宽，制作缩略图url\n    getThumb() {\n      let { thumb } = this;\n      if (typeof thumb === 'string') { return thumb; }\n      if (thumb === true) {\n        const {\n          clientWidth: containerWidth,\n          clientHeight: containerHeight,\n        } = this.$el;\n        thumb = {\n          width: containerWidth,\n          height: containerHeight,\n          fit: this.fit,\n        };\n      }\n\n      return this.makeThumb(this.src, thumb);\n    },\n    async loadImage() {\n      // 服务端渲染\n      if (this.$isServer) return;\n      // reset status\n      this.thumb_ = undefined;\n      try {\n        this.loading = true;\n        const thumb = await this.getThumb();\n        const img = await loadImage(thumb);\n        this.loading = false;\n        this.imageWidth = img.width;\n        this.imageHeight = img.height;\n        this.thumb_ = thumb;\n      } catch (e) {\n        this.thumb_ = null;\n        console.error(e);\n        this.$emit('error', e);\n      }\n    },\n    handleLazyLoad() {\n      this.show = true;\n    },\n    addLazyLoadListener() {\n      if (!observeVm.has(this.$el)) {\n        observeVm.set(this.$el, this);\n        io.observe(this.$el);\n      }\n    },\n    removeLazyLoadListener() {\n      if (observeVm.has(this.$el)) {\n        io.unobserve(this.$el);\n        observeVm.delete(this.$el);\n      }\n    },\n    /**\n     * simulate object-fit behavior to compatible with IE11\n     * and other browsers which not support object-fit\n     */\n    getImageStyle(fit) {\n      const { imageWidth, imageHeight } = this;\n      const {\n        clientWidth: containerWidth,\n        clientHeight: containerHeight,\n      } = this.$el;\n      if (!imageWidth || !imageHeight || !containerWidth || !containerHeight) return {};\n      const vertical = imageWidth / imageHeight < 1;\n      if (fit === ObjectFit.SCALE_DOWN) {\n        const isSmaller = imageWidth < containerWidth && imageHeight < containerHeight;\n        fit = isSmaller ? ObjectFit.NONE : ObjectFit.CONTAIN;\n      }\n      switch (fit) {\n        case ObjectFit.NONE:\n          return { width: 'auto', height: 'auto' };\n        case ObjectFit.CONTAIN:\n          return vertical ? { width: 'auto' } : { height: 'auto' };\n        case ObjectFit.COVER:\n          return vertical ? { height: 'auto' } : { width: 'auto' };\n        default:\n          return {};\n      }\n    },\n    clickHandler() {\n      this.$emit('click');\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.el-image {\n  width: 100%;\n  height: 100%;\n  color: #909399;\n  border-radius: 6px;\n}\n.img-default {\n  background-position: center center;\n  background-size: contain;\n  background-repeat: no-repeat;\n}\n\n.img-default,\n.img-error,\n.img-loading {\n  font-size: 150%;\n  background-color: #f7f7f7;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  color: inherit;\n  i {\n    font-size: inherit;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LazyImage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LazyImage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LazyImage.vue?vue&type=template&id=405a84fa&scoped=true&\"\nimport script from \"./LazyImage.vue?vue&type=script&lang=js&\"\nexport * from \"./LazyImage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LazyImage.vue?vue&type=style&index=0&id=405a84fa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"405a84fa\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, onMounted,\n} from '@vue/composition-api';\nimport Tree from '@/components/Tree.vue';\nimport Scrollable from '@/components/Scrollable.vue';\nimport LazyImage from '@/components/LazyImage.vue';\nimport { i18n } from '@/i18n';\nimport axios from '@/utils/axios';\nimport delay from '_/delay';\nimport HTable from '../components/HTable/index.vue';\nimport { i18n as htableI18n } from '../components/HTable/i18n';\n\ntype TreeNode = {\n  id: string,\n  name:string,\n  subCount:number,\n  children?:TreeNode[]\n};\n\ntype Obj = {\n  [key:string]:any\n};\n\nconst fetchChildCategory = async (params:{[any:string]:any}) => {\n  return (await axios({\n    url: '/show/category/list',\n    params,\n  })).data as TreeNode[] || [];\n};\n\nconst fetchMaterialName = async (ids: string[] | null) => {\n  if (!ids) return {};\n  return (await axios({\n    method: 'post',\n    url: '/show/category/name',\n    data: {\n      ids,\n    },\n  })).data;\n};\n\nexport default defineComponent({\n  name: 'supplier-backend-statistics',\n  components: { HTable, Tree, LazyImage },\n  props: {},\n  setup(props, { refs, emit, root }) {\n    const state = reactive({\n      treeData: {\n        id: '-1',\n        name: '根节点',\n        subCount: 1,\n        children: [] as TreeNode[],\n\n      },\n      selectedTreeNode: {} as TreeNode,\n      opened: [] as TreeNode[],\n      columns: [{\n        key: 'category',\n        title: i18n.t('supplier-backend.count-statistics.columns.type'),\n      }, {\n        key: 'imgJson',\n        title: i18n.t('supplier-backend.count-statistics.columns.image'),\n      }, {\n        key: 'materialName',\n        title: i18n.t('supplier-backend.count-statistics.columns.name'),\n      }, {\n        key: 'materialCollect',\n        title: i18n.t('supplier-backend.count-statistics.columns.number'),\n      }],\n      filters: {\n        keyword: '',\n        categoryId: '',\n      },\n      searchText: htableI18n.t('search'),\n      categoryObj: {} as Obj,\n      loading: false,\n    });\n    const getCategory = (categoryId:string) => {\n      const categoryPath:string = state.categoryObj[categoryId] || '';\n      const categoryArr = categoryPath.split('/').map(item => i18n.t(`material.material-category.${item}`) || '--');\n      return categoryArr.join('/');\n    };\n    const isRootNode = (node:TreeNode) => node.id === '-1';\n    const loading = (isLoading:boolean) => {\n      refs.table.loading = isLoading;\n      state.loading = isLoading;\n    };\n    const search = async () => {\n      try {\n        loading(true);\n        await refs.table.load();\n      } finally {\n        loading(false);\n      }\n    };\n    const clickTreeNode = (selectedTreeNode:TreeNode) => {\n      if (!selectedTreeNode.id || isRootNode(selectedTreeNode)) return;\n      state.selectedTreeNode = selectedTreeNode;\n      state.filters.categoryId = selectedTreeNode.id;\n      search();\n    };\n    const isCategoryExpandable = (item:TreeNode) => {\n      return item.subCount > 0;\n    };\n\n    const getChildren = async (item:TreeNode) => {\n      let {\n        children, id,\n      } = item;\n      if (!children || !children.length) {\n        if (isCategoryExpandable(item)) {\n          children = (await fetchChildCategory({ parentId: id }))\n            .map(treeNode => ({ ...treeNode, name: i18n.t(`material.material-category.${treeNode.name}`), children: [] }));\n        } else {\n          children = [];\n        }\n      }\n      return children!;\n    };\n\n    const init = async () => {\n      const rootNode = JSON.parse(JSON.stringify(state.treeData));\n      rootNode.children = await getChildren(rootNode);\n      clickTreeNode(rootNode.children?.[0] || {});\n    };\n\n    const loaded = async (data:Obj) => {\n      try {\n        loading(true);\n        const rows:Obj[] = data.records;\n        const categoryIds = rows.map(row => row.category);\n        state.categoryObj = (await fetchMaterialName(categoryIds)) || {};\n      } finally {\n        loading(false);\n      }\n    };\n\n    onMounted(() => {\n      init();\n    });\n\n\n    return {\n      ...toRefs(state),\n      search,\n      clickTreeNode,\n      getChildren,\n      isCategoryExpandable,\n      loaded,\n      isRootNode,\n      getCategory,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=c01b2546&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=c01b2546&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c01b2546\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.isHidden)?_c('div',{class:['tree', 'host', {\n    'is-root': _vm.isRoot,\n    'is-dragging': _vm.isDragging,\n    'is-opened': _vm.isOpened,\n    'is-droppable': _vm.isDroppable,\n  }, typeof _vm.insertIndex === 'number' ? \"is-dragover\" : ''],attrs:{\"draggable\":_vm.isDraggable,\"data-is-droppable\":_vm.isDroppable},on:{\"dragstart\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.handleDragStart($event)},\"dragover\":function($event){$event.preventDefault();return _vm.handleDragOver($event)},\"dragend\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.handleDragEnd($event)}}},[(!_vm.isRoot && _vm.data[_vm.valueKey])?_c('div',{staticClass:\"indent\"},[(_vm.pendingChildren[_vm.data[_vm.valueKey]])?_c('i',{staticClass:\"loading el-icon-loading\"}):(_vm.isExpandable)?_c('i',{staticClass:\"arrow el-icon-arrow-right\",on:{\"click\":function($event){$event.stopPropagation();return _vm.toggle(_vm.data)}}}):_vm._e(),_c('i',{staticClass:\"indent-line\"})]):_vm._e(),_c('div',{staticClass:\"content\"},[(!_vm.isRoot && _vm.data[_vm.valueKey])?_c('div',_vm._g({staticClass:\"item-wrapper\",on:{\"contextmenu\":function($event){$event.stopPropagation();return _vm.handleContextmenu($event)}}},_vm.isDroppable ? {\n        dragenter: _vm.handleDragEnter,\n        dragleave: _vm.handleDragLeave,\n        drop: _vm.handleDrop\n      } : {}),[_vm._t(\"default\",[_c('div',{staticClass:\"item\"},[_vm._v(\" \"+_vm._s(_vm.data[_vm.labelKey])+\" \")])],null,_vm.scopedData)],2):_vm._e(),(_vm.loadedChildren[_vm.data[_vm.valueKey]])?_c('el-collapse-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.innerOpened),expression:\"innerOpened\"}],staticClass:\"sublist-wrapper\"},[_c('transition-group',{staticClass:\"sublist\",attrs:{\"name\":\"list\",\"tag\":\"div\"}},_vm._l((_vm.loadedChildren[_vm.data[_vm.valueKey]]),function(item,i){return _c('div',{key:item[_vm.valueKey] || i,staticClass:\"child\"},[_c('tree',{attrs:{\"opened\":_vm.openedItems,\"load\":_vm.load,\"hidden\":_vm.hidden,\"draggable\":_vm.draggable,\"droppable\":_vm.droppable,\"expandable\":_vm.expandable,\"label-key\":_vm.labelKey,\"dragging-data\":_vm.draggingData,\"value-key\":_vm.valueKey,\"loadedChildren\":_vm.loadedChildren,\"pendingChildren\":_vm.pendingChildren,\"indexs\":_vm.indexs.concat( [i]),\"ancestors\":_vm.nodes,\"data\":item},on:{\"update:draggingData\":_vm.updateDraggingData,\"drop\":function (v) { return _vm.$emit('drop', v); },\"contextmenu\":function (e, v) { return _vm.$emit('contextmenu', e, v); }},scopedSlots:_vm._u([_vm._l((Object.keys(_vm.$scopedSlots)),function(slot){return {key:slot,fn:function(scope){return [_vm._t(slot,null,null,scope)]}}})],null,true)}),_c('div',_vm._g({staticClass:\"hr before\",class:{'active': _vm.insertIndex === i }},{\n                dragenter: function (e) { return _vm.handleDragEnter(e, i); },\n                dragleave: _vm.handleDragLeave,\n                drop: function (e) { return _vm.handleDrop(e, i); }\n              }),[_c('span')]),_c('div',_vm._g({staticClass:\"hr after\",class:{'active': _vm.insertIndex === i + 1 }},{\n                dragenter: function (e) { return _vm.handleDragEnter(e, i + 1); },\n                dragleave: _vm.handleDragLeave,\n                drop: function (e) { return _vm.handleDrop(e, i + 1); }\n              }),[_c('span')])],1)}),0),(_vm.$scopedSlots.other && _vm.isShowOther)?_c('div',{staticClass:\"other\",attrs:{\"draggable\":\"true\"},on:{\"contextmenu\":function($event){$event.stopPropagation();return _vm.handleOtherContextmenu($event)},\"dragstart\":function($event){$event.preventDefault();}}},[_c('div',{staticClass:\"host\"},[_c('div',{staticClass:\"indent\"},[_c('div',{staticClass:\"indent-line\"})]),_c('div',{staticClass:\"content\"},[_vm._t(\"other\",null,null,_vm.scopedData)],2)])]):(!_vm.loadedVisibleChildrenLength)?_vm._t(\"empty\"):_vm._e()],2)]):_vm._e()],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :draggable=\"isDraggable\"\n    v-if=\"!isHidden\"\n    :data-is-droppable=\"isDroppable\"\n    :class=\"['tree', 'host', {\n      'is-root': isRoot,\n      'is-dragging': isDragging,\n      'is-opened': isOpened,\n      'is-droppable': isDroppable,\n    }, typeof insertIndex === 'number' ? `is-dragover` : '']\"\n    @dragstart.self=\"handleDragStart\"\n    @dragover.prevent=\"handleDragOver\"\n    @dragend.self=\"handleDragEnd\">\n    <div class=\"indent\" v-if=\"!isRoot && data[valueKey]\">\n      <i class=\"loading el-icon-loading\" v-if=\"pendingChildren[data[valueKey]]\" />\n      <i\n        v-else-if=\"isExpandable\"\n        class=\"arrow el-icon-arrow-right\"\n        @click.stop=\"toggle(data)\"></i>\n      <i class=\"indent-line\"></i>\n    </div>\n    <div class=\"content\">\n      <div\n        class=\"item-wrapper\"\n        v-if=\"!isRoot && data[valueKey]\"\n        v-on=\"isDroppable ? {\n          dragenter: handleDragEnter,\n          dragleave: handleDragLeave,\n          drop: handleDrop\n        } : {}\"\n        @contextmenu.stop=\"handleContextmenu($event)\">\n        <!--\n          @slot 默认的slot, 传递了一系列的scopedData，请自行查看\n        -->\n        <slot v-bind=\"scopedData\">\n          <div class=\"item\">\n            {{data[labelKey]}}\n          </div>\n        </slot>\n      </div>\n      <el-collapse-transition\n        v-if=\"loadedChildren[data[valueKey]]\">\n        <div class=\"sublist-wrapper\" v-show=\"innerOpened\">\n          <transition-group name=\"list\" tag=\"div\" class=\"sublist\">\n            <div class=\"child\"\n              :key=\"item[valueKey] || i\"\n              v-for=\"(item, i) in loadedChildren[data[valueKey]]\">\n              <tree\n                :opened=\"openedItems\"\n                :load=\"load\"\n                :hidden=\"hidden\"\n                :draggable=\"draggable\"\n                :droppable=\"droppable\"\n                :expandable=\"expandable\"\n                :label-key=\"labelKey\"\n                :dragging-data=\"draggingData\"\n                :value-key=\"valueKey\"\n                :loadedChildren=\"loadedChildren\"\n                :pendingChildren=\"pendingChildren\"\n                @update:draggingData=\"updateDraggingData\"\n                @drop=\"(v) => $emit('drop', v)\"\n                @contextmenu=\"(e, v) => $emit('contextmenu', e, v)\"\n                :indexs=\"[...indexs, i]\"\n                :ancestors=\"nodes\"\n                :data=\"item\">\n                <template v-for=\"slot in Object.keys($scopedSlots)\" v-slot:[slot]=\"scope\">\n                  <slot :name=\"slot\" v-bind=\"scope\" />\n                </template>\n              </tree>\n              <div\n                class=\"hr before\"\n                :class=\"{'active': insertIndex === i }\"\n                v-on=\"{\n                  dragenter: (e) => handleDragEnter(e, i),\n                  dragleave: handleDragLeave,\n                  drop: (e) => handleDrop(e, i)\n                }\"><span /></div>\n              <div class=\"hr after\"\n                :class=\"{'active': insertIndex === i + 1 }\"\n                v-on=\"{\n                  dragenter: (e) => handleDragEnter(e, i + 1),\n                  dragleave: handleDragLeave,\n                  drop: (e) => handleDrop(e, i + 1)\n                }\"><span /></div>\n            </div>\n\n          </transition-group>\n\n          <div class=\"other\"\n            v-if=\"$scopedSlots.other && isShowOther\"\n            @contextmenu.stop=\"handleOtherContextmenu\"\n            @dragstart.prevent draggable=\"true\">\n            <div class=\"host\">\n              <div class=\"indent\">\n                <div class=\"indent-line\" />\n              </div>\n              <div class=\"content\">\n                <!-- @slot 其他slot，用于显示除了树之外的内容 -->\n                <slot name=\"other\" v-bind=\"scopedData\" />\n              </div>\n            </div>\n          </div>\n          <!-- @slot 空的slot，如果没有子项，显示的slot -->\n          <slot name=\"empty\" v-else-if=\"!loadedVisibleChildrenLength\" />\n        </div>\n      </el-collapse-transition>\n\n    </div>\n  </div>\n</template>\n<script>\n\nimport delay from '_/delay';\n\n/**\n * 这个组件用于显示一个树状结构，包含拖动，右键等功能\n *\n * @template N\n */\n\nexport default {\n  name: 'Tree',\n  props: {\n    /**\n     * 树的根节点数据，一个对象\n     * @type {object}\n     */\n    data: {\n      type: Object,\n    },\n    /**\n     * 树是否可以释放，布尔值或者传递一个返回布尔值的function，参数为释放的节点\n     * @type {number | string}\n     */\n    droppable: {\n      type: [Boolean, Function],\n      default: false,\n    },\n    /**\n     * 树是否可以拖动，布尔值或者传递一个返回布尔值的function，参数为拖动的节点\n     */\n    draggable: {\n      type: [Boolean, Function],\n      default: false,\n    },\n    /**\n     * 一个加载子节点的function\n     * @type { <T>(item: T) => Promise<T[]> | T}\n     */\n    load: {\n      type: Function,\n      default: async function load(item) {\n        await delay(500);\n        return item.children;\n      },\n    },\n    /**\n     * 树是否隐藏，传递布尔值，或者一个返回布尔值的function，参数为需要判断隐藏的节点\n     */\n    hidden: {\n      type: [Boolean, Function],\n      default: () => function hidden(item) {\n        return item.hidden;\n      },\n    },\n    /**\n     * 树是否显示其他，传递布尔值，或者一个返回布尔值的function，参数为需要判断是否显示其他的节点\n     */\n    showOther: {\n      type: [Boolean, Function],\n      default: () => function showOther() {\n        return false;\n      },\n    },\n    /**\n     * 树是否可展开，传递布尔值，或者一个返回布尔值的function，参数为需要判断是否可展开的节点\n     */\n    expandable: {\n      type: [Boolean, Function],\n      default: () => function checkChildrenExistence(item) {\n        return item.children && item.children.length;\n      },\n    },\n    /**\n     * 正在拖动的项目的数据，需要一个对象，并且有一个data的字段为item，用于外部修改内部的拖动内容\n     */\n    draggingData: {\n      default: null,\n    },\n    /**\n     * 树是否可以展开，传递布尔值或者一个打开的items的数组\n     */\n    opened: {\n      default: () => [],\n    },\n    /**\n     * 树状用于显示内容的key，默认为label，如果传递了default slot，则需要自定义显示的内容\n     */\n    labelKey: {\n      default: 'label',\n    },\n    /**\n     * 用于缓存一些内部数据用的参数，需要传递节点的id的key，默认为\"id\"\n     */\n    valueKey: {\n      default: 'id',\n    },\n    /**\n     * @ignore\n     */\n    // 这两个内部使用\n    indexs: {\n      type: Array,\n      default: () => [],\n    },\n    /**\n     * @ignore\n     */\n    ancestors: {\n      type: Array,\n      default: () => [],\n    },\n\n    loadedChildren: {\n      type: Object,\n      default: () => ({}),\n    },\n\n    pendingChildren: {\n      type: Object,\n      default: () => ({}),\n    },\n  },\n\n  data() {\n    // console.log(this.data, this.indexs.length);\n    // console.log(222);\n    return {\n      openedItems: this.getOpenedItems(this.opened),\n      insertIndex: null,\n      innerOpened: undefined,\n    };\n  },\n  computed: {\n    /**\n     * A song\n     * @typedef {Object} ScopedData\n     * @property {string} isOpened - The title\n     * @property {string} artist - The artist\n     * @property {number} year - The year\n     */\n    scopedData() {\n      return {\n        isOpened: this.isOpened,\n        isExpandable: this.isExpandable,\n        isDraggable: this.isDraggable,\n        isDroppable: this.isDroppable,\n        data: this.data,\n        indexs: this.indexs,\n        nodes: this.nodes,\n        ancestors: this.ancestors,\n        parent: this.parent,\n        index: this.index,\n      };\n    },\n    parent() {\n      return this.ancestors[this.ancestors.length - 1];\n    },\n    nodes() {\n      return [...this.ancestors, this.data];\n    },\n    index() {\n      if (this.indexs.length) {\n        return this.indexs[this.indexs.length - 1];\n      }\n      return undefined;\n    },\n    isRoot() {\n      return !this.indexs.length;\n    },\n    isDragging() {\n      if (!this.draggingData) return false;\n      return this.draggingData.data === this.data;\n    },\n    isShowOther() {\n      return typeof this.showOther === 'function' ? this.showOther(this.data) : !!this.showOther;\n    },\n    isHidden() {\n      return typeof this.hidden === 'function' ? this.hidden(this.data) : !!this.hidden;\n    },\n    isExpandable() {\n      return typeof this.expandable === 'function' ? this.expandable(this.data) : !!this.expandable;\n    },\n    isDraggable() {\n      return typeof this.draggable === 'function' ? this.draggable(this.data) : !!this.draggable;\n    },\n    isDroppable() {\n      const s = { from: this.draggingData, to: { data: this.data, getChildren: this.load } };\n      return typeof this.droppable === 'function' ? this.droppable(s) : !!this.droppable;\n    },\n    isOpened() {\n      return this.isRoot || this.openedItems.includes(this.data);\n    },\n    loadedVisibleChildrenLength() {\n      const children = this.loadedChildren[this.data[this.valueKey]];\n      if (!children) return 0;\n      if (typeof this.hidden !== 'function') {\n        return this.hidden ? 0 : children.length;\n      }\n      return children.length - children.filter(this.hidden).length;\n    },\n  },\n  methods: {\n    async loadChildren(item) {\n      const id = item[this.valueKey];\n      if (!this.loadedChildren[id]) {\n        let loadPromise = this.pendingChildren[id];\n        if (!loadPromise) {\n          loadPromise = this.load(item);\n          this.$set(this.pendingChildren, id, loadPromise);\n        }\n        const children = await loadPromise;\n        try {\n          this.$set(this.loadedChildren, id, children);\n        } catch (e) {\n          console.error(e);\n        } finally {\n          this.$set(this.pendingChildren, id, null);\n        }\n        await this.$nextTick();\n      }\n      return this.loadedChildren[id];\n    },\n    getOpenedItems(opened) {\n      if (Array.isArray(opened)) {\n        return opened;\n      }\n      if (opened) {\n        return [this.data];\n      }\n      return [];\n    },\n    toggle(item, opened) {\n      if (opened && !this.isExpandable) {\n        return;\n      }\n      const index = this.openedItems.indexOf(item);\n      if (opened === undefined) {\n        opened = index === -1;\n      }\n      if (Array.isArray(this.opened)) {\n        if (opened) {\n          this.openedItems.push(item);\n        } else {\n          this.openedItems.splice(index, 1);\n        }\n      } else {\n        /**\n         * 更新opened的事件，如果opend本来是数组，则不会触发\n         * @event update:opened\n         * @param {Boolean} opened 是否打开\n         */\n        this.$emit('update:opened', opened);\n      }\n    },\n    handleOtherContextmenu(ev) {\n      if (this.$listeners.othercontextmenu) {\n        ev.preventDefault();\n        /**\n         * 其他项的右键事件\n         * @event othercontextmenu\n         * @param {ScopedData} scopedData 一个包含大部分节点数据的结构\n         */\n        this.$emit('othercontextmenu', ev, this.scopedData);\n      }\n    },\n    handleContextmenu(ev) {\n      if (this.$listeners.contextmenu) {\n        ev.preventDefault();\n        /**\n         * 右键事件\n         * @event contextmenu\n         * @param {ScopedData} scopedData 一个包含大部分节点数据的结构\n         */\n        this.$emit('contextmenu', ev, this.scopedData);\n      }\n    },\n    handleDragOver(ev) {\n      ev.dataTransfer.dropEffect = 'copy';\n    },\n    handleDragLeave(e) {\n      if (this._enterElement === e.target) {\n        this.clearOpenTimeout();\n        this.insertIndex = null;\n      }\n    },\n    setOpenTimeout() {\n      this._openTimeout = setTimeout(() => {\n        if (!this.isOpened && this.isExpandable) {\n          this.toggle(this.data, true);\n        }\n      }, 1000);\n    },\n    clearOpenTimeout() {\n      if (this._openTimeout) {\n        clearTimeout(this._openTimeout);\n      }\n    },\n    handleDragEnter(e, index = 0) {\n      e.dataTransfer.dropEffect = 'copy';\n      this._enterElement = e.target;\n      this.insertIndex = index;\n      this.clearOpenTimeout();\n      this.setOpenTimeout();\n    },\n    async handleDragEnd() {\n      await this.$nextTick();\n      this.clearOpenTimeout();\n      this.insertIndex = null;\n      this.updateDraggingData(null);\n    },\n    async handleDrop(e, insertIndex) {\n      e.preventDefault();\n      e.stopPropagation();\n      let moveIndex = insertIndex;\n\n      const from = this.draggingData;\n\n      const { index, parent } = from;\n\n      const target = this.data;\n\n      const children = await this.loadChildren(target);\n      const before = children[moveIndex - 1];\n      const after = children[moveIndex];\n\n      if (parent === target) {\n        if (moveIndex > index) {\n          moveIndex -= 1;\n          if (moveIndex < 0) moveIndex = 0;\n        }\n        if (index === moveIndex) return;\n      }\n\n      /**\n       * 释放事件\n       * @event drop\n       * @param { ({ from: object, to: object }) } dropData 释放需要的数据，from为拖动的节点，to为释放到的节点\n       */\n      this.$emit('drop', {\n        from,\n        to: {\n          ...this.scopedData, before, after, index: insertIndex, moveIndex,\n        },\n      });\n      this.handleDragEnd();\n    },\n    updateDraggingData(v) {\n      /**\n       * 更新拖动的事件\n       * @event update:draggingData\n       * @param { {data: object} | null } scopedData 拖动的数据\n       */\n      this.$emit('update:draggingData', v);\n    },\n    handleDragStart(e) {\n      if (this.draggingData) {\n        return;\n      }\n      // e.dataTransfer.effectAllowed = 'move';\n      e.dataTransfer.dropEffect = 'copy';\n      this.updateDraggingData({\n        parent: this.parent,\n        data: this.data,\n        index: this.index,\n        indexs: this.indexs.slice(),\n        getChildren: this.load,\n      });\n    },\n  },\n  watch: {\n    opened(opened) {\n      this.openedItems = this.getOpenedItems(opened);\n    },\n    isOpened: {\n      immediate: true,\n      async handler(opened) {\n        if (opened) {\n          const item = this.data;\n          await this.loadChildren(item);\n          this.innerOpened = true;\n        } else {\n          this.innerOpened = false;\n        }\n      },\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n$primaryColor: #4c8eff;\n$hoverColor: #d7e4fb;\n$borderColor: #eee;\n$columnHeight: 32px;\n$sortLineHeight: 18px;\n\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.2s;\n}\n.list-enter,\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(15%);\n}\n.list-move {\n  transition: transform 0.2s;\n}\n\n.sublist {\n  padding-bottom: $sortLineHeight/2;\n}\n.host {\n  display: flex;\n  border-color: $borderColor;\n}\n\n.indent-line {\n  position: relative;\n  flex: 1;\n  &:before {\n    content: \"\";\n    position: absolute;\n    left: 17px;\n    right: auto;\n    bottom: 0;\n    top: 0;\n    border-style: dashed;\n    border-width: 1px;\n    border-color: darken($borderColor, 5%);\n    border-left-color: transparent;\n  }\n  .is-opened\n    > .content\n    > .sublist-wrapper\n    > .sublist\n    > .child\n    > .host\n    > .indent\n    & {\n    display: block;\n  }\n}\n.other {\n  margin-top: -$sortLineHeight/2;\n}\n.item {\n  cursor: pointer;\n  padding-bottom: 7px;\n  padding-top: 7px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow: hidden;\n  position: relative;\n  border-radius: 2px 2px 0 0;\n  border-bottom: 1px solid;\n  border-color: $borderColor;\n  &:focus {\n    outline: none;\n  }\n  &:hover {\n    background-color: $hoverColor;\n    color: $primaryColor;\n    border-color: darken($hoverColor, 10%);\n  }\n}\n\n// .host.dragover {\n//   .content {\n//     color: $primaryColor;\n//     background-color: $hoverColor;\n//   }\n//   .item {\n//     border-color: darken($hoverColor, 10%);\n//   }\n//   .indent-line {\n//     border-color: darken($hoverColor, 10%);\n//   }\n//   .item {\n//     border-color: darken($hoverColor, 10%);\n//   }\n// }\n\n.host.is-droppable {\n  > .content > .sublist-wrapper > .sublist > .child > .hr {\n    display: block;\n  }\n}\n\n.host.is-dragover {\n  > .content > .item-wrapper > .item {\n    color: $primaryColor;\n  }\n  > .content > .sublist-wrapper > .sublist > .child > .host {\n    > .indent .indent-line:before {\n      border-left-color: darken($primaryColor, 10%);\n      border-right-color: darken($primaryColor, 10%);\n    }\n  }\n}\n\n.indent {\n  width: 34px;\n  display: flex;\n  flex-direction: column;\n}\n.arrow,\n.loading {\n  line-height: 36px;\n  text-align: center;\n  height: 36px;\n  display: block;\n  transition: transform 0.3s;\n  font-weight: 300;\n  cursor: pointer;\n}\n.is-opened > .indent > .arrow {\n  transform: rotate(90deg);\n}\n\n.is-dragging {\n  cursor: move;\n  > * {\n    cursor: move;\n    pointer-events: none;\n  }\n  > .content {\n    opacity: 0.5;\n  }\n}\n\n.content {\n  flex: 1;\n  position: relative;\n}\n.child {\n  position: relative;\n}\n\n.hr {\n  display: none;\n  &.active {\n    span,\n    &:before,\n    &:after {\n      border-color: darken($primaryColor, 10%);\n    }\n  }\n  &.after {\n    display: none;\n    bottom: -$sortLineHeight/2;\n  }\n  &.before {\n    top: -$sortLineHeight/2;\n  }\n  .child:first-child > &.before {\n    &:before,\n    &:after {\n      top: $sortLineHeight/2;\n    }\n  }\n  .child:last-child > &.after {\n    &:before,\n    &:after {\n      bottom: $sortLineHeight/2;\n      margin-bottom: 0;\n    }\n  }\n  * {\n    pointer-events: none;\n  }\n  position: absolute;\n  padding-top: $sortLineHeight/2-1px;\n  padding-bottom: $sortLineHeight/2-1px;\n  height: $sortLineHeight;\n  left: 17px;\n  right: 0;\n  span {\n    display: block;\n    border-top: 2px dashed transparent;\n  }\n  &:before,\n  &:after {\n    display: inline-block;\n    bottom: $sortLineHeight/2/2;\n    content: \"\";\n    position: absolute;\n    top: $sortLineHeight/2/2;\n    border-left: 2px solid transparent;\n  }\n  &:before {\n    left: 0;\n  }\n  &:after {\n    right: 0;\n  }\n\n  // span,\n  // &:before,\n  // &:after {\n  //   border-color: darken($primaryColor, 10%);\n  // }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tree.vue?vue&type=template&id=c5ece6ca&scoped=true&\"\nimport script from \"./Tree.vue?vue&type=script&lang=js&\"\nexport * from \"./Tree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tree.vue?vue&type=style&index=0&id=c5ece6ca&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c5ece6ca\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=c01b2546&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LazyImage.vue?vue&type=style&index=0&id=405a84fa&lang=scss&scoped=true&\""],"sourceRoot":""}