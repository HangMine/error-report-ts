{"version":3,"sources":["webpack:///./node_modules/@4dst-saas/form-utils/dist/components/jsonschema2form/index.js","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue?04bd","webpack:///./node_modules/@4dst-saas/form-utils/dist/components/jsonschema2form/SelectType2.js","webpack:///./src/views/material/info-anta/components/Form.vue?62b0","webpack:///./src/utils/key-serializer.ts","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue?6a18","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/utils.ts","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue?203f","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue?3b9b","webpack:///./src/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue","webpack:///./src/views/material/info-anta/components/FormComponents/PriceFormItem.tsx","webpack:///./src/views/material/info-anta/components/FormComponents/SupplierSelect.tsx","webpack:///./src/components/dynamic-form/AntaMiddleClass2Form.tsx","webpack:///./src/views/material/info-anta/components/detail-validate.ts","webpack:///./src/views/material/info-anta/components/Form.vue?2a28","webpack:///./src/views/material/info-anta/components/Form.vue?4a4a","webpack:///./src/views/material/info-anta/components/Form.vue","webpack:///./src/views/material/info-anta/components/Form.vue?4614","webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-closest.js"],"names":["_interopRequireWildcard","_interopRequireDefault","Object","defineProperty","exports","value","enumerable","get","_JSONschema2Type","default","_IntegerType","_JSONschema","_NumberType","_SelectType","MultipleSeleteType","_SelectType2","_StringType","_default","_defineProperty2","_typeof2","_compositionApi","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","_default2","defineComponent","name","props","builder","type","String","subbuilder","valueKey","labelKey","options","Array","val","model","prop","event","render","_this","this","h","isObject","$attrs","n","$emit","map","op","index","_vm","_h","$createElement","_c","_self","ref","staticClass","staticStyle","attrs","newMaterial","rules","status","isQt","_e","on","ids","nodes","updateInfo","categoryArr","callback","$$v","parentIds","expression","setJsonschemaFormItem","canEdit","middleCategoryId","propertyFromTemplate","staticRenderFns","parse","str","split","item","trim","substr","query","createdTarget","undefined","slice","shift","prototype","hasOwnProperty","call","set","result","_b","directives","rawName","handlerFilter","handleChange","handleVisable","currentValue","_l","id","isDelete","_map","0","1","2","currentYear","afterYears","_","beforeYears","years","label","chunks","helper","prev","getCombines","productTypes","seasons","combines","_combine","reduce","obj","cur","JSON","stringify","join","allOptions","prevOptions","OPTIONS_LIMIT","getFilterList","lableStr","filters","includes","slices","getInitFilterList","labelStr","findIndex","requied","setup","emit","ElFormItem","refs","emptyValue","state","value2CurrenValue","stringifyValue","objVal","year","season","品牌","currentValue2Value","init","initLableStr","immediate","isShow","component","PriceFormItem","reference_price","reuqired","unit","required","e","disabled","SupplierSelect","supplier_name","supplierList","s","originalSupplierName","components","SeasonSelect","MaterialTypeCascade","middleClassId","formData","validateDropdownItemImmediatly","Boolean","jsonschemaListHander","Function","showValidateButton","notHasTemplate","j2f","jsonschema","form","v","style","height","width","propertylist","axios","url","params","method","r","data","Error","sort","a","b","initialValue","loadingValue","lastResult","pList","Promise","all","propertyItem","isSystem","propertyId","list","jssList","attribute","formRef","_jss","_form","formKeys","shouldHandleKeys","find","title","shouldFetchList","jss","oneOf","anyOf","isArray","constList","const","notFounds","founds","validate","p","extraProperty","category","materialId","language","headers","fetchMaterialDetail","fetchDefaultUnitId","property","groupAppId","fetchSupplierAll","res","AntaMiddleClass2Form","material","templateMaterialId","isCreator","root","host","isSupplier","templateForm","refsForm","typeCascade","updateData","oldMaterial","materialName","evergreen","maxLength","filterable","materialNumberIndex","splice","categoryIndex","costIndex","evergreenIndex","addOperateToRecord","count","_propertyFromTemplate","firstSupplier","reference_price_unit","reference_price_value","cost_unit","cost_value","delete_status","supplier_status","_newMaterial","omitList","supplier_price_array","_p","priceItem","diffPriceCount","oldPriceItem","relateId","originalId","replace","getFormData","formMatarialData","bigType","midType","checkedNodes","getCheckedNodes","businessType","大类","中类","material_status","success","errorMsg","imgJson","renderingJson","fileInfo","console","info","companyId","$set","values","$nextTick","$el","exec","offsetWidth","offsetHeight","$route","path","window","onmousewheel","className","deltaY","temp","sup","templateMaterial","useClosest","_vueClosest","componentName","that","getCurrentInstance","computed","closest"],"mappings":"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","file":"js/chunk-0f46b564.7d9547ce.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"JSONschema2Type\", {\n  enumerable: true,\n  get: function get() {\n    return _JSONschema2Type.default;\n  }\n});\nObject.defineProperty(exports, \"IntegerType\", {\n  enumerable: true,\n  get: function get() {\n    return _IntegerType.default;\n  }\n});\nObject.defineProperty(exports, \"JSONschema\", {\n  enumerable: true,\n  get: function get() {\n    return _JSONschema.default;\n  }\n});\nObject.defineProperty(exports, \"NumberType\", {\n  enumerable: true,\n  get: function get() {\n    return _NumberType.default;\n  }\n});\nObject.defineProperty(exports, \"SelectType\", {\n  enumerable: true,\n  get: function get() {\n    return _SelectType.default;\n  }\n});\nObject.defineProperty(exports, \"MultipleSeleteType\", {\n  enumerable: true,\n  get: function get() {\n    return _SelectType.MultipleSeleteType;\n  }\n});\nObject.defineProperty(exports, \"SelectType2\", {\n  enumerable: true,\n  get: function get() {\n    return _SelectType2.default;\n  }\n});\nObject.defineProperty(exports, \"StringType\", {\n  enumerable: true,\n  get: function get() {\n    return _StringType.default;\n  }\n});\nexports.default = void 0;\n\nvar _JSONschema2Type = _interopRequireDefault(require(\"./JSONschema2Type\"));\n\nvar _IntegerType = _interopRequireDefault(require(\"./IntegerType\"));\n\nvar _JSONschema = _interopRequireDefault(require(\"./JSONschema\"));\n\nvar _NumberType = _interopRequireDefault(require(\"./NumberType\"));\n\nvar _SelectType = _interopRequireWildcard(require(\"./SelectType\"));\n\nvar _SelectType2 = _interopRequireDefault(require(\"./SelectType2\"));\n\nvar _StringType = _interopRequireDefault(require(\"./StringType\"));\n\nvar _default = _JSONschema2Type.default;\nexports.default = _default;","export * from \"-!../../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=5aa64bef&lang=scss&scoped=true&\"","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.array.map\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _default2 = (0, _compositionApi.defineComponent)({\n  name: 'SingleSeletor',\n  props: {\n    builder: {\n      type: String,\n      default: 'el-select'\n    },\n    subbuilder: {\n      type: String,\n      default: 'el-option'\n    },\n    valueKey: {\n      type: String,\n      default: 'value'\n    },\n    labelKey: {\n      type: String,\n      default: 'label'\n    },\n    options: {\n      type: Array,\n      default: function _default() {\n        return [1, 2, 3, 4, 5];\n      }\n    },\n    val: {\n      type: String,\n      default: ''\n    }\n  },\n  model: {\n    prop: 'val',\n    event: 'change'\n  },\n  render: function render() {\n    var _this = this;\n\n    var h = arguments[0];\n    var isObject = (0, _typeof2.default)(this.options[0]) === 'object';\n    return h(this.builder, {\n      \"attrs\": _objectSpread({\n        \"value\": this.val\n      }, this.$attrs),\n      \"on\": {\n        \"change\": function change(n) {\n          _this.$emit('change', n);\n        }\n      }\n    }, [this.options.map( // @ts-ignore\n    function (op, index) {\n      return h(_this.subbuilder, {\n        \"attrs\": {\n          \"value\": isObject ? op[_this.valueKey] : op,\n          \"label\": isObject ? op[_this.labelKey] : op\n        },\n        \"key\": index\n      });\n    })]);\n  }\n});\n\nexports.default = _default2;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"refsForm\",staticClass:\"flex-wrap upload-form\",staticStyle:{\"background-color\":\"#fff\"},attrs:{\"model\":_vm.newMaterial,\"rules\":_vm.rules,\"size\":\"small\"}},[(_vm.status === 'upload' && _vm.isQt())?_c('el-divider',{staticClass:\"divider\"}):_vm._e(),_c('el-form-item',{staticStyle:{\"width\":\"100%\",\"padding-right\":\"0\"},attrs:{\"label\":\"选择分类\",\"prop\":\"extraProperty.category\",\"required\":\"\"}},[_c('MaterialTypeCascade',{ref:\"typeCascade\",staticClass:\"fixed-width anta\",staticStyle:{\"width\":\"50%\",\"padding-right\":\"20px\"},attrs:{\"strictMode\":true,\"showClearable\":false,\"disabled\":_vm.status === 'edit'},on:{\"change\":function (ids, nodes) {\n          _vm.updateInfo('category', ids[ids.length - 1]);\n          _vm.categoryArr = nodes;\n        }},model:{value:(_vm.parentIds),callback:function ($$v) {_vm.parentIds=$$v},expression:\"parentIds\"}})],1),(_vm.parentIds.length)?_c('el-divider'):_vm._e(),_c('AntaMiddleClass2Form',{ref:\"templateForm\",staticClass:\"dynamic-form flex-wrap\",attrs:{\"jsonschemaListHander\":_vm.setJsonschemaFormItem,\"disabled\":!_vm.canEdit,\"size\":\"small\",\"validateDropdownItemImmediatly\":_vm.status === 'upload',\"middleClassId\":_vm.middleCategoryId || '',\"formData\":_vm.propertyFromTemplate}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export type PublicKey = Exclude<PropertyKey, symbol>;\n\n/**\n * parse a string to [[PublicKey]] array\n *\n * ```javascript\n *  parse('a[0].b[2]') // => ['a', 0, 'b', 2]\n * ```\n *\n * @param str the string you wanna parse\n */\nconst r = /(?=(?:\\[|\\.))/;\nexport function parse(str: string): PublicKey[] {\n  return str.split(r)\n    .filter(item => item.trim())\n    // eslint-disable-next-line no-nested-ternary\n    .map(item => (item[0] === '.' ? item.substr(1) : (item[0] === '[' ? +item.substr(1, item.length - 2) : item)));\n}\n\n\n/**\n * query the result from target by keys\n * @param target\n * @param keys\n * @param createdTarget if it's ```true```, this funciton will create object or array when necessary\n * ```javascript\n * const obj = { a: { b: [1, 2] } }\n * query(obj, 'a.b[0]') // => { target: [1, 2], key: 0, value: 1 }\n * ```\n * or with **createTarget** param\n * ```javascript\n * const obj = { }\n * query(obj, 'a.b[0]', true) => { target: [], key: 0, value: undefined }\n * ```\n *\n */\nexport function query(target: any, keys?: string | PublicKey[] | null, createdTarget = false) {\n  if (keys == null || keys === '') {\n    return { target, key: undefined, value: target };\n  }\n  if (typeof keys === 'string') {\n    keys = parse(keys) as PublicKey[];\n  } else {\n    keys = keys.slice() as PublicKey[];\n  }\n  let value = target;\n  let key: PublicKey;\n  if (!keys.length) {\n    return { target, value };\n  }\n  do {\n    target = value;\n    key = keys.shift()!;\n    if (target && !Object.prototype.hasOwnProperty.call(target, key) && createdTarget) {\n      if (typeof key === 'number') {\n        target[key] = [];\n      } else {\n        target[key] = {};\n      }\n    }\n    // this line may throw when target is undefined, and i do not need handle\n    value = target[key];\n  } while (keys.length);\n  return { target, key, value };\n}\n\n/**\n * deepin target, and set value of keys from target\n * @param target\n * @param keys\n * @param value\n *\n * ```javascript\n *\n * const obj = { a: { b: [1, 2] } }\n * query(obj, 'a.b[0]', 3)\n * obj.a.b[0] === 3 // => true\n *\n * ```\n */\nexport function set(target: object, keys: string | PublicKey[] | null, value: any, createdTarget = true): void {\n  const result = query(target, keys, createdTarget);\n  if (result.key) {\n    result.target[result.key] = value;\n  }\n}\n\n\nexport default set;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"season-select\"},[_c('el-select',_vm._b({directives:[{name:\"elSelectMiddle\",rawName:\"v-elSelectMiddle\"}],attrs:{\"filterable\":\"\",\"filter-method\":_vm.handlerFilter},on:{\"change\":_vm.handleChange,\"visible-change\":_vm.handleVisable},model:{value:(_vm.currentValue),callback:function ($$v) {_vm.currentValue=$$v},expression:\"currentValue\"}},'el-select',_vm.$attrs.attrs,false),_vm._l((_vm.options),function(ref){\nvar id = ref.id;\nvar value = ref.value;\nvar isDelete = ref.isDelete;\nreturn _c('el-option',{key:id,attrs:{\"disabled\":isDelete === 1,\"value\":id,\"label\":value}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { fetchAntaPropertyByCode } from '@/loaders/dictionary';\n\nexport type Obj = {\n  [key in string | number]: any;\n};\n\nexport interface ObjValue{\n  year: string,\n  season: 'Q1'|'Q2'|'Q3'|'Q4'|'',\n  品牌: string\n}\nexport type Value = ObjValue | null;\n\nexport interface Option{\n  id: string,\n  value:string,\n}\n\nexport type Options = Option[];\n\nexport const _map:Obj = {\n  0: 'year',\n  1: 'season',\n  2: '品牌',\n};\n\n\nconst getYears = () => {\n  const currentYear = 2020;\n  // const range = [-20, 50];\n  // const sortNums = [...Array(range[1] - range[0])].map((_, i) => range[0] + i).sort((a, b) => Math.abs(a) - Math.abs(b));\n  const afterYears = [...Array(51)].map((_, i) => currentYear + i);\n  const beforeYears = [...Array(20)].map((_, i) => currentYear - i - 1);\n  const years = [...afterYears, ...beforeYears].map(item => {\n    const value = `${item}`;\n    return {\n      id: value,\n      label: value,\n    };\n  });\n  return years;\n};\n\nconst getSeansons = () => [...Array(4)].map((_, i) => ({ id: `Q${i + 1}`, label: `Q${i + 1}` }));\n\nconst combine = (chunks:Obj[][]) => {\n  const result:any[] = [];\n\n  const helper = (i:number, prev:Obj[] = []) => {\n    if (i === chunks.length) {\n      result.push(prev);\n      return;\n    }\n\n    // eslint-disable-next-line no-restricted-syntax\n    for (const item of chunks[i]) {\n      helper(i + 1, [...prev, item]);\n    }\n  };\n\n  helper(0);\n\n  return result;\n};\n\nexport const getCombines = async () => {\n  const productTypes = await fetchAntaPropertyByCode('品牌');\n  const years = getYears();\n  const seasons = getSeansons();\n  let combines = combine([years, seasons, productTypes]);\n\n\n  combines = combines.map(_combine => {\n    const value = _combine.reduce((obj:Obj, cur:Obj, index:number) => {\n      const key = _map[index];\n      obj[key] = cur.id;\n      return obj;\n    }, {});\n\n    const id = JSON.stringify(value);\n    const label = _combine.map((item:Obj, i:number) => (_map[i] === 'year' ? +item.label.slice(2) : item.label)).join('');\n\n    return {\n      id,\n      value: label,\n    };\n  });\n\n  return combines;\n};\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, toRefs, watch, onBeforeMount, markRaw, shallowReactive, getCurrentInstance,\n} from '@vue/composition-api';\nimport useClosest from '_/composables/use-closest';\nimport {\n  getCombines, Options, Value, ObjValue,\n} from './utils';\n\n\nlet allOptions: Options = [];\nlet prevOptions: Options = [];\nconst OPTIONS_LIMIT = 100;\n\n\nconst getFilterList = (lableStr: string = '') => {\n  const filters = allOptions.filter(item => item.value.includes(lableStr));\n  const slices = filters.slice(0, OPTIONS_LIMIT);\n  return slices;\n};\n\n// 初始化时的筛选逻辑\nconst getInitFilterList = (labelStr:string = '') => {\n  const index = allOptions.findIndex(item => item.value.includes(labelStr));\n  const slices = allOptions.slice(index, index + OPTIONS_LIMIT);\n  return slices;\n};\n\nexport default defineComponent({\n  name: 'season-select',\n  props: {\n    value: {\n      type: Object as () => Value,\n      requied: true,\n    },\n    productTypes: {\n      type: Array,\n    },\n  },\n  setup(props, { emit, refs }) {\n    const ElFormItem = useClosest('ElFormItem');\n    const emptyValue = null;\n    const state = shallowReactive({\n      currentValue: emptyValue as string | null,\n      options: markRaw([]) as Options,\n    });\n\n    const value2CurrenValue = (val?: Value) => {\n      const stringifyValue = (objVal: ObjValue) => {\n        const obj = {\n          year: objVal.year,\n          season: objVal.season,\n          品牌: objVal.品牌,\n        };\n        return JSON.stringify(obj);\n      };\n      state.currentValue = !val ? emptyValue : stringifyValue(val!);\n    };\n\n    const currentValue2Value = (val: string | null) => {\n      const value = !val ? emptyValue : JSON.parse(val);\n      emit('input', value);\n\n      // 解决校验时拿的是旧值的问题\n      return ElFormItem.value?.$emit('el.form.change');\n    };\n\n    const init = async () => {\n      allOptions = await getCombines();\n      // 初始加载时的options加载筛选逻辑，如果有值，默认以年份搜索\n      const initLableStr = props.value?.year?.slice(2, 4) || '';\n      state.options = getInitFilterList(initLableStr);\n      value2CurrenValue(props.value);\n    };\n\n    watch(() => props.value, val => {\n      value2CurrenValue(val);\n    });\n\n    watch(() => state.currentValue, val => {\n      currentValue2Value(val);\n    });\n\n    watch(() => props.productTypes, () => {\n      init();\n    }, {\n      immediate: true,\n    });\n\n\n    // onBeforeMount(() => {\n    //  init();\n    // });\n\n    const handlerFilter = (value: string) => {\n      state.options = getFilterList(value);\n    };\n\n    const handleChange = () => {\n      prevOptions = state.options;\n    };\n\n    const handleVisable = (isShow: boolean) => {\n      if (isShow) return;\n      if (!prevOptions?.length) return;\n      state.options = prevOptions;\n    };\n\n    return {\n      ...toRefs(state),\n      handlerFilter,\n      handleChange,\n      handleVisable,\n    };\n  },\n});\n","import mod from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5aa64bef&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5aa64bef&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5aa64bef\",\n  null\n  \n)\n\nexport default component.exports","import { defineComponent } from '@vue/composition-api';\n// import NumberType from '@4dst-saas/form-utils/dist/components/jsonschema2form/NumberType';\nimport NumberType from '@4dst-saas/form-utils/dist/components/jsonschema2form/NumberType';\nimport isFilled from '@/utils/validators/is-filled';\nimport validator2ElemRule from '@/utils/validators/utils/validator-to-elem-rule';\n\nconst PriceFormItem = defineComponent({\n  // model: {\n  //   prop: 'reference_price',\n  //   event: 'change',\n  // },\n  props: {\n    reference_price: {\n      type: Object as () => {\n        value: number, unit: number,\n      },\n      reuqired: true,\n      default: () => ({\n        value: null,\n        unit: 1,\n      }),\n    },\n  },\n\n  render() {\n    // const { $attrs: attrs } = this;\n    return <div class=\"flex\" style=\"width: 100%;\" >\n      <NumberType {...this.$attrs.attrs}\n        val={ this.reference_price.value }\n        rules={ this.$attrs.required ? validator2ElemRule(isFilled) : null}\n        onchange={(e: number) => {\n          this.reference_price.value = e;\n          // this.$set(this.reference_price, 'value', e);\n          // console.info(this.reference_price);\n          // this.$emit('change', this.reference_price);\n        }}\n      ></NumberType>\n      <el-select\n        disabled={this.$attrs.disabled}\n        size=\"small\"\n        style=\"width: 124px; margin-left: 6px\"\n        vModel={ this.reference_price.unit }\n        // value={ this.reference_price.unit }\n        // onchange={(e: number) => {\n        //   this.reference_price.unit = e;\n        //   this.$set(this.reference_price, 'unit', e);\n        //   console.info(this.reference_price);\n        //   // thi-s.$emit('change', this.reference_price);\n        // }}\n        >\n        <el-option value={1} label='人民币'></el-option>\n        <el-option value={2} label='美元'></el-option>\n      </el-select>\n    </div>;\n  },\n});\n\nexport default PriceFormItem;\n","\nimport { defineComponent, onMounted, ref } from '@vue/composition-api';\n// import axios from '@/utils/axios';\nimport { fetchSupplierAll } from '@/loaders/supplier';\n\nconst SupplierSelect = defineComponent({\n  name: 'SupplierSelect',\n  props: {\n    supplier_name: String,\n  },\n  model: {\n    prop: 'supplier_name',\n    event: 'change',\n  },\n  setup() {\n    const supplierList = ref([]);\n    onMounted(async () => {\n      supplierList.value = await fetchSupplierAll();\n    });\n    return {\n      supplierList,\n    };\n  },\n\n  render() {\n    return <el-select { ...{ attrs: this.$attrs.attrs } } value={this.supplier_name} onchange={ (e: string) => this.$emit('change', e) }>\n    {/* // return <el-select vModel={this.supplier_name} { ...this.$attrs.attrs }> */}\n      {this.supplierList.map((s: {id: string, name: string, originalSupplierName: string}) => {\n        return <el-option value={s.id} label={ s.originalSupplierName }></el-option>;\n      })}\n    </el-select>;\n  },\n});\n\nexport default SupplierSelect;\n","import axios from '@/utils/axios';\nimport {\n  attribute2JSONschema, IAttribute, jsonschema2FormItemValidatorObject,\n} from '@/components/anta-customer-files/attribute';\nimport useLoader from '_/composables/use-loader';\nimport extract from '_/extract';\nimport {\n  computed,\n  defineComponent, reactive, ref, toRefs,\n} from '@vue/composition-api';\nimport SeasonSelect from '@/views/material/info-anta/components/FormComponents/SeasonSelect/index.vue';\nimport PriceFormItem from '@/views/material/info-anta/components/FormComponents/PriceFormItem';\nimport SupplierSelect from '@/views/material/info-anta/components/FormComponents/SupplierSelect';\nimport MaterialTypeCascade from '@/components/MaterialTypeCascade.vue';\nimport Jsonschema2Form from '@4dst-saas/form-utils/dist/components/jsonschema2form';\nimport Jsonschema from '@4dst-saas/form-utils/dist/components/jsonschema2form/JSONschema';\nimport difference from '@4dst-saas/public-utils/dist/difference';\n\nexport default defineComponent({\n  name: 'AntaMiddleClass2Form',\n  components: {\n    SeasonSelect,\n    PriceFormItem,\n    SupplierSelect,\n    MaterialTypeCascade,\n  },\n  props: {\n    middleClassId: {\n      type: String, required: true,\n    },\n    formData: {\n      type: Object as () => { [key: string]: any },\n      default: () => {\n        return {\n        // eslint-disable-next-line quote-props\n          // '测试下拉': '1306902076941131778',\n        };\n      },\n    },\n    validateDropdownItemImmediatly: { type: Boolean, default: true },\n    jsonschemaListHander: {\n      type: Function as unknown as () => (jss: Jsonschema[]) => Jsonschema[],\n    },\n    showValidateButton: { type: Boolean, default: false },\n  },\n  render() {\n    if (!this.middleClassId || this.notHasTemplate) {\n      return <div></div>;\n    }\n    // if (!this.jsonschema) {\n    //   return <div vLoading={true} style={{\n    //     height: '300px', width: '100%',\n    //   }}></div>;\n    // }\n    // return <AnalysisWrapper jsonschema={this.jsonschema} formData={this.formData}\n    // form={this.formData}></AnalysisWrapper>;\n    const j2f = <Jsonschema2Form ref='formRef' jsonschema={this.jsonschema} {...{ attrs: this.$attrs }}\n      // formItemValidator={this.formItemValidator}\n      form={this.validateDropdownItemImmediatly ? this.formData : (this.form || this.formData)}\n      onchange={(v: any) => this.$emit('change', v)}\n      labelPosition='top' showValidateButton={this.showValidateButton}\n      ></Jsonschema2Form>;\n    const style = {\n      height: '200px',\n      width: '100%',\n    };\n    return this.jsonschema ? j2f : <div vLoading={true} style={style}>\n      <div vShow={false}>{j2f}</div>\n    </div>;\n  },\n  setup(props, { emit }) {\n    // let t1:any = null;\n    const propertylist = useLoader(async ({ middleClassId: id }) => {\n      if (!id) return null;\n      const r = (await axios({\n        url: '/anta-material/template/middle',\n        params: { id },\n        method: 'GET',\n      })).data as { propertyId?: string, sort: number, isSystem?: boolean, key: string, title: string, required: 0|1}[];\n      if (!r.length) emit('error', new Error('对应的中类没有模板，请更换一个有模板的中类'));\n      return r.sort((a, b) => a.sort - b.sort);\n      // return t1;\n    }, extract(toRefs(props), ['middleClassId']), {\n      initialValue: null,\n      loadingValue: (lastResult) => lastResult,\n    });\n\n    // let t2:any = null;\n    const jsonschema = useLoader(async ({ propertylist: pList }) => {\n      if (!pList || !pList.length) return null;\n\n      const list = await Promise.all(pList.map(async (propertyItem) => {\n        if (propertyItem.isSystem) {\n          return propertyItem;\n        }\n        return {\n          ...(await axios({\n            url: `/anta-material/dynamics/property/detail?id=${propertyItem.propertyId}`, method: 'GET',\n          })).data,\n          required: !!propertyItem.required,\n        } as IAttribute;\n      }));\n      let jssList = attribute2JSONschema(list) as Jsonschema[];\n\n      if (props.jsonschemaListHander) jssList = props.jsonschemaListHander(jssList);\n      // t2 = jssList;\n      return jssList;\n      // const res = JSONschemaList2JSONschema(jssList);\n      // return res;\n    }, reactive({ propertylist }), { initialValue: null, loadingValue: (lastResult) => lastResult });\n    const formRef = ref<InstanceType<typeof Jsonschema2Form>>();\n\n    // const formItemValidator = useLoader(({ jsonschema: _jss }) => {\n    //   if (!_jss) return null;\n    //   const res = jsonschema2FormItemValidatorObject(_jss);\n    //   // console.log(res, res['测试下拉']('6'));\n    //   return res;\n    // }, reactive({ jsonschema }));\n\n    const form = useLoader(async ({ jsonschema: _jss, formData: _form }) => {\n      if (!_jss || !Object.keys(_form).length) return _form;\n      // const properties = _jss.properties!;\n      // const propertiesKeys = Object.keys(properties);\n      const formKeys = Object.keys(_form);\n      const shouldHandleKeys = formKeys.filter(key => {\n        if (_jss.find(i => i.prop === key || i.title === key)) return true;\n        return false;\n      });\n      const shouldFetchList: {key: string, id: string}[] = [];\n      shouldHandleKeys.forEach(key => {\n        const jss = _jss.find(i => i.prop === key || i.title === key)!;\n        if (!jss.oneOf && !jss.anyOf) return;\n        const currentValue = _form[key]! as string | string[];\n        if (Array.isArray(currentValue)) {\n          const constList = jss.anyOf!.map(item => item.const) as unknown as {\n            label: string, value: string,\n          }[];\n          const notFounds = currentValue.filter(id => !constList.find(i => i.value === id));\n          if (notFounds.length) {\n            const founds = difference(currentValue, notFounds);\n            _form[key] = founds;\n            shouldFetchList.push(...notFounds.map(id => ({ id, key })));\n          }\n        } else {\n          const constList = jss.oneOf!.map(item => item.const) as unknown as {\n            label: string, value: string,\n          }[];\n          const target = constList.find(i => i.value === currentValue);\n          if (!target) shouldFetchList.push({ key, id: currentValue });\n        }\n      });\n      await Promise.all(shouldFetchList.map(async ({ key, id }) => {\n        const value = (await axios({\n          url: '/anta-material/dynamics/property/value/id',\n          method: 'GET',\n          params: { id },\n        })).data as string;\n        if (Array.isArray(_form[key])) {\n          _form[key].push(value);\n        } else {\n          _form[key] = value;\n        }\n      }));\n      return _form;\n    }, reactive({ jsonschema, ...extract(toRefs(props), ['formData']) }));\n\n    // watchEffect(async () => {\n    //   if (jsonschema.value) {\n    //     await delay(500);\n    //     Object.assign(form.value, { ...props.formData });\n    //     Object.assign(props.formData, form.value);\n    //   }\n    // });\n    async function validate() {\n      // 没有模板时，不用校验\n      if (!formRef.value) return true;\n      return formRef.value.validate();\n    }\n    return {\n      formRef,\n      jsonschema,\n      // formItemValidator,\n      notHasTemplate: computed(() => !!propertylist.value?.map(p => p.propertyId) && !propertylist.value?.map(p => p.propertyId).length),\n      form,\n      validate,\n    };\n  },\n});\n","import isFilled from '@/utils/validators/is-filled';\n// import strLength from '@/utils/validators/str-length';\n// import validPrice from '@/utils/validators/valid-price';\nimport validator2ElemRule from '@/utils/validators/utils/validator-to-elem-rule';\n// import i18n from 'i18next';\n\nconst rules = {\n  extraProperty: {\n    category: validator2ElemRule(isFilled),\n  },\n};\nexport default rules;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, ref, onMounted, provide, watch, computed, onBeforeUnmount, onUnmounted,\n} from '@vue/composition-api';\n\nimport axios from '@/utils/axios';\nimport set from '@/utils/key-serializer';\nimport isQt from '@/utils/is-qt';\n\nimport MaterialTypeCascade from '@/components/MaterialTypeCascade.vue';\nimport { AntaMaterialInfo } from '@/models/AntaMaterialInfo';\nimport { fetchAntaPropertyByCode } from '@/loaders/dictionary';\nimport validateForm from '@/utils/validators/validate-form';\n\nimport { getCurrentCompany } from '@/loaders/company';\n\nimport AntaMiddleClass2Form from '@/components/dynamic-form/AntaMiddleClass2Form';\n\nimport DictionarySelectorNew from '@/components/dictionary/DictionarySelectorNew.vue';\n// import DictionarySelectorAnta from '@/components/dictionary/DictionarySelectorAnta.vue';\nimport { getHost, exec } from '@/utils/exec';\nimport { ElForm } from 'element-ui/types/form';\n// import ReferencePrice from './FormComponents/ReferencePrice';\nimport SeasonSelect from './FormComponents/SeasonSelect/index.vue';\nimport rules from './detail-validate';\n\n/**\n * 获取材质详情信息\n * @param {String} materialId 材质Id\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6026\n */\nexport const getMaterialInfo = (materialId: string, language = 'cn') => {\n  return axios({\n    method: 'get',\n    url: '/bff-center/showCommon/getMaterialBasicInfoAndTags',\n    headers: {\n      language,\n    },\n    params: { materialId },\n  });\n};\n\n// 类目详情\nexport const fetchMaterialDetail = async (id: string) => {\n  return (await axios({\n    method: 'get',\n    url: `/anta-material/category/detail?id=${id}`,\n  })).data;\n};\n\n// 类目详情\nexport const fetchDefaultUnitId = async (property: string) => {\n  return (await axios({\n    method: 'get',\n    url: '/anta-material/system/default/unit/category',\n    params: {\n      property,\n    },\n  })).data;\n};\n\n// 修改面料详情新增操作记录\nexport const addOperate = (groupAppId: string, data: { relateId: string, params: any }) => {\n  return axios({\n    headers: {\n      groupAppId,\n    },\n    method: 'post',\n    url: '/msgcenter/operate/add',\n    data,\n  });\n};\n\n// 获取全部供应商\nexport async function fetchSupplierAll() {\n  const res = (await axios({\n    method: 'post',\n    url: '/anta-material/supplier/list/condition',\n    data: {},\n  })).data;\n  return res;\n}\n\nexport default defineComponent({\n  name: 'AntaMaterialForm',\n  components: {\n    // DictionarySelectorNew,\n    // DictionarySelectorAnta,\n    MaterialTypeCascade,\n    // ReferencePrice,\n    // SeasonSelect,\n    AntaMiddleClass2Form,\n  },\n  props: {\n    material: {\n      type: Object,\n      default: null,\n    },\n    status: {\n      type: String as () => 'upload' | 'edit' | 'convert',\n      default: 'edit',\n    },\n    templateMaterialId: {\n      type: String,\n      default: '',\n    },\n    isCreator: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  setup(props, { root }) {\n    const host = ref(null);\n\n    const isSupplier = computed(() => {\n      return getCurrentCompany()?.type === 3;\n    });\n\n    // 表单ref\n    const templateForm = ref<InstanceType<typeof AntaMiddleClass2Form>>();\n    const refsForm = ref<InstanceType<typeof ElForm>>();\n    const typeCascade = ref<InstanceType<typeof MaterialTypeCascade>>();\n\n    // 自动表单数据\n    const propertyFromTemplate = ref<Partial<AntaMaterialInfo['extraProperty'] & { materialName: string }>>({});\n\n    // 是否创建者\n    // const isCreator = ref(false);\n\n    const canEdit = computed(() => {\n      return props.status === 'upload' || props.status === 'convert' || (props.status === 'edit' && props.isCreator);\n    });\n\n    provide('getStatus', props.status);\n\n    // 用于保存变更记录\n    const updateData = ref<{ [key: string]: any }[]>([{}, {}]);\n\n    // 获取全部供应商列表\n    const supplierList = ref<{ [key: string]: { companyId?: string, id: string, name: string, originalSupplierName: string } }>({});\n\n    // 用于对比哪些属性发生改变\n    const oldMaterial = ref<Partial<AntaMaterialInfo>>({});\n    const newMaterial = ref<AntaMaterialInfo>({\n      materialName: '',\n      extraProperty: {\n        category: '',\n        evergreen: 2,\n      },\n    });\n\n    // 获取分类信息\n    const parentIds = ref<string[]>([]);\n\n    // 中类ID\n    const middleCategoryId = computed(() => parentIds.value[1]);\n\n    // 类别节点数组\n    const categoryArr = ref<any[]>([]);\n\n    watch(() => categoryArr.value, async (v: any[]) => {\n      if ((props.status === 'upload' || props.status === 'convert')) {\n        const unit = await fetchDefaultUnitId(v[2].name);\n        if (!props.templateMaterialId) {\n          const companyId = await getCurrentCompany()?.id || '';\n          root.$set(propertyFromTemplate.value, '单位', unit);\n          root.$set(propertyFromTemplate.value, 'supplier_name', Object.values(supplierList.value).find((s) => s.companyId === companyId)?.id || '');\n          root.$set(propertyFromTemplate.value, 'reference_price', { value: null, unit: 1 });\n          root.$set(propertyFromTemplate.value, '品牌编码', (await fetchAntaPropertyByCode('品牌编码'))[0].id);\n        }\n      }\n    });\n\n    watch(() => templateForm.value?.jsonschema, async (val) => {\n      if (val) {\n        await root.$nextTick();\n        const form = refsForm.value?.$el as unknown as HTMLFormElement;\n\n        if (host.value) {\n          await exec('recvWebSizeChanged', {\n            width: form.offsetWidth,\n            height: form.offsetHeight,\n          });\n        }\n      }\n    });\n\n    // 处理jsonschema\n    function setJsonschemaFormItem(jss: any[]) {\n      jss.find(i => i.prop === 'materialName').maxLength = 512;\n      jss.find(i => i.prop === 'supplier_name').filterable = true;\n      if (props.status === 'edit') {\n        jss.find(i => i.title === '品牌编码').disabled = true;\n        jss.find(i => i.prop === 'season').disabled = true;\n        if (!props.material.extraProperty.season) {\n          jss.find(i => i.prop === 'season').required = false;\n        }\n        if (jss.find(i => i.prop === 'supplier_name')) {\n          jss.find(i => i.prop === 'supplier_name').disabled = true;\n        }\n      } else {\n        const materialNumberIndex = jss.findIndex(i => i.prop === 'material_number');\n        if (materialNumberIndex !== -1) {\n          jss.splice(materialNumberIndex, 1);\n        }\n      }\n\n      const categoryIndex = jss.findIndex(i => i.prop === 'category');\n      if (categoryIndex !== -1) {\n        jss.splice(categoryIndex, 1);\n      }\n      const costIndex = jss.findIndex(i => i.prop === 'cost');\n      if (costIndex !== -1) {\n        jss.splice(costIndex, 1);\n      }\n      if (isSupplier.value) {\n        const evergreenIndex = jss.findIndex(i => i.prop === 'evergreen');\n        if (evergreenIndex !== -1) {\n          jss.splice(evergreenIndex, 1);\n        }\n        if (jss.find(i => i.prop === 'supplier_name')) {\n          jss.find(i => i.prop === 'supplier_name').disabled = true;\n        }\n      }\n      return jss;\n    }\n\n    // 提交变更记录（外部调用）\n    async function addOperateToRecord(groupAppId = '') {\n      if (!groupAppId) return;\n\n      // 统计变更记录数量\n      let count = 0 as number;\n\n\n      const _propertyFromTemplate = JSON.parse(JSON.stringify(propertyFromTemplate.value));\n      const firstSupplier = {\n        reference_price_unit: _propertyFromTemplate.reference_price.unit,\n        reference_price_value: _propertyFromTemplate.reference_price.value,\n        cost_unit: 1,\n        cost_value: '',\n        supplier_name: _propertyFromTemplate.supplier_name,\n        delete_status: 0,\n        supplier_status: 1,\n      };\n\n      let _newMaterial = {\n        ...newMaterial.value,\n        materialName: _propertyFromTemplate.materialName,\n      } as Partial<AntaMaterialInfo>;\n\n      const omitList = ['materialName', 'reference_price', 'cost', 'supplier_name'];\n      omitList.forEach((i) => {\n        if (Object.hasOwnProperty.call(_propertyFromTemplate, i)) {\n          delete _propertyFromTemplate[i];\n        }\n      });\n\n      _newMaterial = {\n        ..._newMaterial,\n        extraProperty: {\n          ...newMaterial.value.extraProperty,\n          ..._propertyFromTemplate,\n          supplier_price_array: [\n            firstSupplier,\n            ...newMaterial.value.extraProperty.supplier_price_array!.slice(1),\n          ],\n        },\n      };\n      Object.keys(_newMaterial.extraProperty!).forEach((_p) => {\n        const p = _p as keyof AntaMaterialInfo['extraProperty'];\n        if ([\n          'material_status',\n          'cite_status',\n          'decline_reason',\n          'supplier_price_obj',\n          'decline_time',\n          'approve_detail',\n          'season',\n        ].find(i => i === p)) {\n          return;\n        }\n\n        if (p === 'supplier_price_array') {\n          _newMaterial.extraProperty!.supplier_price_array!.forEach((priceItem, i) => {\n            let diffPriceCount = 0;\n            Object.keys(priceItem).forEach(key => {\n              const oldPriceItem = oldMaterial.value.extraProperty!.supplier_price_array!;\n              if (priceItem[key as keyof typeof priceItem] !== oldPriceItem[i][key as keyof typeof priceItem]) {\n                diffPriceCount += 1;\n              }\n            });\n            if (diffPriceCount > 0) {\n              updateData.value[0][p] = _newMaterial.extraProperty![p];\n              updateData.value[1][p] = oldMaterial.value.extraProperty?.[p];\n              count += 1;\n            }\n          });\n        } else if (JSON.stringify(_newMaterial.extraProperty![p]) !== JSON.stringify(oldMaterial.value.extraProperty?.[p])\n          && (!!_newMaterial.extraProperty![p] || !!oldMaterial.value.extraProperty?.[p])) {\n          updateData.value[0][p] = _newMaterial.extraProperty![p];\n          updateData.value[1][p] = oldMaterial.value.extraProperty?.[p];\n          count += 1;\n        }\n      });\n\n      if (_newMaterial.materialName === oldMaterial.value.materialName && count === 0) {\n        return;\n      }\n\n      updateData.value[0].materialName = _newMaterial.materialName;\n      updateData.value[1].materialName = oldMaterial.value.materialName;\n\n      const relateId = _newMaterial.originalId;\n      if (relateId) {\n        await addOperate(groupAppId, {\n          relateId,\n          params: updateData.value,\n        });\n      }\n    }\n\n    // 修改鞋模型信息\n    function updateInfo(prop: string, value: unknown | number | string) {\n      if (typeof value === 'string') {\n        value = value.replace(/（/g, '(').replace(/）/g, ')');\n      }\n      if (prop === 'materialName') {\n        // set(updateObj.value, prop, value);\n        set(newMaterial.value, prop, value);\n      } else {\n        // 分类\n        // set(updateObj.value.extraProperty, prop, value);\n        set(newMaterial.value.extraProperty, prop, value);\n      }\n    }\n\n    // 检测表单是否通过校验,通过后返回表单数据（外部调用）\n    async function getFormData() {\n      await Promise.all([validateForm(refsForm.value!), templateForm.value?.validate()]);\n\n      let formMatarialData = {\n        materialName: propertyFromTemplate.value.materialName,\n      } as Partial<AntaMaterialInfo>;\n\n      const _propertyFromTemplate = JSON.parse(JSON.stringify(propertyFromTemplate.value));\n\n      const firstSupplier = {\n        reference_price_unit: _propertyFromTemplate.reference_price.unit,\n        reference_price_value: _propertyFromTemplate.reference_price.value,\n        cost_unit: 1,\n        cost_value: '',\n        supplier_name: _propertyFromTemplate.supplier_name,\n        delete_status: 0,\n        supplier_status: 1,\n      };\n\n      const omitList = ['materialName', 'reference_price', 'cost'];\n      omitList.forEach((i) => {\n        if (Object.hasOwnProperty.call(_propertyFromTemplate, i)) {\n          delete _propertyFromTemplate[i];\n        }\n      });\n\n\n      if (props.status === 'upload' || props.status === 'convert') {\n        // 获取大类中类名称\n        let bigType = '';\n        let midType = '';\n        if (categoryArr.value.length) {\n          bigType = categoryArr.value[0].name;\n          midType = categoryArr.value[1].name;\n        } else {\n          const checkedNodes = typeCascade.value?.getCheckedNodes();\n          bigType = checkedNodes[0].name;\n          midType = checkedNodes[1].name;\n        }\n        formMatarialData = {\n          ...formMatarialData,\n          businessType: 1,\n          extraProperty: {\n            ...newMaterial.value.extraProperty,\n            ..._propertyFromTemplate,\n            category: newMaterial.value.extraProperty.category,\n            supplier_price_array: [\n              firstSupplier,\n              // ...newMaterial.value.extraProperty.supplier_price_array.slice(1),\n            ],\n            大类: bigType,\n            中类: midType,\n            // material_number: materialNumber,\n          },\n        };\n      } else {\n        formMatarialData = {\n          ...formMatarialData,\n          businessType: 1,\n          extraProperty: {\n            ...newMaterial.value.extraProperty,\n            ..._propertyFromTemplate,\n            supplier_price_array: [\n              firstSupplier,\n              ...newMaterial.value.extraProperty.supplier_price_array!.slice(1),\n            ],\n          },\n        };\n      }\n\n      if (props.isCreator && props.status === 'edit') {\n        formMatarialData.extraProperty!.material_status = 1;\n      }\n\n      // 上传\n      if (props.status === 'upload' && isQt()) {\n        return {\n          success: true,\n          errorMsg: '',\n          material: formMatarialData,\n        };\n      }\n\n      if (props.templateMaterialId) {\n        const imgJson = {} as { [key: string]: string };\n        let renderingJson = {};\n        let fileInfo = '';\n        if (newMaterial.value.imgJson) {\n          Object.keys(newMaterial.value.imgJson).forEach((i) => {\n            imgJson[i] = newMaterial.value.imgJson![i].split('?')[0].split('/').splice(-2).join('/');\n          });\n        }\n        if (newMaterial.value.fileInfo) {\n          fileInfo = newMaterial.value.fileInfo.split('?')[0].split('/').splice(-2).join('/');\n        }\n        if (newMaterial.value.renderingJson) {\n          renderingJson = newMaterial.value.renderingJson;\n        }\n\n        formMatarialData = {\n          ...formMatarialData,\n          imgJson,\n          fileInfo,\n          renderingJson,\n        };\n      }\n      // debugger;\n\n      console.info(formMatarialData);\n\n      console.info(formMatarialData);\n\n      return formMatarialData;\n    }\n\n    onMounted(async () => {\n      // 上传\n      if (props.status === 'upload' && isQt()) {\n        host.value = await getHost();\n\n        if (host.value && root.$route.path.includes('/qt/upload/anta-material')) {\n          host.value!.on('requestAntaForm', async () => {\n            let formData = {};\n            if (templateForm.value?.notHasTemplate) {\n              formData = {\n                success: false,\n                errorMsg: '对应的分类没有模板，请更换一个有模板的分类',\n                material: null,\n              };\n            }\n            try {\n              formData = await getFormData();\n            } catch (e) {\n              formData = {\n                success: false,\n                errorMsg: '',\n                material: null,\n              };\n            }\n\n            await exec('recvAntaForm', formData);\n          });\n        }\n      }\n      window.onmousewheel = async (e) => {\n        if (isQt() && root.$route.path.includes('/qt/upload/anta-material')) {\n          if (e.target.className.includes('el-form-item') || e.target.className.includes('el-form')) {\n            await exec('onWebScrollValue', e.deltaY);\n          }\n        }\n      };\n\n      // 获取供应商信息\n      const temp = {} as { [x: string]: { id: string, name: string, originalSupplierName: string } };\n      (await fetchSupplierAll()).forEach((sup: { id: string, name: string, originalSupplierName: string }) => {\n        temp[`${sup.id}`] = sup;\n      });\n      supplierList.value = temp;\n\n      // 上传（非以此为模版）或转换、供应商\n      if (isSupplier.value && (props.status === 'upload' || props.status === 'convert') && !props.templateMaterialId) {\n        // const companyId = await getCurrentCompany()?.id || '';\n\n        // newMaterial.value.extraProperty.supplier_price_array[0].supplier_name = Object.values(supplierList.value)\n        //   .find((s) => s.companyId === companyId)?.id || '';\n\n        // propertyFromTemplate.value.supplier_name = Object.values(supplierList.value).find((s) => s.companyId === companyId)?.id || '';\n        // root.$set(propertyFromTemplate.value, 'reference_price', { value: null, unit: 1 });\n        // propertyFromTemplate.value.reference_price = { value: null, unit: 1 };\n\n        // propertyFromTemplate.value.品牌编码 = (await fetchAntaPropertyByCode('品牌编码'))[0].id;\n      }\n\n      // 以此为模版上传\n      if (props.templateMaterialId) {\n        const templateMaterial = (\n          await getMaterialInfo(props.templateMaterialId, 'cn')\n        ).data;\n\n        // $set(props, 'material', templateMaterial);\n        newMaterial.value = templateMaterial;\n\n        propertyFromTemplate.value = {\n          ...JSON.parse(JSON.stringify(newMaterial.value.extraProperty)),\n          materialName: newMaterial.value.materialName,\n          supplier_name: newMaterial.value.extraProperty.supplier_price_array![0].supplier_name,\n          reference_price: {\n            value: newMaterial.value.extraProperty.supplier_price_array![0].reference_price_value,\n            unit: newMaterial.value.extraProperty.supplier_price_array![0].reference_price_unit,\n          },\n          // cost: newMaterial.value.extraProperty.supplier_price_array![0].cost_value,\n        };\n      }\n\n      // 编辑\n      if (props.status === 'edit') {\n        //\n        if (props.material) {\n          newMaterial.value = props.material as AntaMaterialInfo;\n        }\n        propertyFromTemplate.value = {\n          ...JSON.parse(JSON.stringify(newMaterial.value.extraProperty)),\n          materialName: newMaterial.value.materialName,\n          supplier_name: newMaterial.value.extraProperty.supplier_price_array![0].supplier_name,\n          reference_price: {\n            value: newMaterial.value.extraProperty.supplier_price_array![0].reference_price_value,\n            unit: newMaterial.value.extraProperty.supplier_price_array![0].reference_price_unit,\n          },\n          // cost: newMaterial.value.extraProperty.supplier_price_array![0].cost_value,\n        };\n        oldMaterial.value = JSON.parse(JSON.stringify(newMaterial.value)) as AntaMaterialInfo;\n      }\n\n      // 如果有分类id\n      if (newMaterial.value.extraProperty.category) {\n        const res = await fetchMaterialDetail(newMaterial.value.extraProperty.category);\n        parentIds.value = [...res.parentIds.slice(), newMaterial.value.extraProperty.category];\n      }\n    });\n\n    onUnmounted(() => {\n      window.onmousewheel = null;\n    });\n    return {\n      isQt,\n      rules,\n      addOperateToRecord,\n      updateInfo,\n      parentIds,\n      getFormData,\n      middleCategoryId,\n      typeCascade,\n      propertyFromTemplate,\n      categoryArr,\n      supplierList,\n      refsForm,\n      templateForm,\n      newMaterial,\n      canEdit,\n      setJsonschemaFormItem,\n      isSupplier,\n    };\n  },\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Form.vue?vue&type=template&id=553a3c7d&scoped=true&\"\nimport script from \"./Form.vue?vue&type=script&lang=ts&\"\nexport * from \"./Form.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Form.vue?vue&type=style&index=0&id=553a3c7d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"553a3c7d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Form.vue?vue&type=style&index=0&id=553a3c7d&lang=scss&scoped=true&\"","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useClosest = useClosest;\nexports.default = void 0;\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nvar _vueClosest = require(\"../plugins/vue-closest\");\n\n// import { InstanceOfVue } from '@/typings/vue-types.d';\nfunction useClosest(componentName) {\n  var that = (0, _compositionApi.getCurrentInstance)();\n  return (0, _compositionApi.computed)(function () {\n    if (!that) {\n      return undefined;\n    }\n\n    return _vueClosest.closest.call(that, componentName);\n  });\n}\n\nvar _default = useClosest;\nexports.default = _default;"],"sourceRoot":""}