{"version":3,"sources":["webpack:///./src/views/test/TagsEditor.tsx"],"names":["tagsEditor","props","tags","type","Array","default","editable","Boolean","required","shareId","String","relateType","render","s","this","flexWrap","map","tagItem","border","marginRight","fontSize","lineHeight","padding","borderRadius","marginBottom","color","tag","cursor","marginLeft","handleDeleteTag","useLabel","width","height","handleAddTag","label","setup","deleteTag","data","url","method","addTag","value","res","push","id","splice","indexOf"],"mappings":"qNAQMA,EAAa,6BAAgB,CACjCC,MAAO,CACLC,KAAM,CACJC,KAAMC,MACNC,QAAS,iBAAM,KAEjBC,SAAU,CACRH,KAAMI,QACNF,SAAS,EACTG,UAAU,GAEZC,QAAS,CACPN,KAAMO,OACNF,UAAU,GAEZL,KAAM,CACJA,KAAMO,OACNL,QAAS,KAEXM,WAAY,CACVR,KAAMO,OACNL,QAAS,MAGbO,OAxBiC,WAwB3B,0BACEC,EAAIC,KACV,sBAAkB,OAAlB,MAAgC,CAC9BC,SAAU,SADZ,CAIIF,EAAEX,KAAKc,KAAI,SAAAC,GAAO,sBAAgB,CAChCC,OAAQ,oBACRC,YAAa,MACbC,SAAU,OACVC,WAAY,OACZC,QAAS,WACTC,aAAc,OACdC,aAAc,MACdC,MAAO,SARS,WAUTR,EAAQS,MAVC,sCAYNb,EAAEP,WAZI,MAYY,gBAZZ,MAYmC,CACjDqB,OAAQ,UACRC,WAAY,OAdE,UAeJ,WAAQf,EAAEgB,gBAAgBZ,YAnB5C,eAsBa,cAtBb,+BAsBkCJ,EAAEP,WAAaO,EAAEiB,WAtBnD,MAsBoE,CAChEC,MAAO,OACPC,OAAQ,OACRd,OAAQ,oBACRS,OAAQ,UACRJ,aAAc,QA3BlB,UA4Bc,WAAQV,EAAEiB,UAAW,KA5BnC,cA6Ba,mBA7Bb,6CAgCmBjB,EAAEP,UAAYO,EAAEiB,WAhCnC,YAiCO,QAjCP,SAiCsBjB,EAAEoB,cAjCxB,MAiC6C,CACzCF,MAAO,SAlCX,aAgCqDlB,EAAEqB,MAhCvD,4BAgCqDrB,EAhCrD,kBAsCFsB,MAhEiC,SAgE3BlC,GACJ,IAAMiC,EAAQ,iBAAI,IACZJ,EAAW,kBAAI,GAFZ,SAGMM,EAHN,gGAGT,WAAyBC,GAAzB,iGACQ,eAAM,CACVC,IAAK,mCACLC,OAAQ,OACRF,SAJJ,2CAHS,iCAUMG,EAVN,gGAUT,WAAsBtC,GAAtB,kGACUO,EAA8BR,EAA9BQ,QAASN,EAAqBF,EAArBE,KAAMQ,EAAeV,EAAfU,WADzB,SAEgB,eAAM,CAClB2B,IAAK,iCACLC,OAAQ,OACRF,KAAM,CACJ5B,UACAN,OACAQ,aACAT,UATN,uCAWMmC,MAXN,2CAVS,iCAuBMJ,IAvBN,6FAuBT,sHACoBO,EAAO,CAACN,EAAMO,QADlC,OACQC,EADR,QAEE,EAAAzC,EAAMC,MAAKyC,KAAX,uBAAmBD,IACnBR,EAAMO,MAAQ,GACdX,EAASW,OAAQ,EAJnB,2CAvBS,iCA6BMZ,EA7BN,gGA6BT,WAA+BH,GAA/B,iGACQU,EAAU,CAACV,EAAIkB,KADvB,OAEE3C,EAAMC,KAAK2C,OAAO5C,EAAMC,KAAK4C,QAAQpB,GAAM,GAF7C,2CA7BS,wBAkCT,MAAO,CACLQ,QACAJ,WAEAG,eACAJ,sBAIS","file":"js/chunk-2d0d7d79.efafaae2.js","sourcesContent":["import axios from '@/utils/axios';\nimport { defineComponent, ref } from '@vue/composition-api';\n\ntype Tag = {\n  id: string;\n  tag: string;\n};\n\nconst tagsEditor = defineComponent({\n  props: {\n    tags: {\n      type: Array as () => Tag[],\n      default: () => [],\n    },\n    editable: {\n      type: Boolean,\n      default: true,\n      required: false,\n    },\n    shareId: {\n      type: String,\n      required: true,\n    },\n    type: {\n      type: String,\n      default: '1',\n    },\n    relateType: {\n      type: String,\n      default: '1',\n    },\n  },\n  render() {\n    const s = this as InstanceType<typeof tagsEditor>;\n    return <div class=\"flex\" style={{\n      flexWrap: 'wrap',\n    }}>\n      {\n        s.tags.map(tagItem => <div style={{\n          border: '1px solid #dbdbdb',\n          marginRight: '4px',\n          fontSize: '12px',\n          lineHeight: '18px',\n          padding: '3px 12px',\n          borderRadius: '12px',\n          marginBottom: '4px',\n          color: '#666',\n        }}>\n          <span>{tagItem.tag}</span>\n\n          <i vShow={s.editable} class='el-icon-close' style={{\n            cursor: 'pointer',\n            marginLeft: '4px',\n          }} onclick={() => { s.handleDeleteTag(tagItem); }}></i>\n        </div>)\n      }\n      <div class='flex-center' vShow={s.editable && !s.useLabel} style={{\n        width: '24px',\n        height: '24px',\n        border: '1px solid #dbdbdb',\n        cursor: 'pointer',\n        borderRadius: '12px',\n      }} onclick={() => { s.useLabel = true; }}>\n        <i class='el-icon-plus'></i>\n      </div>\n\n      <el-input vShow={s.editable && s.useLabel} vModel={s.label}\n      size='mini' onblur={s.handleAddTag} style={{\n        width: '200px',\n      }}></el-input>\n    </div>;\n  },\n  setup(props) {\n    const label = ref('');\n    const useLabel = ref(false);\n    async function deleteTag(data: string[]) {\n      await axios({\n        url: '/bff-center/showCommon/deleteTag',\n        method: 'POST',\n        data,\n      });\n    }\n    async function addTag(tags: string[]) {\n      const { shareId, type, relateType } = props;\n      return (await axios({\n        url: '/bff-center/showCommon/addTags',\n        method: 'POST',\n        data: {\n          shareId,\n          type,\n          relateType,\n          tags,\n        },\n      })).data;\n    }\n    async function handleAddTag() {\n      const res = await addTag([label.value]) as Tag[];\n      props.tags.push(...res);\n      label.value = '';\n      useLabel.value = false;\n    }\n    async function handleDeleteTag(tag: Tag) {\n      await deleteTag([tag.id]);\n      props.tags.splice(props.tags.indexOf(tag), 1);\n    }\n\n    return {\n      label,\n      useLabel,\n\n      handleAddTag,\n      handleDeleteTag,\n    };\n  },\n});\nexport default tagsEditor;\n"],"sourceRoot":""}