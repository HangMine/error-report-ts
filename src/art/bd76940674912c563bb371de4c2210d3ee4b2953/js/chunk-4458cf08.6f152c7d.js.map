{"version":3,"sources":["webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-loader.js","webpack:///./src/views/supplier-backend/preview/materials/OrderSelector.vue?f962","webpack:///./src/views/supplier-page/preview/materials.ts","webpack:///./src/views/supplier-backend/preview/materials/OrderSelector.vue","webpack:///./src/views/supplier-backend/preview/materials/OrderSelector.vue?77b4","webpack:///./src/views/supplier-backend/preview/materials/OrderSelector.vue?0626","webpack:///./src/views/supplier-backend/preview/materials/index.tsx","webpack:///./src/utils/composables/use-callback-when-last-element-shown.ts","webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-closest.js"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","default","_regenerator","_asyncToGenerator2","_defineProperty2","_compositionApi","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defaultOptions","initialValue","undefined","loadingValue","oldValue","useLoader","loader","oldWatcher","params","_ref","_ref$initialValue","_ref$loadingValue","r","reactive","watchSource","resultRef","ref","tmp","that","getCurrentInstance","loaderPromiseRef","$on","mark","_callee2","wrap","_context2","prev","next","watch","_ref3","_callee","_loaderPromiseRef","_context","sent","stop","_x","this","immediate","s","_ref4","_callee3","_tmp","_context3","isRef","__tmp","_x2","_default","render","staticRenderFns","items","label","t","name","orderSelector","props","orderBy","type","String","asc","Boolean","self","map","item","active","activeItemLabel","changeOrder","setup","emit","find","order","component","materialsList","keyword","companyId","supplierArticleName","size","Number","preview","MaterialItem","$props","materialItem","publicPart","goods","e","index","id","previewList","$router","query","$route","path","materialType","colorFamiry","totalPage","currentPage","root","fetchGoodsList","page","useFilters","url","method","data","orders","searchs","filters","res","args","pages","records","loadMore","targetPage","Array","isArray","replace","toString","list","imgJson","thumbnail","$ImageViewer","show","targetElems","callbackWhenLastElementShown","callback","targetSelectorOrSelector","io","watcher","currentVm","nL","$nextTick","targets","$el","querySelectorAll","IntersectionObserver","entries","obs","entry","intersectionRatio","unobserve","rootMargin","threshold","observe","terminate","disconnect","callbackWhenLastElementShownNotCompositionVersion","listName","$watch","children","childElementCount","beforeDestroy","$options","call","useClosest","_vueClosest","componentName","computed","closest"],"mappings":"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","file":"js/chunk-4458cf08.6f152c7d.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar defaultOptions = {\n  initialValue: undefined,\n  loadingValue: function loadingValue(oldValue) {\n    return oldValue;\n  }\n};\n\nfunction useLoader(loader) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOptions,\n      _ref$initialValue = _ref.initialValue,\n      initialValue = _ref$initialValue === void 0 ? defaultOptions.initialValue : _ref$initialValue,\n      _ref$loadingValue = _ref.loadingValue,\n      loadingValue = _ref$loadingValue === void 0 ? defaultOptions.loadingValue : _ref$loadingValue;\n\n  var r = (0, _compositionApi.reactive)(params);\n\n  var watchSource = function watchSource() {\n    return _objectSpread({}, r);\n  };\n\n  var resultRef = (0, _compositionApi.ref)(initialValue);\n  var tmp = (0, _compositionApi.ref)(null);\n  var that = (0, _compositionApi.getCurrentInstance)();\n  var loaderPromiseRef = (0, _compositionApi.ref)();\n  if (!that) return;\n  that.$on('hook:created', /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            loaderPromiseRef.value = loader(watchSource());\n            (0, _compositionApi.watch)(loaderPromiseRef, /*#__PURE__*/function () {\n              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_loaderPromiseRef) {\n                return _regenerator.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        resultRef.value = loadingValue(resultRef.value);\n                        _context.next = 3;\n                        return _loaderPromiseRef;\n\n                      case 3:\n                        tmp.value = _context.sent;\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), {\n              immediate: true\n            });\n            _context2.next = 4;\n            return loaderPromiseRef.value;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })));\n  var oldWatcher;\n  (0, _compositionApi.watch)(watchSource, function (s) {\n    if (oldWatcher) {\n      oldWatcher();\n    }\n\n    loaderPromiseRef.value = loader(s);\n  });\n  (0, _compositionApi.watch)(tmp, /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(_tmp) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if ((0, _compositionApi.isRef)(_tmp)) {\n                oldWatcher = (0, _compositionApi.watch)(_tmp, function (__tmp) {\n                  resultRef.value = __tmp;\n                }, {\n                  immediate: true\n                });\n              } else {\n                resultRef.value = _tmp;\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }()); // eslint-disable-next-line consistent-return\n\n  return resultRef;\n}\n\nvar _default = useLoader;\nexports.default = _default;","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderSelector.vue?vue&type=style&index=0&id=6db7c63d&lang=scss&scoped=true&\"","import materials from '@/views/supplier-backend/preview/materials';\n\nexport default materials;\n","var render, staticRenderFns\nimport script from \"./OrderSelector.vue?vue&type=script&lang=tsx&\"\nexport * from \"./OrderSelector.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./OrderSelector.vue?vue&type=style&index=0&id=6db7c63d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6db7c63d\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent, ref, computed } from '@vue/composition-api';\nimport i18n from 'i18next';\n\nexport type orderBy = 'Most viewed' | 'Time' | 'Price';\n\nconst items = [\n  {\n    label: i18n.t('supplier-backend.preview.most_viewed'),\n    name: 'click',\n  },\n  {\n    label: i18n.t('supplier-backend.preview.time'),\n    name: 'gmtStoreTime',\n  },\n  // {\n  //   label: 'Price',\n  //   name: 'price',\n  // },\n];\n\nconst orderSelector = defineComponent({\n  props: {\n    orderBy: {\n      type: String as () => orderBy,\n    },\n    asc: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  render() {\n    const self = this as InstanceType<typeof orderSelector>;\n    return (\n      <div class='flex-justify-flex-end order-group'>\n        {items.map(item => {\n          return (\n            <div class={{\n              'order-item': true,\n              active: item.label === self.activeItemLabel,\n              'flex-vertical-center': true,\n            }}\n            onclick={() => self.changeOrder(item)}>\n              {item.label}\n              {item.label !== self.activeItemLabel\n                ? <i class='iconfont iconjiantoushang'></i>\n                : self.asc\n                  ? <i class='iconfont iconjiantoushang'></i>\n                  : <i class='iconfont iconjiantouxia'></i>}\n            </div>\n          );\n        })}\n      </div>\n    );\n  },\n  setup(props, { emit }) {\n    const activeItemLabel = computed(() => items.find(item => item.name === props.orderBy)?.label);\n    async function changeOrder(item: (typeof items)[0]) {\n      if (activeItemLabel.value !== item.label) {\n        emit('change', {\n          order: item.name,\n          asc: true,\n        });\n      } else {\n        emit('change', {\n          order: item.name,\n          asc: !props.asc,\n        });\n      }\n      return item;\n    }\n    return {\n      activeItemLabel,\n\n      changeOrder,\n    };\n  },\n});\nexport default orderSelector;\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderSelector.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderSelector.vue?vue&type=script&lang=tsx&\"","import { defineComponent } from '@vue/composition-api';\nimport i18n from 'i18next';\nimport axios from '@/api/axios';\nimport useLoader from '_/composables/use-loader';\nimport useClosest from '_/composables/use-closest';\nimport { callbackWhenLastElementShown } from '@/utils/composables/use-callback-when-last-element-shown';\nimport Preview from '../index.vue';\nimport OrderSelector from './OrderSelector.vue';\n// import MaterialItem from '../components/MaterialItemDesignerVersion';\nconst materialsList = defineComponent({\n  name: 'MaterialPreview',\n  props: {\n    keyword: {\n      type: String,\n      default: null,\n    },\n    orderBy: {\n      type: String,\n      default: 'click',\n    },\n    asc: {\n      type: Boolean,\n      default: false,\n    },\n    companyId: {\n      type: String,\n      default: '',\n    },\n    supplierArticleName: {\n      type: String,\n    },\n    size: {\n      type: Number,\n    },\n    // materialItem: {\n    //   type: Object as () => typeof Vue,\n    //   required: true,\n    // },\n  },\n  render() {\n    const self = this as InstanceType<typeof materialsList>;\n    // const MaterialItem = self.materialItem;\n    const preview = useClosest<typeof Preview>('Preview')?.value;\n    const MaterialItem = preview?.$props.materialItem;\n\n    const publicPart = <main class='flex-center scrollable-y list-wrapper'\n    >\n      {\n        self.goods\n          ? (\n            self.goods.length\n              ? <ul class='flex main-content'\n                style='flex-wrap:wrap;'>\n                {self.goods.map(\n                  (e: any, index: number) => <MaterialItem materialInfo={e}\n                  key={e.id}\n                  class='material-good-item'\n                  onpreview={() => self.previewList(index)}\n                  oncolor-family={() => self.$router.push({\n                    query: {\n                      ...self.$route.query,\n                      supplierArticleName: e.supplierArticleName,\n                    },\n                  })}\n                  onsimilarity={() => self.$router.push({\n                    path: '/material-mall/searchsimilar',\n                    query: {\n                      type: e.materialType || '',\n                      colorFamiry: e.colorFamiry || '',\n                    },\n                  })}/>,\n                )}\n              </ul>\n              : <div class='flex-center' style='height: 300px;'>{ i18n.t('supplier-backend.preview.no_product') }</div>\n          )\n          : <div class='flex-center' vLoading={true} style='height: 300px;'></div>\n      }\n    </main>;\n\n    if (self.supplierArticleName) {\n      return (\n        <section style='flex:1;' key={self.supplierArticleName}>\n          {/* <div class='flex-center'>\n            <div style='color: #999; padding: 30px 0 20px 14px;' class='main-content'>\n              <span onclick={() => self.$router.push({\n                query: {\n                  ...self.$route.query,\n                  supplierArticleName: undefined,\n                },\n              })}\n              style='cursor: pointer;'>\n                <i class='el-icon-arrow-left'></i>\n                { i18n.t('supplier-backend.preview.go_back') }\n              </span>\n              &nbsp;<span>| { i18n.t('supplier-backend.preview.material_swatch') }</span>\n            </div>\n          </div> */}\n\n          {publicPart}\n        </section>\n      );\n    }\n    return (\n      <section style='flex:1;'>\n        <div class='flex-center'>\n          <div class='main-content'>\n\n            {/* <Searchbar keyword={self.keyword} onchange={self.changeKeyword}/> */}\n            <OrderSelector style='margin-right: 14px;'\n            orderBy={self.orderBy as any} asc={self.asc} onchange={self.changeOrder}/>\n          </div>\n        </div>\n\n        {publicPart}\n\n      </section>\n    );\n  },\n  setup(props, { root }) {\n    let totalPage: number;\n    async function fetchGoodsList({\n      companyId = props.companyId,\n      keyword = props.keyword,\n      orderBy = props.orderBy,\n      asc = props.asc,\n      supplierArticleName = props.supplierArticleName,\n      page = 1,\n      size = props.size,\n    }) {\n      const useFilters = !!supplierArticleName;\n      const res = (await axios({\n        url: '/mall/supplier/materials/published',\n        method: 'post',\n        data: {\n          page,\n          size,\n          orders: [{\n            name: orderBy,\n            value: asc,\n          }],\n          searchs: keyword,\n          filters: useFilters ? [\n            {\n              name: 'companyId',\n              value: companyId,\n            },\n            {\n              name: 'supplierArticleName',\n              value: supplierArticleName,\n            },\n          ] : [\n            {\n              name: 'companyId',\n              value: companyId,\n            },\n          ],\n        },\n      })).data;\n      return res;\n    }\n    let currentPage: number;\n    const goods = useLoader(async (args) => {\n      const res = await fetchGoodsList(args);\n      currentPage = 1;\n      totalPage = res.pages;\n      return res.records;\n    }, props);\n\n\n    async function loadMore(targetPage = currentPage + 1) {\n      if (Array.isArray(goods.value) && targetPage <= totalPage) {\n        goods.value.push(...(await fetchGoodsList({\n          ...props,\n          page: targetPage,\n        })).records);\n        currentPage++;\n      }\n    }\n\n    if (!props.size) {\n      callbackWhenLastElementShown(goods, loadMore, '.material-good-item');\n    }\n\n    // let iObserver:IntersectionObserver;\n\n    // watch(() => goods?.value, async (nL) => {\n    //   if (nL) {\n    //     if (iObserver) iObserver.disconnect();\n    //     await root.$nextTick();\n    //     const targets = document.querySelectorAll('.material-good-item');\n    //     const target = targets[targets.length - 1];\n    //     console.log(target);\n    //     iObserver = new IntersectionObserver(() => loadMore(), {\n    //       threshold: 1,\n    //     });\n    //     iObserver.observe(target);\n    //   }\n    // });\n    async function changeOrder(order: {order: string, asc: boolean}) {\n      const { query } = root.$route;\n      root.$router.replace({\n        query: {\n          ...query,\n          orderBy: order.order,\n          asc: order.asc.toString(),\n        },\n      });\n    }\n\n    async function previewList(index: number) {\n      const list = goods?.value.map((e: any) => e?.imgJson?.thumbnail) as String[];\n      await root.$ImageViewer.show(list, {\n        index,\n        targetElems: '.material-img',\n      });\n    }\n\n    return {\n      goods,\n\n      changeOrder,\n      loadMore,\n      previewList,\n    };\n  },\n});\n\nexport default materialsList;\n","import {\n  watch, Ref, getCurrentInstance, onUnmounted, onMounted,\n} from '@vue/composition-api';\nimport Vue from 'vue';\nimport 'intersection-observer';\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelector: string\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, container: Ref<Element>\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelectorOrSelector: string | Ref<Element>,\n) {\n  let io:IntersectionObserver;\n  let watcher: any;\n  const currentVm = getCurrentInstance();\n  onMounted(() => {\n    watcher = watch(() => list?.value, async (nL) => {\n      if (nL && nL.length && nL.length > 0) {\n        await currentVm?.$nextTick();\n        let target: Element;\n        if (typeof targetSelectorOrSelector === 'string') {\n          const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n          target = targets[targets.length - 1];\n        } else {\n          target = targetSelectorOrSelector.value;\n        }\n        io = new IntersectionObserver((entries, obs) => {\n          entries.forEach(entry => {\n            if (entry.intersectionRatio > 0.9 && entry.target === target) {\n              obs.unobserve(entry.target);\n              callback();\n            }\n          });\n        }, {\n          root: null,\n          rootMargin: '0px 0px 0px 0px',\n          threshold: 0.9,\n        });\n        io.observe(target);\n      }\n    }, {\n      immediate: true,\n    });\n  });\n  const terminate = () => {\n    if (watcher) {\n      watcher();\n    }\n    if (io) {\n      io.disconnect();\n    }\n  };\n  onUnmounted(terminate);\n  return terminate;\n}\n\nexport function callbackWhenLastElementShownNotCompositionVersion(\n  listName: string, callback: ()=> any, targetSelectorOrSelector: string | Element,\n) {\n  let io:IntersectionObserver;\n  // @ts-ignore\n  const currentVm = (this as InstanceType<typeof Vue>);\n  currentVm.$watch(listName, async (nL) => {\n    if (nL && nL.length > 0) {\n      await currentVm.$nextTick();\n\n      let target;\n\n      if (typeof targetSelectorOrSelector === 'string') {\n        const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n        target = targets[targets.length - 1];\n        // console.log(target);\n      } else {\n        target = targetSelectorOrSelector.children[targetSelectorOrSelector.childElementCount - 1];\n      }\n      io = new IntersectionObserver((entries, obs) => {\n        entries.forEach(entry => {\n          // console.log(entry.intersectionRatio);\n          if (entry.intersectionRatio === 1) {\n            obs.unobserve(entry.target);\n            callback();\n          }\n        });\n      }, {\n        root: null,\n        rootMargin: '0px 0px 0px 0px',\n        threshold: 1,\n      });\n      io.observe(target);\n    }\n  });\n  const { beforeDestroy } = currentVm.$options;\n  currentVm.$options.beforeDestroy = function newBeforeDestroy() {\n    // console.log('beforedestroy');\n    if (io) {\n      io.disconnect();\n    }\n    if (beforeDestroy) {\n      beforeDestroy.call(currentVm);\n    }\n  };\n}\n\nexport default callbackWhenLastElementShown;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useClosest = useClosest;\nexports.default = void 0;\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nvar _vueClosest = require(\"../plugins/vue-closest\");\n\n// import { InstanceOfVue } from '@/typings/vue-types.d';\nfunction useClosest(componentName) {\n  var that = (0, _compositionApi.getCurrentInstance)();\n  return (0, _compositionApi.computed)(function () {\n    if (!that) {\n      return undefined;\n    }\n\n    return _vueClosest.closest.call(that, componentName);\n  });\n}\n\nvar _default = useClosest;\nexports.default = _default;"],"sourceRoot":""}