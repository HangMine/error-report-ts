{"version":3,"sources":["webpack:///./src/views/up-meeting/shoe/components/shoeInfoSchema.js","webpack:///./src/views/up-meeting/shoe/components/shoeInfo.vue?e9a9","webpack:///./node_modules/@4dst-saas/public-utils/dist/difference.js","webpack:///./src/views/up-meeting/shoe/index.vue?5a5a","webpack:///./src/views/up-meeting/shoe/components/shoeInfo.vue","webpack:///./src/views/up-meeting/shoe/index.vue","webpack:///./src/views/up-meeting/shoe/components/shoeInfo.vue?5d01","webpack:///./src/views/up-meeting/shoe/components/shoeInfo.vue?9469","webpack:///./src/views/up-meeting/shoe/index.vue?136e","webpack:///./src/views/up-meeting/shoe/index.vue?612e","webpack:///./src/components/base/TagsEditor.vue?c58a","webpack:///./src/components/base/TagsEditor.vue?b8fb","webpack:///./src/components/base/TagsEditor.vue?6227","webpack:///./src/components/base/TagsEditor.vue","webpack:///./src/components/base/TagsEditor.vue?2e17"],"names":["schema","prop","title","i18n","t","type","required","oneOf","const","label","value","sort","class","properties","toFixed","unit","language","inputType","rows","difference","a","b","fn","filter","aItem","i","findIndex","bItem","indexOf","include","Object","defineProperty","exports","default","_default","staticRenderFns","testForm","name","components","TagsEditor","props","jsonschema","Array","form","setup","formRef","validate","render","this","component","ModelInfo","shoeInfoForm","shoeInfo","catalogId","String","dialogify","noPadding","height","width","flex","destroyOnClose","root","emit","attachment","shoeForm","albumRef","model","JSON","parse","stringify","relateInfo","modelNumber","imgList","binaryFileInfoList","submit","upload","length","Error","getBinaryFileList","formBinaryFileInfoList","formData","price","monetaryUnit","bindRelateCatalogId","imgDeleteList","id","map","item","binaryFileInfoDeleteList","coverImage","find","isCover","path","axios","url","method","data","apiData","$message","info","get","params","relateId","uploadedImgList","img","includes","parentId","appType","filesParentId","cursor","limit","uploadedBinaryFileInfoList","records","file","downloadPath","fileInfo","formSet","bindRelateType","$emit","_vm","_h","$createElement","_c","_self","staticClass","_l","tag","key","attrs","editable","on","$event","handleClose","staticStyle","_v","_s","tags","maxTagsLen","ref","maxlength","handleInputConfirm","nativeOn","_k","keyCode","callback","$$v","inputValue","expression","showInput","_e","tagIds","shareId","Number","relateType","Boolean","$nextTick","$errHandler","inputVisible","saveTagInput","$refs","input","focus","trim","push","splice","err"],"mappings":"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","file":"js/chunk-ba1e4e6c.be4d3a2a.js","sourcesContent":["import { i18n } from '@/i18n';\n\nconst schema = [{\n  prop: 'modelNumber',\n  title: i18n.t('model.info.style_name'),\n  type: 'string',\n  required: true,\n}, {\n  prop: 'style',\n  title: i18n.t('model.info.itemNumber'),\n  type: 'string',\n}, {\n  prop: 'category',\n  title: i18n.t('model.info.category'),\n  type: 'string',\n}, {\n  prop: 'gender',\n  title: i18n.t('model.info.gender'),\n  type: 'string',\n  oneOf: [\n    {\n      type: 'string',\n      const: {\n        label: i18n.t('material.info.men'),\n        value: '1',\n      },\n    }, {\n      type: 'string',\n      const: {\n        label: i18n.t('material.info.women'),\n        value: '2',\n      },\n    }, {\n      type: 'string',\n      const: {\n        label: i18n.t('material.info.children'),\n        value: '3',\n      },\n    },\n  ],\n}, {\n  prop: 'season',\n  title: i18n.t('model.info.season'),\n  type: 'string',\n}, {\n  prop: 'price',\n  title: i18n.t('model.info.price'),\n  type: 'object',\n  sort: ['value', 'unit'],\n  class: 'price-item',\n  properties: {\n    value: {\n      type: 'number',\n      prop: 'value',\n      // required: [],\n      toFixed: 3,\n    },\n    unit: {\n      type: 'string',\n      prop: 'unit',\n      oneOf: [\n        {\n          type: 'string',\n          const: {\n            label: i18n.language === 'en' ? 'CNY' : '人民币',\n            value: 'CNY',\n          },\n        }, {\n          type: 'string',\n          const: {\n            label: i18n.language === 'en' ? 'USD' : '美元',\n            value: 'USD',\n          },\n        },\n      ],\n    },\n  },\n}, {\n  prop: 'series',\n  title: i18n.t('model.info.collection'),\n  type: 'string',\n}, {\n  prop: 'waveband',\n  title: i18n.t('model.info.waveband'),\n  type: 'string',\n}, {\n  prop: 'designerName',\n  title: i18n.t('model.info.designer'),\n  type: 'string',\n}, {\n  prop: 'designerLeader',\n  title: i18n.t('model.info.designerLeader'),\n  type: 'string',\n}, {\n  prop: 'craftsman',\n  title: i18n.t('model.info.technician'),\n  type: 'string',\n}, {\n  prop: 'lastNumber',\n  title: i18n.t('model.info.last_number'),\n  type: 'string',\n}, {\n  prop: 'soleNumber',\n  title: i18n.t('model.info.outsole_number'),\n  type: 'string',\n}, {\n  prop: 'heelNumber',\n  title: i18n.t('model.info.heel_number'),\n  type: 'string',\n// }, {\n//   prop: 'tags',\n//   title: i18n.t('model.info.style_name'),\n//   type: 'object',\n//   builder: 'TagsEditor',\n}, {\n  prop: 'notes',\n  title: i18n.t('model.info.notes'),\n  type: 'string',\n  inputType: 'textarea',\n  rows: 4,\n}];\n\nexport default schema;\n","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoeInfo.vue?vue&type=style&index=0&id=6e7776c5&lang=scss&scoped=true&\"","\"use strict\";\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.find-index\");\n\nrequire(\"core-js/modules/es.array.index-of\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.difference = difference;\nexports.default = void 0;\n\n/**\n * 得出b相对于a补集（a里边找b没有的）\n * @see https://zh.wikipedia.org/wiki/%E8%A1%A5%E9%9B%86\n * @param a数组\n * @param b数组\n * @param fn 用于对比的方法\n */\nfunction difference(a, b, fn) {\n  return a.filter(function (aItem) {\n    var i = fn ? b.findIndex(function (bItem) {\n      return fn(aItem, bItem);\n    }) : b.indexOf(aItem);\n    var include = i === -1;\n    return include;\n  });\n}\n\nvar _default = difference;\nexports.default = _default;","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=6361e1aa&lang=scss&scoped=true&\"","var render, staticRenderFns\nimport script from \"./shoeInfo.vue?vue&type=script&lang=tsx&\"\nexport * from \"./shoeInfo.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./shoeInfo.vue?vue&type=style&index=0&id=6e7776c5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e7776c5\",\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=tsx&\"\nexport * from \"./index.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=6361e1aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6361e1aa\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent, ref } from '@vue/composition-api';\nimport Jsonschema2Form from '@4dst-saas/form-utils/dist/components/jsonschema2form';\nimport Jsonschema from '@4dst-saas/form-utils/dist/components/jsonschema2form/JSONschema';\nimport TagsEditor from '@/components/base/TagsEditor.vue';\nimport { i18n } from '@/i18n';\nimport schema from './shoeInfoSchema';\n\n\nconst testForm = defineComponent({\n  name: 'testForm',\n  components: {\n    TagsEditor,\n  },\n  props: {\n    jsonschema: {\n      type: Array as () => Jsonschema[],\n      default: () => schema,\n    },\n    form: {\n      type: Object,\n      required: true,\n    },\n\n  },\n  setup() {\n    // const form = ref({});\n    const formRef = ref(null);\n\n    const validate = () => {\n      return formRef.value.validate();\n    };\n\n    return {\n      // form,\n      formRef,\n      validate,\n\n    };\n  },\n\n  render() {\n    return <div>\n      <div style=\"font-size: 16px;color: #222222;padding-bottom: 10px;\">{i18n.t('up-meeting.detail.product_info')}</div>\n      <Jsonschema2Form\n        ref='formRef'\n        jsonschema={this.jsonschema}\n        class=\"form\"\n        size=\"small\"\n        form={this.form}\n        labelPosition='top'>\n      </Jsonschema2Form>\n    </div>;\n  },\n});\n\nexport default testForm;\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoeInfo.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shoeInfo.vue?vue&type=script&lang=tsx&\"","\nimport {\n  defineComponent, onMounted, ref,\n} from '@vue/composition-api';\nimport difference from '_/difference';\nimport { i18n } from '@/i18n';\nimport Shoe from '@/models/Shoe';\nimport Album from '@/views/up-meeting/components/Album.vue';\nimport axios from '@/utils/axios';\n// import Attachment from '../../dialogComponents/Attachment.vue';\nimport Attachment from '../dialogComponents/Attachment.vue';\nimport shoeInfoForm from './components/shoeInfo.vue';\n\n\nconst ModelInfo = defineComponent({\n  name: 'ModelInfo',\n  components: {\n    shoeInfoForm,\n  },\n  props: {\n    catalogId: {\n      type: String,\n      // required: true,\n    },\n    shoeInfo: {\n      type: Object,\n      required: true,\n    },\n  },\n  dialogify: {\n    props: {\n      title: i18n.t('up-meeting.detail.edit'),\n      noPadding: true,\n      height: '700px',\n      width: '587px',\n      flex: 'column',\n      destroyOnClose: true,\n    },\n\n  },\n  setup(props, { root, emit }) {\n    const attachment = ref<InstanceType<typeof Attachment>>(null);\n    const shoeForm = ref<InstanceType<typeof shoeInfoForm>>(null);\n    const albumRef = ref<InstanceType<typeof Album>>(null);\n\n    const model = ref<{ [key: string]: any; } | null>(null);\n    model.value = JSON.parse(JSON.stringify(props.shoeInfo.relateInfo)) ?? null;\n\n    const form = ref<{ [key: string]: any }>({\n      modelNumber: '',\n    });\n\n    const imgList = ref([]);\n    const binaryFileInfoList = ref([]);\n\n    const submit = async () => {\n      try {\n        // 校验表单数据\n        await shoeForm.value.validate();\n        // 上传图册\n        // await validateForm(shoeForm.value as ElForm);\n        await albumRef.value.upload();\n        if (imgList.value.length === 0) {\n          throw new Error('展示图册不能为空');\n        }\n        // 获取附件\n        const formBinaryFileInfoList = await attachment.value.getBinaryFileList();\n        // 整理表单信息\n        const formData: { [key: string]: any } = {\n          ...model.value,\n          ...form.value,\n          price: form.value.price.value,\n          monetaryUnit: form.value.price.unit,\n        };\n\n        if (props.shoeInfo.bindRelateCatalogId) {\n          formData.imgDeleteList = [\n            ...(formData.imgDeleteList ?? []),\n            ...difference(\n              model.value!.imgList,\n              imgList.value,\n              (a: { id: string }, b: { id: string }) => a.id === b.id,\n            ).map(i => i.id)];\n          formData.imgList = imgList.value.filter(item => !item.id);\n\n          formData.binaryFileInfoDeleteList = [\n            ...(formData.binaryFileInfoDeleteList ?? []),\n            ...difference(\n              model.value!.binaryFileInfoList,\n              formBinaryFileInfoList,\n              (a, b) => a.id === b.id,\n            ).map(i => i.id!),\n          ];\n          formData.binaryFileInfoList = formBinaryFileInfoList.filter(item => !item.id);\n        } else {\n          formData.imgList = imgList.value;\n          formData.binaryFileInfoList = formBinaryFileInfoList;\n        }\n        const coverImage = imgList.value.find(i => i.isCover === 1)?.path ?? imgList.value[0].path;\n\n        // console.info({\n        //   ...props.shoeInfo,\n        //   coverImage,\n        //   relateInfo: {\n        //     ...model.value,\n        //     ...formData,\n        //   },\n        // });\n\n        let apiData;\n\n        if (!props.catalogId) {\n          apiData = (await axios({\n            url: '/meeting/column/item/update',\n            method: 'POST',\n            data: {\n              ...props.shoeInfo,\n              coverImage,\n              relateInfo: {\n                ...model.value,\n                ...formData,\n                catalogId: props.shoeInfo.bindRelateCatalogId,\n              },\n            },\n          })).data;\n        } else {\n          apiData = (await axios({\n            url: '/meeting/column/item/release/update',\n            method: 'POST',\n            data: {\n              ...props.shoeInfo,\n              coverImage,\n              relateInfo: {\n                ...model.value,\n                ...formData,\n                catalogId: props.shoeInfo.bindRelateCatalogId,\n              },\n            },\n          })).data;\n        }\n\n        emit('confirm', apiData);\n      } catch (e) {\n        root.$message.info(e);\n      }\n    };\n\n    onMounted(async () => {\n      if (props.shoeInfo.bindRelateCatalogId) {\n        // 获取图册\n        const uploadedImgList = (await axios.get('/show/album/imgs', { params: { relateId: props.shoeInfo.bindRelateCatalogId } })).data;\n        imgList.value = JSON.parse(JSON.stringify([\n          ...uploadedImgList.filter(img => !model.value!.imgDeleteList?.includes(img.id)),\n          ...(model.value!.imgList ?? []),\n        ]));\n        // 缓存初始数据\n        model.value!.imgList = JSON.parse(JSON.stringify(imgList.value));\n        // 获取附件\n        // 获取保存附件的系统目录id\n        const filesParentId = (await axios.get('/catalogue/yunpanCatalog/getSystemAppChildCountByParentId', {\n          params: {\n            parentId: props.shoeInfo.bindRelateCatalogId,\n            appType: 11002,\n          },\n        })).data;\n\n        // 通过系统目录ID获取item\n        const uploadedBinaryFileInfoList = (await axios.get('bff-center/cloud-disk/list/getChildCatalogByPage', {\n          params: {\n            catalogId: filesParentId,\n            cursor: 1,\n            limit: 20,\n          },\n        })).data.records;\n\n        binaryFileInfoList.value = JSON.parse(JSON.stringify([\n          ...uploadedBinaryFileInfoList.filter(img => !model.value!.binaryFileInfoDeleteList?.includes(img.id)).map(file => ({\n            id: file.id,\n            downloadPath: file.fileInfo.downloadPath,\n            name: file.name,\n          })),\n          ...(model.value!.binaryFileInfoList ?? []),\n        ]));\n\n        // 缓存初始数据\n        model.value!.binaryFileInfoList = JSON.parse(JSON.stringify(binaryFileInfoList.value));\n      } else {\n        imgList.value = JSON.parse(JSON.stringify(model.value!.imgList));\n        binaryFileInfoList.value = JSON.parse(JSON.stringify(model.value!.binaryFileInfoList));\n      }\n\n      // 设置表单数据\n      // const formSet = JSON.parse(JSON.stringify(model.value!.relateInfo));\n      const formSet = JSON.parse(JSON.stringify(model.value!));\n      formSet.price = { value: formSet.price, unit: formSet.monetaryUnit };\n\n      form.value = formSet;\n    });\n\n    return {\n      submit,\n      attachment,\n      shoeForm,\n      albumRef,\n      model,\n      form,\n      imgList,\n      binaryFileInfoList,\n    };\n  },\n\n  render() {\n    const { submit } = this;\n\n    return <div class=\"material-info flex-column\">\n      <div class=\"flex-1 scrollable-y\">\n\n        {this.form\n          ? [\n            <Album ref=\"albumRef\"\n              vModel={this.imgList}\n              relateType={this.shoeInfo.bindRelateType}\n              catalogId={this.shoeInfo.bindRelateCatalogId}></Album>,\n            <el-divider></el-divider>,\n            <shoeInfoForm ref=\"shoeForm\" form={this.form}></shoeInfoForm>,\n          ] : null\n        }\n        <el-divider></el-divider>\n        <Attachment ref=\"attachment\"\n          binaryFileInfoList={this.binaryFileInfoList}\n          catalogId={this.shoeInfo.bindRelateCatalogId || ''}>\n        </Attachment>\n      </div>\n      <div style=\"display: flex;flex-direction: row-reverse;padding-top:10px\">\n        <el-button round style=\"margin-left: 10px\" type=\"primary\" onclick={submit}>{i18n.t('up-meeting.detail.save')}</el-button>\n        <el-button round onclick={() => this.$emit('cancel')}>{i18n.t('up-meeting.detail.cancel')}</el-button>\n      </div>\n    </div>;\n  },\n});\n\nexport default ModelInfo;\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tags-editor-wrapper\"},[_vm._l((_vm.tags),function(tag){return _c('el-tooltip',{key:tag.id || tag.tag,attrs:{\"effect\":\"dark\",\"content\":tag.tag}},[_c('el-tag',{staticClass:\"flex-center\",attrs:{\"closable\":_vm.editable,\"disable-transitions\":false},on:{\"close\":function($event){return _vm.handleClose(tag.id)}}},[_c('span',{staticClass:\"text-one-line\",staticStyle:{\"max-width\":\"150px\",\"display\":\"inline-block\"}},[_vm._v(\" \"+_vm._s(tag.tag)+\" \")])])],1)}),(_vm.editable && _vm.tags.length < _vm.maxTagsLen)?[(_vm.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"mini\",\"maxlength\":_vm.maxlength},on:{\"blur\":_vm.handleInputConfirm},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=$$v},expression:\"inputValue\"}}):_c('i',{staticClass:\"iconfont icon-add button-new-tag\",on:{\"click\":_vm.showInput}})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, ref } from '@vue/composition-api';\n// import axios from '../../../../api/axios';\nimport axios from '@/api/axios';\n\n/**\n * 新增标签\n * @param {Object} data { shareId: string, tags: string[], type: string, relateType: string, }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6116\n */\nexport const apiAddTags = (data: any) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/addTags',\n    data,\n  });\n};\n\n/**\n * 删除标签\n * @param {Array} tagIds { string[] }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6128\n */\nexport const apiRemoveTags = (tagIds: string[]) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/deleteTag',\n    data: tagIds,\n  });\n};\n\ninterface TagItem {\n  id: string,\n  tag: string,\n}\n\n// 此组件配合标签相关中台接口使用。用于标签新增、删除以及展示。\n// tags, shareId, type, relateType分别对应接口的参数，与标签的业务类型相关，不可不传\nexport default defineComponent({\n  name: 'TagsEditor',\n  props: {\n    // 标签数据\n    tags: {\n      type: Array as () => TagItem[],\n      default: () => [],\n    },\n    // 面料ID\n    shareId: {\n      type: String,\n      required: true,\n    },\n    // 所属类型  0:鞋款备注;1:面料备注;2：面料花纹;3:包包备注;4:服装备注\n    type: {\n      type: Number,\n      required: true,\n    },\n    // 类型：0鞋款 1面料 2二进制 3包包 4服装\n    relateType: {\n      type: Number,\n      required: true,\n    },\n\n    // 可编辑状态\n    editable: {\n      type: Boolean,\n      default: true,\n    },\n    // 最多输入的字符长度\n    maxlength: {\n      type: Number,\n      default: 30,\n    },\n    // 最多输入的标签数\n    maxTagsLen: {\n      type: Number,\n      default: 10,\n    },\n  },\n  setup(props, { root: { $nextTick, $errHandler } }) {\n    const inputValue = ref('');\n    const inputVisible = ref(false);\n    const saveTagInput = ref(null);\n\n    // 显示输入框\n    async function showInput() {\n      inputVisible.value = true;\n      await $nextTick();\n      (saveTagInput.value as any).$refs.input.focus();\n    }\n\n    // 上传输入框的内容\n    async function handleInputConfirm() {\n      if (inputValue.value.trim()) {\n        const { data } = await apiAddTags({\n          shareId: props.shareId,\n          type: props.type,\n          tags: [inputValue.value],\n          relateType: props.relateType,\n        });\n        props.tags.push(...data as TagItem[]);\n      }\n      inputVisible.value = false;\n      inputValue.value = '';\n    }\n\n    // 处理关闭tag按钮\n    function handleClose(id: string) {\n      const i = ((props.tags) as TagItem[]).findIndex((tag: TagItem) => tag.id === id);\n      if (i !== -1) {\n        props.tags.splice(i, 1);\n        try {\n          apiRemoveTags([id]);\n        } catch (err) {\n          $errHandler(err);\n        }\n      }\n    }\n\n    return {\n      inputValue,\n      inputVisible,\n      saveTagInput,\n      showInput,\n      handleInputConfirm,\n      handleClose,\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagsEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagsEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TagsEditor.vue?vue&type=template&id=1fe3eee9&scoped=true&\"\nimport script from \"./TagsEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./TagsEditor.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TagsEditor.vue?vue&type=style&index=0&id=1fe3eee9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1fe3eee9\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagsEditor.vue?vue&type=style&index=0&id=1fe3eee9&lang=scss&scoped=true&\""],"sourceRoot":""}