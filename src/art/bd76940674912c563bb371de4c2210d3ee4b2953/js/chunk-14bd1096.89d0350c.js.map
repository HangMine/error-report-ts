{"version":3,"sources":["webpack:///./src/views/supplier-backend/components/HForm/utils.ts","webpack:///./src/views/supplier-backend/components/HForm/index.vue","webpack:///./src/views/supplier-backend/components/HForm/index.vue?0997","webpack:///./src/views/supplier-backend/components/HForm/index.vue?6e5b","webpack:///./src/views/supplier-backend/components/HForm/index.vue?8189"],"names":["getClosetScrollEl","el","scrollHeight","clientHeight","parentElement","focus","offsetTop","HTMLElement","includes","tagName","scrollEl","scrollTo","unFalsy","_value","resetParams","formItems","params","item","type","key","multiple","childType","defaultValue","value","undefined","form2params","showFormItems","filter","show","staticRenderFns","name","inheritAttrs","props","data","Array","default","Object","cols","Number","String","gutter","disabled","Boolean","formItemProps","labelPosition","validator","showInlineTitle","setup","root","emit","refs","that","$attrs","unColsInline","inline","_gutter","currentCols","state","currentData","formItemStyle","width","toFixed","paddingRight","formStyle","marginRight","val","immediate","deep","isUndefined","setDefaultAttrs","rules","map","_rule","required","message","placeholder","title","clearable","filterable","options","ref","isRange","singlePlaceholder","rangePlaceholder","startPlaceholder","endPlaceholder","timePlaceholder","valueFormat","_class","class","defaultClass","setColsStyle","style","col","setOptions","optionsUrl","chainHanlder","_data","fns","reduce","memo","cur","handleData","handlers","_resetParams","formCheck","pass","form","validate","valid","clearCheck","$nextTick","clearValidate","oldVal","render","this","$scopedSlots","$slots","publicFormItemProps","getFormItem","itemOptions","on","nativeOn","otherProps","scopedTag","dynamicProps","attrs","getOptions","optionKey","optionTitle","optionProps","optionAttrs","size","model","formItemClass","_formItemStyle","otherFormItemProps","right","component"],"mappings":"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","file":"js/chunk-14bd1096.89d0350c.js","sourcesContent":["import Vue from 'vue';\nimport { FormItems, Obj } from './type';\n\ntype FocusComp = Vue & { focus?:Function };\ntype FocusEl = HTMLElement & { focus?:Function };\ntype FocusObj = FocusComp | FocusEl;\nconst getClosetScrollEl = (el:HTMLElement):HTMLElement|null => {\n  const { scrollHeight, clientHeight } = el;\n  if (scrollHeight > clientHeight) {\n    return el;\n  }\n  if (el.parentElement) {\n    return getClosetScrollEl(el.parentElement);\n  }\n  return null;\n};\nexport function focus(el:FocusComp, offsetTop:number):void;\nexport function focus(el:FocusEl, offsetTop:number):void;\nexport function focus(el:FocusObj, offsetTop = 0):void {\n  if (el instanceof Vue) {\n    el.focus && el.focus();\n    return;\n  }\n  if (el instanceof HTMLElement) {\n    // 只写这几种先\n    if (['INPUT', 'TEXTAREA', 'SELECT'].includes(el.tagName)) {\n      el.focus();\n    } else {\n      const scrollEl = getClosetScrollEl(el);\n\n      if (scrollEl) {\n        scrollEl.scrollTo(0, el.offsetTop + offsetTop);\n      }\n    }\n  }\n}\nexport const unFalsy = (_value:any) => _value || _value === 0;\n\nexport const resetParams = (formItems:FormItems) => {\n  const params:Obj = {};\n  // eslint-disable-next-line no-restricted-syntax\n  for (const item of formItems) {\n    switch (item.type) {\n      case 'input':\n      default:\n        params[item.key] = '';\n        break;\n      case 'select':\n        params[item.key] = item.multiple ? [] : '';\n        break;\n      case 'date':\n        switch (item.childType) {\n          case 'daterange':\n          case 'datetimerange':\n            params[item.key] = [];\n            break;\n          default:\n            params[item.key] = '';\n            break;\n        }\n        break;\n      case 'checkbox':\n        params[item.key] = [];\n        break;\n      case 'switch':\n        params[item.key] = false;\n        break;\n      case 'block':\n        break;\n    }\n    const defaultValue = item.value;\n    if (defaultValue !== undefined) params[item.key] = defaultValue;\n  }\n  return params;\n};\n\nexport const form2params = (formItems:FormItems) => {\n  const showFormItems = formItems.filter(item => {\n    return item.show !== false;\n  });\n  return resetParams(showFormItems);\n};\n","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=tsx&\"\nexport * from \"./index.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, toRefs, getCurrentInstance, watch, onMounted,\n} from '@vue/composition-api';\nimport {\n  FormItem, FormItems, Obj,\n} from './type';\n\nimport { resetParams } from './utils';\n\nexport * from './utils';\n\nexport default defineComponent({\n  name: 'h-form',\n  inheritAttrs: false,\n  props: {\n    data: {\n      type: Array as ()=> FormItems,\n      default: () => [],\n    },\n    value: {\n      type: Object,\n      default: () => ({}),\n    },\n    cols: {\n      type: [Number, String],\n    },\n    gutter: {\n      type: Number,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    formItemProps: {\n      type: Object,\n      default: () => ({}),\n    },\n    labelPosition: {\n      type: String,\n      default: 'top',\n      validator: (value:string) => ['top', 'left'].includes(value),\n    },\n    showInlineTitle: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(props, { root, emit, refs }) {\n    const that = getCurrentInstance()!;\n    const {\n      cols, gutter,\n    } = props;\n    const { $attrs } = that;\n\n    const unColsInline = $attrs.inline === '' && !cols;\n\n    const _gutter = unColsInline ? undefined : `${gutter ?? 20}px`;\n\n    const currentCols = computed(() => (cols && +cols) || 2);\n\n    const state = reactive({\n      currentData: [] as FormItems,\n      params: {} as Obj,\n      formItemStyle: computed(() => {\n        if (unColsInline) {\n        // 如果是inline并且没有传递列数，不需设置宽度\n          return {};\n        }\n        const width = `${+(100 / currentCols.value).toFixed(1)}%`;\n\n        return {\n          width,\n          paddingRight: _gutter,\n        };\n      }),\n      // 根据间隔修改h-form的marginRight,隐藏最右边宽度\n      formStyle: computed(() => {\n        return {\n          marginRight: _gutter,\n        };\n      }),\n    });\n\n    watch(() => props.value, val => {\n      state.params = val;\n    }, { immediate: true });\n\n    watch(() => state.params, val => {\n      emit('input', val);\n    }, {\n      deep: true,\n    });\n\n    const isUndefined = (val:any) => val === undefined;\n\n    const setDefaultAttrs = (item:FormItem) => {\n      // 默认是input类型\n      if (!item.type) item.type = 'input';\n      // 设置rule\n      if (item.rules) {\n        item.rules = item.rules.map(_rule => (_rule.required ? { message: '不能为空', ..._rule } : _rule));\n      }\n      // 根据类型设置\n      switch (item.type) {\n        case 'input':\n        default:\n          item.placeholder = isUndefined(item.placeholder) ? `请输入${item.title}` : item.placeholder;\n          item.clearable = item.clearable === undefined ? true : item.clearable;\n          break;\n        case 'select':\n          item.placeholder = isUndefined(item.placeholder) ? `请选择${item.title}` : item.placeholder;\n          item.clearable = item.clearable === undefined ? true : item.clearable;\n          item.filterable = item.filterable === undefined ? true : item.filterable;\n          item.options = item.options || [];\n          // 对下拉框设置ref，因为iview有BUG，可搜索时，选中后重新打开下拉列表只剩上次选中的值\n          item.ref = `select-${item.key}`;\n          break;\n        case 'checkbox':\n        case 'radio':\n          item.options = item.options || [];\n          break;\n        case 'date':\n        { const isRange = item.childType?.includes('range');\n          const singlePlaceholder = { placeholder: isUndefined(item.placeholder) ? `请选择${item.title}` : item.placeholder };\n          const rangePlaceholder = {\n            startPlaceholder: isUndefined(item.startPlaceholder) ? '开始时间' : item.startPlaceholder,\n            endPlaceholder: isUndefined(item.endPlaceholder) ? '结束时间' : item.endPlaceholder,\n          };\n          const timePlaceholder = isRange ? rangePlaceholder : singlePlaceholder;\n          item.childType = item.childType || 'date';\n          // elementUI支持时间对象转换成字符串的功能，无需手动转换\n          item.valueFormat = item.valueFormat || 'timestamp';\n          item = { ...item, ...timePlaceholder };\n          break; }\n        case 'block':\n        { item.formItemProps = item.formItemProps || {};\n          const _class = item.formItemProps?.class || '';\n          const defaultClass = 'empty-item';\n          // 暂时不想支持数组的class\n          item.formItemProps.class = typeof _class === 'string' ? `${_class} ${defaultClass}` : { ..._class, [defaultClass]: true };\n          break; }\n      }\n      return item;\n    };\n\n    const setColsStyle = (item:FormItem) => {\n      let style = {};\n      if (item.col && cols) {\n        // 如果是inline并且没有传递列数，才需设置宽度\n        const width = `${+(100 / currentCols.value).toFixed(1) * +item.col}%`;\n        style = {\n          width,\n          paddingRight: _gutter,\n        };\n      }\n      return { ...item, style: { ...style, ...item.style } };\n    };\n\n    const setOptions = (item:FormItem) => {\n      const { type, optionsUrl } = item;\n      if (!['select', 'checkbox', 'radio'].includes(type!)) return item;\n      if (!optionsUrl) return item;\n      return item;\n    };\n\n    const chainHanlder = (_data:FormItem, fns:Function[] = []) => {\n      return fns.reduce((memo, cur) => cur(memo), _data);\n    };\n\n    // 对传进来的data进行处理\n    const handleData = () => {\n      state.currentData = props.data.filter(item => item.show !== false).map(item => {\n        const handlers = [setDefaultAttrs, setColsStyle, setOptions];\n        return chainHanlder(item, handlers);\n      });\n    };\n\n    // 根据传进来的数据，生成双向绑定的初始对象\n    const _resetParams = () => {\n      state.params = resetParams(state.currentData);\n    };\n\n    // 验证--用于外部调用\n    const formCheck = () => {\n      let pass;\n      refs.form.validate((valid:boolean) => {\n        pass = valid;\n      });\n      return pass;\n    };\n\n    // 清除验证--用于外部调用\n    const clearCheck = () => {\n      // 必须使用nextTick保证在弹窗出现后执行\n      root.$nextTick(() => {\n        refs.form.clearValidate();\n      });\n    };\n\n    watch(() => props.data, (val, oldVal) => {\n      handleData();\n      _resetParams();\n    }, {\n      immediate: true,\n    });\n\n    // onMounted(() => {\n    //   handleData();\n    //   _resetParams();\n    // });\n\n    return {\n      ...toRefs(state),\n      setDefaultAttrs,\n      setColsStyle,\n      setOptions,\n      handleData,\n      formCheck,\n      clearCheck,\n\n    };\n  },\n  render() {\n    const {\n      $attrs, currentData, params, formItemStyle, formStyle, $scopedSlots, $slots, formItemProps: publicFormItemProps, labelPosition, showInlineTitle,\n    } = this;\n    const getFormItem = (itemOptions:FormItem) => {\n      // 这里没用到的不能剔除，因为需要把它们从otherProps里面剔除\n      const {\n        key,\n        type,\n        childType,\n        options = [],\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        title,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        rules,\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        formItemProps,\n        on,\n        nativeOn,\n        ...otherProps\n      } = itemOptions;\n      const scopedTag = $scopedSlots[key];\n      if (scopedTag) return scopedTag(itemOptions);\n\n      const dynamicProps = { attrs: otherProps, on, nativeOn };\n\n      const getOptions = () => options.map(({ key: optionKey, title: optionTitle, ...optionProps }) => {\n        const optionAttrs = {\n          key: optionKey,\n          ...optionProps,\n        };\n        switch (type) {\n          case 'select':\n          default:\n            return <el-option label={optionTitle} value={optionKey} {...{ attrs: optionAttrs }}></el-option>;\n          case 'checkbox':\n            return (\n                <el-checkbox label={optionKey} {...{ attrs: optionAttrs }}>\n                  {optionTitle}\n                </el-checkbox>\n            );\n          case 'radio':\n            return (\n                <el-radio label={optionKey} {...{ attrs: optionAttrs }}>\n                  {optionTitle}\n                </el-radio>\n            );\n        }\n      });\n\n      switch (type) {\n        case 'input':\n        default:\n          return <el-input vModel={params[key]} type={childType} {...dynamicProps} ></el-input>;\n        case 'select':\n          return (\n            <el-select vModel={params[key]} {...dynamicProps}>\n              {getOptions()}\n            </el-select>\n          );\n        case 'checkbox':\n          return (\n            <el-checkbox-group vModel={params[key]} {...dynamicProps}>\n              {getOptions()}\n            </el-checkbox-group>\n          );\n        case 'radio':\n          return (\n            <el-radio-group vModel={params[key]} {...dynamicProps}>\n              {getOptions()}\n            </el-radio-group>\n          );\n        case 'date':\n          return <el-date-picker vModel={params[key]} type={childType} {...dynamicProps}></el-date-picker>;\n        case 'time':\n          return <el-time-picker vModel={params[key]} {...dynamicProps}></el-time-picker>;\n        case 'switch':\n          return <el-switch vModel={params[key]} {...dynamicProps}></el-switch>;\n        case 'block':\n          return '';\n      }\n    };\n\n    return (\n      <el-form\n        label-width={$attrs.inline === '' && !showInlineTitle ? '0' : $attrs['label-width'] || '80'}\n        size={$attrs.size || 'small'}\n        class=\"h-form\"\n        style={formStyle}\n        {...{ attrs: { ...$attrs, model: params } }}\n        onSubmit_prevent\n        ref=\"form\"\n      >\n      <div class=\"h-form-left\">\n          {currentData.map(itemOptions => {\n            const {\n              key, title, rules, formItemProps = {},\n            } = itemOptions;\n            const { class: formItemClass, style: _formItemStyle, ...otherFormItemProps } = formItemProps;\n            return (\n              <el-form-item\n                key={key}\n                prop={key}\n                label={$attrs.inline === '' && !showInlineTitle ? '' : title}\n                rules={rules}\n                class={['h-form-item', { 'label-top': labelPosition === 'top' }, formItemClass]}\n                style={{ ...formItemStyle, ..._formItemStyle }}\n                {...{ attrs: { ...otherFormItemProps, ...publicFormItemProps } }}\n\n              >\n                {getFormItem(itemOptions)}\n              </el-form-item>\n            );\n          })}\n          {$slots.default || null}\n        </div>\n\n        {\n          $slots.right && <div class=\"h-form-right\">\n            {$slots.right}\n          </div>\n        }\n\n      </el-form>\n    );\n  },\n});\n\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=tsx&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}