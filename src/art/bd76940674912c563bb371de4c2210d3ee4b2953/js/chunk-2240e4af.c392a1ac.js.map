{"version":3,"sources":["webpack:///./src/components/drags/DragList.vue?3185","webpack:///./src/components/OverText.vue?2cdc","webpack:///./src/components/OverText.vue?ec56","webpack:///./src/components/OverText.vue?05eb","webpack:///./src/components/OverText.vue","webpack:///./src/components/drags/DragContainer.vue?7384","webpack:///./src/components/drags/DragContainer.vue?2771","webpack:///./src/components/drags/DragContainer.vue?fff0","webpack:///./src/components/drags/DragContainer.vue","webpack:///./src/components/drags/DragItem.vue?0742","webpack:///./src/components/drags/DragItem.vue?8f8d","webpack:///./src/components/drags/DragItem.vue?7688","webpack:///./src/components/drags/DragItem.vue","webpack:///./src/components/drags/utils.ts","webpack:///./src/components/OverText.vue?0f06","webpack:///./src/components/drags/DragItem.vue?4d07","webpack:///./src/components/drags/DragContainer.vue?0a78","webpack:///./src/components/drags/DragList.vue?6472","webpack:///./src/components/drags/DragList.vue?02ea","webpack:///./src/components/drags/DragList.vue?9746","webpack:///./src/components/drags/DragList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_b","attrs","content","$attrs","ref","style","_t","staticRenderFns","name","inheritAttrs","components","props","width","type","Number","String","default","setup","refs","root","emit","state","isOver","wrapStyle","setSlotsElInline","slotEls","wrap","children","forEach","el","display","init","WrapEl","scrollWidth","clientWidth","textContent","$nextTick","component","DragContainer","_this","startItem","fromVm","toVm","dragList","startIndex","cross","inside","enterIndex","getDragListVms","$children","filter","vm","$options","reset","setAllListIndex","i","index","resetAllList","listen","obj","Object","entries","key","callback","$off","$on","setAllDragAreaLayer","isDragAreaTopLayer","events","dragliststart","item","draglistenter","Infinity","list","length","splice","isClearDragAreaTopLayer","isDragNowList","dragenter","draglistend","isInside","endIndex","endVm","addEvents","on","start","enter","$event","preventDefault","end","DragItem","e","getId","id","GetId","target","currentTarget","listDragEnter","_l","keyName","class","disabled","_v","_s","hDrag","isDragging","DragList","value","Array","throttle","Boolean","eventPreCallback","Function","getHandledList","map","_hid","getList","needHandle","some","undefined","immediate","_eventPreCallback","pass","swap","options","dataTransfer","setData","_enter","_end"],"mappings":"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","file":"js/chunk-2240e4af.c392a1ac.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragList.vue?vue&type=style&index=0&id=5fdc1b42&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"over-text\"},[(_vm.isOver)?[_c('el-tooltip',_vm._b({attrs:{\"effect\":\"dark\",\"content\":_vm.content,\"tabindex\":null}},'el-tooltip',_vm.$attrs,false),[_c('div',{ref:\"wrap\",staticClass:\"over-text-wrap\",style:(_vm.wrapStyle)},[_vm._t(\"default\")],2)])]:[_c('div',{ref:\"wrap\",staticClass:\"over-text-wrap\",style:(_vm.wrapStyle)},[_vm._t(\"default\")],2)]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, onMounted, getCurrentInstance,\n} from '@vue/composition-api';\n\nexport default defineComponent({\n  name: 'over-text',\n  inheritAttrs: false,\n  components: {},\n  props: {\n    width: {\n      type: [Number, String],\n      default: 'auto',\n    },\n  },\n  setup(props, { refs, emit, root }) {\n    const _this = getCurrentInstance();\n    const state = reactive({\n      isOver: false,\n      content: '',\n      wrapStyle: {\n        width: typeof props.width === 'string' ? props.width : `${props.width}px`,\n      },\n    });\n\n    const setSlotsElInline = () => {\n      // 这里的refs.wrap已经是isOver的wrap\n      const slotEls = [...refs.wrap.children] as HTMLElement[];\n      slotEls.forEach(el => {\n        el.style.display = 'inline';\n      });\n    };\n\n    // 可能从外部调用,不能修改名字\n    const init = async () => {\n      const WrapEl = refs.wrap as HTMLElement;\n\n      if (WrapEl.scrollWidth > WrapEl.clientWidth) {\n        state.isOver = true;\n        state.content = WrapEl.textContent || '';\n\n        await root.$nextTick();\n        setSlotsElInline();\n      } else {\n        // 必须设置,有些场景可能从toolTip变成不需要toolTip\n        state.isOver = false;\n      }\n    };\n\n    onMounted(async () => {\n      init();\n    });\n\n    return {\n      ...toRefs(state),\n      init,\n    };\n  },\n});\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OverText.vue?vue&type=template&id=06da4a7a&scoped=true&\"\nimport script from \"./OverText.vue?vue&type=script&lang=ts&\"\nexport * from \"./OverText.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./OverText.vue?vue&type=style&index=0&id=06da4a7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06da4a7a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-drag-container\"},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, getCurrentInstance, onMounted,\n} from '@vue/composition-api';\nimport delay from '_/delay';\nimport { DragListType } from './DragList.vue';\n\nconst DragContainer = defineComponent({\n  name: 'h-drag-container',\n  components: {},\n  props: {},\n  setup(props, { emit, root }) {\n    const _this = getCurrentInstance();\n    const state = reactive({\n      startItem: {} as any,\n      fromVm: {} as DragListType,\n      toVm: {} as DragListType,\n      dragList: {\n        // 保存跨列表 列表组件的index\n        startIndex: -1,\n      },\n      cross: {\n        // 保存跨列表 拖拽项的index\n        startIndex: -1,\n      },\n      inside: {\n        // 保存列表内 拖拽项的index\n        startIndex: -1,\n        enterIndex: -1,\n      },\n\n    });\n    const getDragListVms = () => ((_this?.$children || []) as DragListType[]).filter(vm => vm.$options.name === 'h-drag-list');\n    const init = (() => {\n      const reset = () => {\n        state.startItem = {};\n        state.fromVm = {} as DragListType;\n        state.toVm = {} as DragListType;\n        state.dragList = {\n          startIndex: -1,\n        };\n        state.cross = {\n          startIndex: -1,\n        };\n        state.inside = {\n          startIndex: -1,\n          enterIndex: -1,\n        };\n      };\n      const setAllListIndex = () => {\n        getDragListVms().forEach((_vm, i) => {\n          _vm.index = i;\n        });\n      };\n      const resetAllList = () => {\n        getDragListVms().forEach(_vm => _vm.reset());\n      };\n      const listen = (obj:{[any:string]:Function}) => {\n        getDragListVms().forEach(_vm => {\n          Object.entries(obj).forEach(([key, callback]) => {\n            _vm.$off(key, callback);\n            _vm.$on(key, callback);\n          });\n        });\n      };\n      const setAllDragAreaLayer = () => {\n        getDragListVms().forEach(_vm => {\n          _vm.isDragAreaTopLayer = true;\n        });\n      };\n      const events = {\n        dragliststart: ({ item, vm }:{item:any, vm:DragListType}) => {\n          // 内部或跨列表拖拽都会触发\n          state.startItem = item;\n          state.fromVm = vm;\n          state.dragList.startIndex = vm.index;\n          setAllDragAreaLayer();\n          emit('start', { vm: _this, item });\n        },\n        draglistenter: ({ enterIndex, vm }:{enterIndex:number, vm:DragListType}) => {\n          // 跨draglist拖拽\n          state.toVm = vm;\n          const { fromVm, toVm } = state;\n          enterIndex = enterIndex === Infinity ? toVm.list.length : enterIndex;\n          toVm.list.splice(enterIndex, 0, state.startItem);\n          fromVm.list.splice(fromVm.startIndex, 1);\n\n          state.cross.startIndex = fromVm.startIndex;\n\n          fromVm.reset({ isClearDragAreaTopLayer: false });\n          state.fromVm = vm;\n          toVm.startIndex = enterIndex;\n          toVm.enterIndex = enterIndex;\n          toVm.isDragNowList = true;\n          emit('draglist-enter', { vm: _this });\n        },\n        dragenter: ({ startIndex, enterIndex, vm }:{startIndex:number, enterIndex:number, vm:DragListType}) => {\n          state.inside.startIndex = startIndex;\n          state.inside.enterIndex = enterIndex;\n          // dragList内部拖拽\n          emit('inside-enter', { vm: _this });\n        },\n        draglistend: ({ isInside }:{isInside:boolean}) => {\n          // 内部或跨列表拖拽都会触发\n          // 这里抛出的startIndex和endIndex会根据v-for的key值有没有重新渲染而不一样 后续需要换种方式\n          emit('end', {\n            vm: _this,\n            startIndex: state.dragList.startIndex,\n            endIndex: state.toVm.index,\n            endVm: state.toVm,\n            cross: {\n              startIndex: state.cross.startIndex,\n              endIndex: state.toVm.enterIndex,\n            },\n            inside: state.inside,\n            isInside, // 是否是内部拖拽\n          });\n          resetAllList();\n          reset();\n        },\n      };\n      return async ({ addEvents }:{addEvents:boolean} = { addEvents: true }) => {\n      // 现在只在挂载时出初始化,当新增删除dragList时,需要手动再调初始化\n      // 延迟200MS保存DOM元素生成后初始化,暂时这么写,后续确定原因后修改\n        await delay(200);\n\n        if (addEvents) {\n          listen(events);\n        }\n        setAllListIndex();\n      };\n    })();\n\n    onMounted(() => {\n      init();\n    });\n\n    return {\n      ...toRefs(state),\n      init,\n      getDragListVms,\n    };\n  },\n});\nexport default DragContainer;\nexport type DragContainerType = InstanceType<typeof DragContainer>;\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragContainer.vue?vue&type=template&id=d02c6956&scoped=true&\"\nimport script from \"./DragContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragContainer.vue?vue&type=style&index=0&id=d02c6956&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d02c6956\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"dragItem\",staticClass:\"h-drag-item\",attrs:{\"draggable\":\"\"},on:{\"dragstart\":_vm.start,\"dragenter\":_vm.enter,\"dragover\":function($event){$event.preventDefault();},\"dragend\":_vm.end}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, watch, getCurrentInstance,\n} from '@vue/composition-api';\n\nconst DragItem = defineComponent({\n  name: 'h-drag-item',\n  components: {},\n  props: {},\n  setup(props, { emit, root, refs }) {\n    const _this = getCurrentInstance() as InstanceType<typeof DragItem>;\n\n    const state = reactive({});\n\n    const reset = () => {\n\n    };\n\n    const start = (e:DragEvent) => {\n      emit('dragstart', e);\n    };\n\n\n    const enter = (e:DragEvent) => {\n      emit('dragenter', e);\n    };\n\n    const end = (e:DragEvent) => {\n      reset();\n      emit('dragend', e);\n    };\n\n    return {\n      ...toRefs(state),\n      start,\n      enter,\n      end,\n      reset,\n    };\n  },\n\n});\nexport default DragItem;\nexport type DragItemType = InstanceType<typeof DragItem>;\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragItem.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragItem.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragItem.vue?vue&type=template&id=d2f45a84&scoped=true&\"\nimport script from \"./DragItem.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragItem.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragItem.vue?vue&type=style&index=0&id=d2f45a84&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d2f45a84\",\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable import/prefer-default-export */\nimport {\n  reactive, computed, ref, toRefs, getCurrentInstance, onMounted, watch, SetupContext,\n} from '@vue/composition-api';\n\ntype List = any[];\n\nexport const getId = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\nexport class GetId {\n   id:number = 0;\n   get() {\n     return this.id++;\n   }\n}\n\n\nexport const useFilter = () => {\n  const state = reactive({\n    // originList: [] as List,\n    list: [] as List,\n    filterList: [] as List,\n    filterValue: '',\n  });\n  watch(() => state.list, () => {\n    console.log('useFilter');\n  }, { immediate: true });\n  const setFilterValue = (filterValue:string, filterMethod?:Function) => {\n    state.filterValue = filterValue;\n    state.filterList = state.list.filter(item => item.title.includes(filterValue));\n  };\n  return {\n    ...toRefs(state),\n    setFilterValue,\n  };\n};\n\n\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverText.vue?vue&type=style&index=0&id=06da4a7a&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragItem.vue?vue&type=style&index=0&id=d2f45a84&lang=scss&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragContainer.vue?vue&type=style&index=0&id=d02c6956&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"h-drag-list\",on:{\"dragenter\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.listDragEnter($event)}}},[_vm._t(\"prepend\"),_c('transition-group',{attrs:{\"name\":\"drag-animate\",\"tag\":\"ul\"}},_vm._l((_vm.list),function(item,i){return _c('li',{key:item[_vm.keyName] || 'no-id',staticClass:\"drag-li\",class:{ 'is-draging': _vm.enterIndex === i },attrs:{\"draggable\":\"\"},on:{\"dragstart\":function (e) { return _vm.start(item, i, e); },\"dragend\":function (e) { return _vm.end(item, i, e); }}},[_c('div',{staticClass:\"drag-area\",class:{\n          'is-top-layer': _vm.isDragAreaTopLayer && _vm.startIndex !== i,\n          disabled: _vm.disabled,\n        },on:{\"dragenter\":function (e) { return _vm.enter(item, i, e); },\"dragover\":function($event){$event.preventDefault();}}}),_c('div',{staticClass:\"h-drag-item\"},[_vm._t(\"default\",[_vm._v(_vm._s(i))],{\"item\":item,\"i\":i})],2)])}),0),_vm._t(\"append\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, watch, getCurrentInstance,\n} from '@vue/composition-api';\nimport { debounce, throttle } from 'throttle-debounce';\nimport { getId } from './utils';\n\ntype List = any[];\n\n// 区分是该组件内的拖拽还是外部的拖拽\nexport const hDrag = {\n  isDragging: false,\n};\n\nconst DragList = defineComponent({\n  name: 'h-drag-list',\n  components: { },\n  props: {\n    value: {\n      type: Array as ()=> List,\n      default: () => [],\n    },\n    // 对象唯一值,如果不指定会默认生成_hid属性作为标记,会改变传进来的数据结构\n    keyName: {\n      type: String,\n      default: '_hid',\n    },\n    // enter时的throttle\n    throttle: {\n      type: Number,\n      default: 100,\n    },\n    disabled: {\n      type: Boolean,\n      default: false,\n    },\n    eventPreCallback: {\n      type: Function as unknown as ()=> (e:DragEvent)=>any,\n    },\n  },\n  setup(props, { refs, emit, root }) {\n    const _this = getCurrentInstance() as InstanceType<typeof DragList>;\n    const state = reactive({\n      index: -1, // 外部初始化传进来,方便记录当前dragList在container中的index\n      list: [] as List,\n      startIndex: -1,\n      enterIndex: -1,\n      isDragNowList: false, // 拖拽现在容器\n      isDragAreaTopLayer: false, // drag-area的z-index设置到上层\n    });\n    const getHandledList = (list:List) => {\n      return list.map(item => ({ ...item, _hid: item._hid ?? getId() }));\n    };\n    const getList = () => {\n      const needHandle = props.value.length && props.value.some(item => item[props.keyName] === undefined);\n      return needHandle ? getHandledList(props.value) : props.value;\n    };\n\n    watch(() => props.value, () => {\n      state.list = getList();\n    }, { immediate: true });\n    watch(() => state.list, () => {\n      emit('input', state.list);\n    }, { immediate: true });\n\n    const eventPreCallback = (e:DragEvent) => {\n      const { eventPreCallback: _eventPreCallback } = props;\n      if (typeof _eventPreCallback === 'function') {\n        const pass = _eventPreCallback(e);\n        // 返回false时才不执行后面的代码\n        if (pass === false) return pass;\n      }\n      return true;\n    };\n\n\n    const swap = (list:List, start:number, end:number) => {\n      if (start === end) return;\n      const startItem = list.splice(start, 1)[0];\n      list.splice(end, 0, startItem);\n      state.startIndex = end;\n    };\n\n\n    const reset = (options:{isClearDragAreaTopLayer?:boolean} = { isClearDragAreaTopLayer: true }) => {\n      state.startIndex = -1;\n      state.enterIndex = -1;\n      state.isDragNowList = false;\n      if (options.isClearDragAreaTopLayer) {\n        // 是否清除isDragAreaTopLayer,跨列表拖拽时container会调reset方法,但是不能清除isDragAreaTopLayer\n        state.isDragAreaTopLayer = false;\n      }\n    };\n    const start = (item:any, i:number, e:DragEvent) => {\n      e.dataTransfer?.setData('hdrag', 'true'); // 暂时用于useOutDrag区分\n      hDrag.isDragging = true;\n      const pass = eventPreCallback(e);\n      if (!pass) return;\n      if (props.disabled) return;\n      if (state.startIndex === 0) {\n        // 兼容mac的chrome拖拽后延迟大概两秒才触发end事件的问题\n        e.preventDefault();\n        return;\n      }\n      state.startIndex = i;\n      state.isDragNowList = true;\n      state.isDragAreaTopLayer = true;\n      emit('dragliststart', { item, i, vm: _this });\n    };\n\n    const _enter = (item:any, i:number, e:DragEvent) => {\n      const pass = eventPreCallback(e);\n      if (!pass) return;\n      if (props.disabled) return;\n      state.enterIndex = i;\n      const { startIndex, enterIndex } = state;\n      if (enterIndex === -1) return;\n\n\n      if (state.isDragNowList) {\n        // 内部拖拽\n        swap(state.list, startIndex, i);\n        emit('dragenter', { vm: _this, startIndex: state.startIndex, enterIndex: i });\n      } else {\n        // 跨draglist拖拽\n        emit('draglistenter', { enterIndex: i, vm: _this });\n      }\n    };\n\n    const enter = props.throttle ? throttle(props.throttle, _enter) : _enter;\n\n    const _end = (item:any, i:number, e:DragEvent) => {\n      hDrag.isDragging = false; // 不能通过reset去除,因为每次跨容器也会触发reset\n      const pass = eventPreCallback(e);\n      if (!pass) return;\n      // dragend事件触发在dragstart的元素上，即初始拖动的组件上，所以这里如果抛出_this是初始组件的vm(要获取end时的vm在enter时获取保存)\n      emit('draglistend', {\n        item, i, e, isInside: state.isDragNowList,\n      });\n    };\n    const end = props.throttle ? debounce(props.throttle, _end) : _end; // 必须加debounce,否则在end之后由于throttle还会执行一次enter\n\n    const listDragEnter = (e:DragEvent) => {\n      if (!hDrag.isDragging) return;\n      if (props.disabled) return;\n      if (!state.isDragNowList) {\n        // 跨dragelist,通过外部容器\n        emit('draglistenter', { enterIndex: Infinity, vm: _this });\n      }\n    };\n\n\n    return {\n      ...toRefs(state),\n      start,\n      enter,\n      end,\n      reset,\n      listDragEnter,\n    };\n  },\n});\nexport default DragList;\nexport type DragListType = InstanceType<typeof DragList>;\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DragList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DragList.vue?vue&type=template&id=5fdc1b42&scoped=true&\"\nimport script from \"./DragList.vue?vue&type=script&lang=ts&\"\nexport * from \"./DragList.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DragList.vue?vue&type=style&index=0&id=5fdc1b42&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5fdc1b42\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}