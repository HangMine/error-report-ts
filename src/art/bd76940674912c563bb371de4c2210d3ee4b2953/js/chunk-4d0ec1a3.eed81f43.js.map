{"version":3,"sources":["webpack:///./src/views/test/Home/Edit.vue?4b3a","webpack:///./src/views/test/Home/Edit.vue?dd1e","webpack:///./src/views/test/Home/Edit.vue?c211","webpack:///./src/views/test/Home/Edit.vue","webpack:///./src/views/test/Home/Edit.vue?48b7","webpack:///./src/assets/img/empty.png","webpack:///./src/views/test/Home/api.ts","webpack:///./src/views/test/Home/useListDrag.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","$event","itemDraging","_l","col","i","key","name","style","position","class","listStartIndex","attrs","listDraging","scopedSlots","_u","fn","isInput","refInFor","blurColTitle","model","value","callback","$$v","$set","expression","stopPropagation","e","listDragStart","listDragEnd","editColTitle","_v","_s","delCol","proxy","item","title","editItem","delItem","addItem","currentCols","itemInfos","addCol","disabled","listDragEnter","list","preventDefault","length","staticStyle","staticRenderFns","components","DragContainer","DragList","OverText","props","cols","type","Array","default","meetingId","String","setup","refs","root","emit","state","useListDrag","listEnterIndex","JSON","parse","stringify","immediate","listIndex","_hid","newItem","push","index","newList","temName","api","sort","splice","$nextTick","dragContainer","init","input","focus","editCol","id","fetchEditCols","map","component","module","exports","params","url","method","data","result","moveItem","fetchReviewCols","release","swap","start","end","startItem","listDragReset"],"mappings":"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","file":"js/chunk-4d0ec1a3.eed81f43.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"meet-home__edit\"},[_c('DragContainer',{ref:\"dragContainer\",staticClass:\"drag-container\",on:{\"start\":function($event){_vm.itemDraging = true},\"end\":function($event){_vm.itemDraging = false}}},[_vm._l((_vm.currentCols),function(col,i){return _c('div',{key:col.name,staticClass:\"flex\",style:({\n        position: 'relative',\n      })},[_c('div',{staticClass:\"drag-list-wrap\",class:{ 'is-draging': _vm.listStartIndex === i }},[_c('DragList',{staticClass:\"drag-list scrollable-y\",attrs:{\"disabled\":_vm.listDraging},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [(!col.isInput)?_c('div',{staticClass:\"drag-list-title\",class:{ 'pre-drag': _vm.listDraging && i !== _vm.listStartIndex },attrs:{\"draggable\":\"\"},on:{\"dragstart\":function($event){$event.stopPropagation();return (function (e) { return _vm.listDragStart({ e: e, i: i }); })($event)},\"dragend\":function($event){$event.stopPropagation();return _vm.listDragEnd()},\"dblclick\":function($event){return _vm.editColTitle(col, i)}}},[_vm._v(\" \"+_vm._s(col.name)+\" \"),_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":function($event){return _vm.delCol(i)}}})]):_c('el-input',{ref:\"input\",refInFor:true,on:{\"blur\":function($event){return _vm.blurColTitle(col, i)}},model:{value:(col.temName),callback:function ($$v) {_vm.$set(col, \"temName\", $$v)},expression:\"col.temName\"}})]},proxy:true},{key:\"default\",fn:function(ref){\n      var item = ref.item;\nreturn [_c('div',{staticClass:\"drag-item\"},[_c('img',{staticClass:\"drag-item-img\",attrs:{\"src\":require('@/assets/img/empty.png')}}),_c('OverText',{staticClass:\"drag-item-title-wrap\"},[_c('div',{staticClass:\"drag-item-title\"},[_vm._v(_vm._s(item.title))])]),_c('div',{staticClass:\"icons\"},[_c('div',{staticClass:\"icon-wrap\",on:{\"click\":function($event){return _vm.editItem(item)}}},[_c('i',{staticClass:\"el-icon-edit-outline\"})]),_c('div',{staticClass:\"icon-wrap\",on:{\"click\":function($event){return _vm.delItem(item)}}},[_c('i',{staticClass:\"el-icon-delete\"})])])],1)]}},{key:\"append\",fn:function(){return [_c('div',{staticClass:\"add-item-btn\",on:{\"click\":function($event){return _vm.addItem(_vm.currentCols[i].itemInfos, i)}}},[_c('i',{staticClass:\"el-icon-plus\"})])]},proxy:true}],null,true),model:{value:(_vm.currentCols[i].itemInfos),callback:function ($$v) {_vm.$set(_vm.currentCols[i], \"itemInfos\", $$v)},expression:\"currentCols[i].itemInfos\"}})],1),_c('div',{class:{\n          'drag-list-wrap': _vm.listStartIndex === i,\n          'is-draging-area': _vm.listStartIndex === i,\n        }}),_c('div',{staticClass:\"add-col-area\"},[_c('span',{staticClass:\"icon-wrap\",on:{\"click\":function($event){return _vm.addCol(i)}}},[_c('i',{staticClass:\"icon-bg iconfont iconshuidi\"}),_c('i',{staticClass:\"icon-main el-icon-plus\"})])]),_c('div',{staticClass:\"col-drag-area\",class:{ disabled: _vm.itemDraging, 'is-col-draging': _vm.listDraging },on:{\"dragenter\":function($event){$event.stopPropagation();return _vm.listDragEnter({ i: i, list: _vm.currentCols })},\"dragover\":function($event){$event.preventDefault();}}})])}),_c('div',{staticClass:\"add-col-default\",on:{\"click\":function($event){return _vm.addCol(_vm.currentCols.length)}}},[_c('i',{staticClass:\"el-icon-plus\",staticStyle:{\"margin-right\":\"10px\"}}),_vm._v(\" 新增列 \")])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, computed, ref, toRefs, watch,\n} from '@vue/composition-api';\nimport {\n  DragContainer, DragList, DragItem, getId,\n} from '@/components/drags';\nimport OverText from '@/components/OverText.vue';\nimport { useListDrag } from './useListDrag';\nimport api from './api';\n\nimport { Item, Col } from './index.vue';\n\nexport default defineComponent({\n  name: 'meet-home__edit',\n  components: { DragContainer, DragList, OverText },\n  props: {\n    cols: {\n      type: Array,\n      default: () => [],\n    },\n    meetingId: {\n      type: String,\n      default: '123',\n    },\n  },\n  setup(props, { refs, emit, root }) {\n    const state = reactive({\n      currentCols: [] as any[],\n      itemDraging: false,\n    });\n    const {\n      listStartIndex, listEnterIndex, listDraging, listDragStart, listDragEnter, listDragEnd,\n    } = useListDrag();\n\n    watch(() => props.cols, () => {\n      state.currentCols = JSON.parse(JSON.stringify(props.cols));\n    }, { immediate: true });\n\n    const addItem = (list:Item[], listIndex:number) => {\n      const _hid = getId();\n      const newItem = {\n        _hid,\n        title: _hid,\n      };\n      list.push(newItem);\n    };\n\n    const editItem = (item:Item) => {\n\n    };\n\n    const delItem = (item:Item) => {\n\n    };\n\n    const addCol = async (index:number) => {\n      const name = `新增列${getId()}`;\n      const newList = {\n        name,\n        temName: name,\n        list: [],\n        isInput: false,\n      };\n      await api.addCol({ name: newList.name, sort: index, meetingId: props.meetingId });\n      state.currentCols.splice(index + 1, 0, newList);\n      await root.$nextTick();\n      refs?.dragContainer.init();\n    };\n\n    const delCol = (index:number) => {\n      state.currentCols.splice(index, 1);\n    };\n\n    const editColTitle = async (col:Col, i:number) => {\n      col.isInput = true;\n      await root.$nextTick();\n      refs?.input?.[i].focus();\n    };\n\n    const blurColTitle = async (col:any, i:number) => {\n      col.isInput = false;\n      await api.editCol({\n        id: col.id!, name: col.temName, sort: i + 1, meetingId: props.meetingId,\n      });\n      col.name = col.temName;\n    };\n\n    const init = async () => {\n      const cols:Col[] = await api.fetchEditCols({ id: props.meetingId });\n      state.currentCols = cols.map(item => ({ ...item, isInput: false }));\n    };\n\n    init();\n\n    return {\n      ...toRefs(state),\n      addItem,\n      editItem,\n      delItem,\n      addCol,\n      delCol,\n      listStartIndex,\n      listEnterIndex,\n      listDragStart,\n      listDragEnter,\n      listDragEnd,\n      listDraging,\n      editColTitle,\n      blurColTitle,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=e06c2f5a&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=ts&\"\nexport * from \"./Edit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=e06c2f5a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e06c2f5a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=e06c2f5a&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/empty.bb61be1a.png\";","import axios from '@/utils/axios';\n\ntype Obj = {[any:string]:any};\nconst api = {\n  // 删除项\n  async delItem(params:{id:string}) {\n    const result = (await axios({\n      url: '/meeting/column/item/delete',\n      method: 'post',\n      data: params,\n    })) || false;\n\n    return result;\n  },\n  // 移动项\n  async moveItem(params:{id:string, meetingColumnId:string, index:number}) {\n    const result = (await axios({\n      url: '/meeting/column/item/move',\n      method: 'post',\n      data: params,\n    })) || false;\n\n    return result;\n  },\n\n  // 查看模式列表\n  async fetchReviewCols(params:{meetingId:string, meetingColumnIds?:string[], meetingColumnPage?:number, meetingColumnSize?:number}) {\n    const result = (await axios({\n      url: '/meeting/conference/console',\n      method: 'post',\n      data: params,\n    })).data || {};\n\n    return result;\n  },\n  // 编辑模式列表\n  async fetchEditCols(params:{id:string}) {\n    const result = (await axios({\n      url: '/meeting/conference/console/editable',\n      method: 'post',\n      data: params,\n    })).data || [];\n\n    return result;\n  },\n  // 发布\n  async release(params:{id:string}) {\n    const result = (await axios({\n      url: '/meeting/conference/console/release',\n      method: 'post',\n      data: params,\n    })) || false;\n\n    return result;\n  },\n  // 新增列\n  async addCol(params:{ name:string, sort:number, meetingId:string}) {\n    const result = (await axios({\n      url: '/meeting/column/add',\n      method: 'post',\n      data: params,\n    }));\n\n    return result;\n  },\n  // 删除列\n  async delCol(params:{columnId:string}) {\n    const result = (await axios({\n      url: '/meeting/column/delete',\n      method: 'post',\n      data: params,\n    }));\n\n    return result;\n  },\n  // 修改列\n  async editCol(params:{id:string, name:string, sort:number, meetingId:string}) {\n    const result = (await axios({\n      url: '/meeting/column/update',\n      method: 'post',\n      data: params,\n    }));\n\n    return result;\n  },\n};\n\nexport default api;\n","/* eslint-disable import/prefer-default-export */\nimport {\n  reactive, computed, ref, toRefs, getCurrentInstance, onMounted, watch, SetupContext,\n} from '@vue/composition-api';\n\nexport const useListDrag = () => {\n  const state = reactive({\n    listStartIndex: -1,\n    listEnterIndex: -1,\n    listDraging: false,\n  });\n  const swap = (list:any[], start:number, end:number) => {\n    if (start === end) return;\n    const startItem = list.splice(start, 1)[0];\n    list.splice(end, 0, startItem);\n    state.listStartIndex = end;\n  };\n  const listDragReset = () => {\n    state.listStartIndex = -1;\n    state.listEnterIndex = -1;\n    state.listDraging = false;\n  };\n  const listDragStart = ({ e, i }:{e:DragEvent, i:number}) => {\n    state.listStartIndex = i;\n    state.listDraging = true;\n  };\n  const listDragEnter = ({ i, list }:{ i:number, list:any[]}) => {\n    const { listStartIndex, listEnterIndex } = state;\n    if (state.listEnterIndex === i) return;\n    state.listEnterIndex = i;\n    // 内部拖拽\n    swap(list, listStartIndex, i);\n  };\n  const listDragEnd = () => {\n    // dragend事件触发在dragstart的元素上，即初始拖动的组件上，所以这里如果抛出_this是初始组件的vm(要获取end时的vm在enter时获取保存)\n    listDragReset();\n  };\n  return {\n    ...toRefs(state),\n    listDragStart,\n    listDragEnd,\n    listDragEnter,\n  };\n};\n"],"sourceRoot":""}