{"version":3,"sources":["webpack:///./node_modules/@4dst-saas/public-utils/dist/composables/use-loader.js","webpack:///./src/views/material-mall/Colorboard.vue?7d64","webpack:///./src/views/material-mall/components/CommodityItem.vue?2fb5","webpack:///./src/views/material-mall/Colorboard.vue?2b07","webpack:///./src/views/material-mall/Colorboard.vue?ae29","webpack:///./src/views/material-mall/Colorboard.vue?f455","webpack:///./src/views/material-mall/Colorboard.vue","webpack:///./src/views/material-mall/components/CommodityItem.vue?3e87","webpack:///./src/views/material-mall/components/CommodityList.vue?9b43","webpack:///./src/views/material-mall/components/CommodityList.vue","webpack:///./src/views/material-mall/components/CommodityList.vue?adda","webpack:///./src/views/material-mall/components/CommodityList.vue?7151","webpack:///./src/components/OmittedDisplayer.vue?63f3","webpack:///./src/components/OmittedDisplayer.vue?a7c2","webpack:///src/components/OmittedDisplayer.vue","webpack:///./src/components/OmittedDisplayer.vue?fc76","webpack:///./src/components/OmittedDisplayer.vue","webpack:///./src/utils/composables/use-callback-when-last-element-shown.ts","webpack:///./src/views/material-mall/components/CommodityItem.vue","webpack:///./src/views/material-mall/components/CommodityItem.vue?41f0","webpack:///./src/views/material-mall/components/CommodityItem.vue?0116","webpack:///./src/views/material-mall/components/Navigator.vue?947a","webpack:///src/views/material-mall/components/Navigator.vue","webpack:///./src/views/material-mall/components/Navigator.vue?ed71","webpack:///./src/views/material-mall/components/Navigator.vue","webpack:///./src/views/material-mall/components/Navigator.vue?9d0c"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","default","_regenerator","_asyncToGenerator2","_defineProperty2","_compositionApi","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defaultOptions","initialValue","undefined","loadingValue","oldValue","useLoader","loader","oldWatcher","params","_ref","_ref$initialValue","_ref$loadingValue","r","reactive","watchSource","resultRef","ref","tmp","that","getCurrentInstance","loaderPromiseRef","$on","mark","_callee2","wrap","_context2","prev","next","watch","_ref3","_callee","_loaderPromiseRef","_context","sent","stop","_x","this","immediate","s","_ref4","_callee3","_tmp","_context3","isRef","__tmp","_x2","_default","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","directives","name","rawName","expression","staticStyle","attrs","disableFetch","materialList","staticRenderFns","components","Navigator","MaterialList","setup","_","root","supplierArticleName","$route","query","loading","pageNumber","pageSize","getColorSwatch","axios","get","data","records","total","$errorHandler","component","props","type","Array","required","displayMode","String","inject","map","material","idx","id","preview","index","srcList","imgJson","texture","flat","thumbnail","$ImageViewer","show","targetElems","isTextEllipsis","outsideContent","textContent","style","_width","_t","width","Number","computed","mounted","judgeIsVisible","node","document","documentElement","display","parentNode","observer","disconnect","res","visible","obs","observe","dom","judgeVisibilityThenInit","callbackWhenLastElementShown","list","callback","targetSelectorOrSelector","io","watcher","currentVm","nL","$nextTick","targets","$el","querySelectorAll","IntersectionObserver","entries","entry","intersectionRatio","unobserve","rootMargin","threshold","terminate","callbackWhenLastElementShownNotCompositionVersion","listName","$watch","children","childElementCount","beforeDestroy","$options","call","materialInfo","operations","generateOperations","ops","goToCompany","goToColorBoard","goToSearchSimilar","item","includes","handleClickFigure","e","$act","$emit","stopPropagation","imgSrc","height","isCloudRenderComplete","materialName","emit","isQtInjection","urlPrefix","company","$router","path","companyId","searchSimilarPath","colorFamily","materialType","replace","class","startsWith","hideBackground","on","back","Boolean","window","history","state","_g_navigator_history_key"],"mappings":"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","file":"js/chunk-5c8aa492.819a9aac.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nrequire(\"core-js/modules/es.symbol\");\n\nrequire(\"core-js/modules/es.array.filter\");\n\nrequire(\"core-js/modules/es.array.for-each\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptor\");\n\nrequire(\"core-js/modules/es.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es.object.keys\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _compositionApi = require(\"@vue/composition-api\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar defaultOptions = {\n  initialValue: undefined,\n  loadingValue: function loadingValue(oldValue) {\n    return oldValue;\n  }\n};\n\nfunction useLoader(loader) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOptions,\n      _ref$initialValue = _ref.initialValue,\n      initialValue = _ref$initialValue === void 0 ? defaultOptions.initialValue : _ref$initialValue,\n      _ref$loadingValue = _ref.loadingValue,\n      loadingValue = _ref$loadingValue === void 0 ? defaultOptions.loadingValue : _ref$loadingValue;\n\n  var r = (0, _compositionApi.reactive)(params);\n\n  var watchSource = function watchSource() {\n    return _objectSpread({}, r);\n  };\n\n  var resultRef = (0, _compositionApi.ref)(initialValue);\n  var tmp = (0, _compositionApi.ref)(null);\n  var that = (0, _compositionApi.getCurrentInstance)();\n  var loaderPromiseRef = (0, _compositionApi.ref)();\n  if (!that) return;\n  that.$on('hook:created', /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            loaderPromiseRef.value = loader(watchSource());\n            (0, _compositionApi.watch)(loaderPromiseRef, /*#__PURE__*/function () {\n              var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_loaderPromiseRef) {\n                return _regenerator.default.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        resultRef.value = loadingValue(resultRef.value);\n                        _context.next = 3;\n                        return _loaderPromiseRef;\n\n                      case 3:\n                        tmp.value = _context.sent;\n\n                      case 4:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }));\n\n              return function (_x) {\n                return _ref3.apply(this, arguments);\n              };\n            }(), {\n              immediate: true\n            });\n            _context2.next = 4;\n            return loaderPromiseRef.value;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })));\n  var oldWatcher;\n  (0, _compositionApi.watch)(watchSource, function (s) {\n    if (oldWatcher) {\n      oldWatcher();\n    }\n\n    loaderPromiseRef.value = loader(s);\n  });\n  (0, _compositionApi.watch)(tmp, /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(_tmp) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if ((0, _compositionApi.isRef)(_tmp)) {\n                oldWatcher = (0, _compositionApi.watch)(_tmp, function (__tmp) {\n                  resultRef.value = __tmp;\n                }, {\n                  immediate: true\n                });\n              } else {\n                resultRef.value = _tmp;\n              }\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }()); // eslint-disable-next-line consistent-return\n\n  return resultRef;\n}\n\nvar _default = useLoader;\nexports.default = _default;","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Colorboard.vue?vue&type=style&index=0&id=2ea0d67f&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=style&index=0&id=a25b7d48&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"colorboard-container flex-column\"},[_c('Navigator',[_vm._v(_vm._s(_vm.$t('material-mall.material_swatch')))]),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"flex-1 scrollable-y\",staticStyle:{\"min-height\":\"200px\",\"padding\":\"25px\"},attrs:{\"element-loading-background\":\"rgba(247, 247, 247)\"}},[_c('MaterialList',{attrs:{\"disabledInfiniteScroll\":_vm.disableFetch,\"materialList\":_vm.materialList}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n  defineComponent, reactive, toRefs, ref,\n} from '@vue/composition-api';\n\nimport { callbackWhenLastElementShown } from '@/utils/composables/use-callback-when-last-element-shown';\nimport Paging from '@/models/Paging';\nimport { MaterialGoods } from '@/models/MaterialGood';\nimport useLoader from '_/composables/use-loader';\nimport axios from '../../api/axios';\nimport Navigator from './components/Navigator.vue';\nimport MaterialList from './components/CommodityList.vue';\n\n\nexport default defineComponent({\n  components: {\n    Navigator,\n    MaterialList,\n  },\n  setup(_, { root }) {\n    const { supplierArticleName } = root.$route.query;\n\n    // const suppliarArticleName = '';\n\n    const materialList = ref<MaterialGoods[]>([]);\n    const loading = ref<boolean>(false);\n\n    const params = reactive({\n      pageNumber: 1,\n      pageSize: 20,\n    });\n\n    // 判断是否最后一页\n    const disableFetch = ref<boolean>(false);\n\n    async function getColorSwatch() {\n      if (params.pageNumber === 1) loading.value = true;\n      try {\n        if (disableFetch.value) return;\n        const { records, total } = (await axios.get<Paging<MaterialGoods>>('/mall/mall/colorSwatch/list', {\n          params: {\n            supplierArticleName,\n            ...params,\n          },\n        })).data;\n        params.pageNumber += 1;\n        materialList.value.push(...records);\n        if (total <= materialList.value.length) {\n          disableFetch.value = true;\n        }\n      } catch (e) {\n        root.$errorHandler(e);\n      } finally {\n        loading.value = false;\n      }\n    }\n\n    useLoader(getColorSwatch, params);\n\n    callbackWhenLastElementShown(materialList, getColorSwatch, '.material-item');\n\n    return {\n      materialList,\n      disableFetch,\n      loading,\n\n      ...toRefs(params),\n    };\n  },\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Colorboard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Colorboard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Colorboard.vue?vue&type=template&id=2ea0d67f&scoped=true&\"\nimport script from \"./Colorboard.vue?vue&type=script&lang=ts&\"\nexport * from \"./Colorboard.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Colorboard.vue?vue&type=style&index=0&id=2ea0d67f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ea0d67f\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=style&index=1&lang=scss&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityList.vue?vue&type=style&index=0&id=5b155a4a&lang=scss&scoped=true&\"","var render, staticRenderFns\nimport script from \"./CommodityList.vue?vue&type=script&lang=tsx&\"\nexport * from \"./CommodityList.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./CommodityList.vue?vue&type=style&index=0&id=5b155a4a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b155a4a\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent } from '@vue/composition-api';\nimport { MaterialGoods } from '@/models/MaterialGood';\nimport CommodityItem from './CommodityItem.vue';\n\nexport default defineComponent({\n  props: {\n    materialList: {\n      type: Array as () => MaterialGoods[],\n      required: true,\n    },\n    displayMode: {\n      type: String as () => 'drape' | 'flat',\n      default: 'drape',\n    },\n  },\n  inject: ['isQt'],\n  render() {\n    return <ul class=\"flex-wrap records-list\">\n      {\n        this.materialList.map((material, idx) => <li key={material.id} class='commodity-item'>\n          <CommodityItem materialInfo={material} displayMode={this.displayMode}\n            data-img-type='material-item' onpreview={() => this.preview(idx)}></CommodityItem>\n        </li>)\n      }\n    </ul>;\n  },\n  setup(props, { root }) {\n    async function preview(index: number) {\n      let srcList;\n      if (props.displayMode === 'flat') {\n        srcList = props.materialList.map((material) => material.imgJson?.texture || material.imgJson?.flat);\n      } else {\n        srcList = props.materialList.map((material) => material.imgJson.thumbnail);\n      }\n      // @ts-ignore\n      await root.$ImageViewer.show(srcList, {\n        index,\n        targetElems: '[data-img-type=\\'material-item\\']',\n      });\n    }\n\n    return {\n      preview,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityList.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityList.vue?vue&type=script&lang=tsx&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=style&index=0&id=47562528&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-tooltip',{attrs:{\"disabled\":!_vm.isTextEllipsis,\"content\":_vm.outsideContent || _vm.textContent,\"tabindex\":null}},[_c('span',{ref:\"nameWrapper\",staticClass:\"omitted-displayer\",style:((\"max-width: \" + _vm._width))},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-tooltip :disabled=\"!isTextEllipsis\" :content=\"outsideContent || textContent\" :tabindex=\"null\">\n    <span :style=\"`max-width: ${_width}`\" class=\"omitted-displayer\" ref=\"nameWrapper\">\n      <slot></slot>\n    </span>\n  </el-tooltip>\n</template>\n\n<script>\nexport default {\n  props: {\n    width: {\n      type: [Number, String],\n      default: 200,\n    },\n    outsideContent: {\n      default: '',\n      type: String,\n    },\n  },\n  computed: {\n    _width() {\n      return typeof this.width === 'number'\n        ? `${this.width}px`\n        : this.width;\n    },\n  },\n  data() {\n    return {\n      isTextEllipsis: null,\n      textContent: null,\n    };\n  },\n  mounted() {\n    /** 用于递归向上判断元素是否可见，由于部分vue实例处于未匹配路由或未激活的状态，使用display：none\n     * 来实现的，所以通过这个来判断组件是否处于显示状态\n     */\n    function judgeIsVisible(node) {\n      if (node === document.documentElement) return { visible: true };\n      if (node.style.display !== 'none') return judgeIsVisible(node.parentNode);\n      return { visible: false, pendingDom: node };\n    }\n    /** 用于判断可见性，若可见，则获取必要的数据（长度是否超过限度，完整内容是什么）\n     * 分为初始化时调用、MutationObserver回调两种情况 */\n    const judgeVisibilityThenInit = (_, observer) => {\n      if (observer) observer.disconnect();\n      const res = judgeIsVisible(this.$el);\n      if (!res.visible) {\n        const dom = res.pendingDom;\n        const obs = new MutationObserver(judgeVisibilityThenInit);\n        obs.observe(dom, { attributes: true, attributeFilter: ['style'] });\n        return;\n      }\n      this.isTextEllipsis = this.$refs.nameWrapper?.offsetWidth\n        < this.$refs.nameWrapper?.scrollWidth;\n      this.textContent = this.$el.innerHTML;\n    };\n    judgeVisibilityThenInit();\n  },\n};\n</script>\n\n<style scoped>\n.omitted-displayer {\n  display: inline-block;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OmittedDisplayer.vue?vue&type=template&id=47562528&scoped=true&\"\nimport script from \"./OmittedDisplayer.vue?vue&type=script&lang=js&\"\nexport * from \"./OmittedDisplayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OmittedDisplayer.vue?vue&type=style&index=0&id=47562528&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47562528\",\n  null\n  \n)\n\nexport default component.exports","import {\n  watch, Ref, getCurrentInstance, onUnmounted, onMounted,\n} from '@vue/composition-api';\nimport Vue from 'vue';\nimport 'intersection-observer';\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelector: string\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, container: Ref<Element>\n):void;\n\nexport function callbackWhenLastElementShown(\n  list: Ref<any[]|null>, callback: ()=> any, targetSelectorOrSelector: string | Ref<Element>,\n) {\n  let io:IntersectionObserver;\n  let watcher: any;\n  const currentVm = getCurrentInstance();\n  onMounted(() => {\n    watcher = watch(() => list?.value, async (nL) => {\n      if (nL && nL.length && nL.length > 0) {\n        await currentVm?.$nextTick();\n        let target: Element;\n        if (typeof targetSelectorOrSelector === 'string') {\n          const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n          target = targets[targets.length - 1];\n        } else {\n          target = targetSelectorOrSelector.value;\n        }\n        io = new IntersectionObserver((entries, obs) => {\n          entries.forEach(entry => {\n            if (entry.intersectionRatio > 0.9 && entry.target === target) {\n              obs.unobserve(entry.target);\n              callback();\n            }\n          });\n        }, {\n          root: null,\n          rootMargin: '0px 0px 0px 0px',\n          threshold: 0.9,\n        });\n        io.observe(target);\n      }\n    }, {\n      immediate: true,\n    });\n  });\n  const terminate = () => {\n    if (watcher) {\n      watcher();\n    }\n    if (io) {\n      io.disconnect();\n    }\n  };\n  onUnmounted(terminate);\n  return terminate;\n}\n\nexport function callbackWhenLastElementShownNotCompositionVersion(\n  listName: string, callback: ()=> any, targetSelectorOrSelector: string | Element,\n) {\n  let io:IntersectionObserver;\n  // @ts-ignore\n  const currentVm = (this as InstanceType<typeof Vue>);\n  currentVm.$watch(listName, async (nL) => {\n    if (nL && nL.length > 0) {\n      await currentVm.$nextTick();\n\n      let target;\n\n      if (typeof targetSelectorOrSelector === 'string') {\n        const targets = currentVm!.$el.querySelectorAll(targetSelectorOrSelector);\n        target = targets[targets.length - 1];\n        // console.log(target);\n      } else {\n        target = targetSelectorOrSelector.children[targetSelectorOrSelector.childElementCount - 1];\n      }\n      io = new IntersectionObserver((entries, obs) => {\n        entries.forEach(entry => {\n          // console.log(entry.intersectionRatio);\n          if (entry.intersectionRatio === 1) {\n            obs.unobserve(entry.target);\n            callback();\n          }\n        });\n      }, {\n        root: null,\n        rootMargin: '0px 0px 0px 0px',\n        threshold: 1,\n      });\n      io.observe(target);\n    }\n  });\n  const { beforeDestroy } = currentVm.$options;\n  currentVm.$options.beforeDestroy = function newBeforeDestroy() {\n    // console.log('beforedestroy');\n    if (io) {\n      io.disconnect();\n    }\n    if (beforeDestroy) {\n      beforeDestroy.call(currentVm);\n    }\n  };\n}\n\nexport default callbackWhenLastElementShown;\n","var render, staticRenderFns\nimport script from \"./CommodityItem.vue?vue&type=script&lang=tsx&\"\nexport * from \"./CommodityItem.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./CommodityItem.vue?vue&type=style&index=0&id=a25b7d48&lang=scss&scoped=true&\"\nimport style1 from \"./CommodityItem.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a25b7d48\",\n  null\n  \n)\n\nexport default component.exports","\nimport { computed, defineComponent, inject } from '@vue/composition-api';\nimport { getCurrentCompany } from '@/loaders/company';\nimport { MaterialGoods } from '@/models/MaterialGood';\nimport open from '@/utils/open-window';\nimport OmittedDisplayer from '@/components/OmittedDisplayer.vue';\n\nexport default defineComponent({\n  props: {\n    materialInfo: {\n      type: Object as () => MaterialGoods,\n      required: true,\n    },\n    displayMode: {\n      type: String as () => 'drape' | 'flat',\n      default: 'drape',\n    },\n    // urlPrefix: {\n    //   type: String,\n    //   required: true,\n    // },\n    operations: {\n      type: Array as () => number[],\n      default: () => [0, 1, 2],\n    },\n  },\n  render() {\n    const generateOperations = (ops: number[]) => {\n      return [\n        <li class='flex-vertical-center li-option' onclick={this.goToCompany}>\n          <i class='i-shangjia'></i>\n          <div>{this.$t('material-mall.supplier-page')}</div>\n        </li>,\n        <li class='flex-vertical-center li-option' onclick={this.goToColorBoard}>\n          <i class='i-seka'></i>\n          <div>{this.$t('material-mall.material_swatch')}</div>\n        </li>,\n        <li class='flex-vertical-center li-option' onclick={this.goToSearchSimilar}>\n          <i class='i-yitusoutu'></i>\n          <div>{this.$t('material-mall.similar_search')}</div>\n        </li>,\n      ].filter((item, idx) => ops.includes(idx));\n    };\n    return <figure class={['container', 'flex-column', { flat: this.displayMode === 'flat' }]} draggable={false} onclick={this.handleClickFigure}>\n      <div class='magnify' onclick={(e: Event) => this.$act(() => {\n        this.$emit('preview');\n        e.stopPropagation();\n      })}>\n        {\n          // <i class='tri'></i>\n        }\n\n        <i class='i-fangdajing'></i>\n      </div>\n      {\n        this.operations.length\n          ? <el-popover trigger=\"hover\" visible-arrow={false} popper-class='commodity-options'>\n            <ul class='flex-column'>\n              {generateOperations(this.operations)}\n            </ul>\n            <i class='more-options i-gengduo1' slot='reference' onclick={(e: Event) => e.stopPropagation()}></i>\n          </el-popover> : null\n      }\n      <base-image src={this.imgSrc} class={{ 'material-picture': true }}\n        fit={this.displayMode === 'flat' ? 'cover' : 'scale-down'} thumb={{ width: 204, height: 204 }}></base-image>\n      {\n        this.materialInfo.isCloudRenderComplete !== 1\n          ? <span class='material-render-flag'>{this.$t('material-mall.preview_picture')}</span>\n          : null\n      }\n      <figcaption class='flex-center material-name'>\n        <OmittedDisplayer width={224} outsideContent={this.materialInfo.materialName}>\n          {this.materialInfo.materialName}\n        </OmittedDisplayer>\n      </figcaption>\n    </figure>;\n  },\n  setup(props, { emit, root }) {\n    const isQtInjection = inject('isQt') as () => boolean;\n    const urlPrefix = isQtInjection() ? '/qt' : '';\n    const imgSrc = computed(() => {\n      if (props.displayMode === 'flat') {\n        return props.materialInfo.imgJson.texture ?? props.materialInfo.imgJson.flat;\n      }\n      return props.materialInfo.imgJson.thumbnail;\n    });\n    const company = computed(() => getCurrentCompany());\n    function handleClickFigure() {\n      if (company.value!.type === 3) {\n        root.$router.push({\n          path: `${urlPrefix}/supplier-backend/preview/goods-detail`,\n          query: {\n            ...root.$route.query,\n            id: props.materialInfo.id,\n          },\n        });\n      } else if (urlPrefix) {\n        root.$router.push({\n          path: '/qt/material-mall/goods-detail',\n          query: {\n            id: props.materialInfo.id,\n          },\n        });\n      } else {\n        open({\n          path: '/material-mall/goods-detail',\n          query: {\n            id: props.materialInfo.id,\n          },\n        });\n      }\n    }\n\n    function goToCompany(e: Event) {\n      e.stopPropagation();\n      root.$router.push({\n        path: `${urlPrefix}/supplier-page/preview/homepage`,\n        query: {\n          companyId: props.materialInfo.companyId,\n        },\n      });\n    }\n\n    function goToColorBoard(e: Event) {\n      e.stopPropagation();\n      root.$router.push({\n        path: `${urlPrefix}/material-mall/colorboard`,\n        query: {\n          supplierArticleName: props.materialInfo.supplierArticleName,\n        },\n      });\n    }\n    function goToSearchSimilar(e: Event) {\n      e.stopPropagation();\n      const searchSimilarPath = `${urlPrefix}/material-mall/searchsimilar`;\n      const query = {\n        colorFamily: props.materialInfo.colorFamily,\n        type: props.materialInfo.materialType,\n        id: props.materialInfo.id,\n      };\n      if (root.$route.path === searchSimilarPath) {\n        root.$router.replace({\n          path: searchSimilarPath,\n          // @ts-ignore\n          query,\n        });\n      } else {\n        root.$router.push({\n          path: searchSimilarPath,\n          // @ts-ignore\n          query,\n        });\n      }\n    }\n    return {\n      imgSrc,\n      company,\n      handleClickFigure,\n\n      goToCompany,\n      goToColorBoard,\n      goToSearchSimilar,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=script&lang=tsx&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"navigator\",class:{'qt-page': _vm.$route.path.startsWith('/qt/'), 'hide-background': _vm.hideBackground}},[_c('span',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"iconfont icon-angle-left\"}),_vm._v(_vm._s(_vm.$t('material-mall.previous'))+\" \")]),_c('span',{staticClass:\"page-name\"},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"navigator\"\n    :class=\"{'qt-page': $route.path.startsWith('/qt/'), 'hide-background': hideBackground}\">\n    <span class=\"back\" @click=\"back\">\n      <i class=\"iconfont icon-angle-left\"></i>{{ $t('material-mall.previous') }}\n    </span>\n    <span class=\"page-name\">\n      <slot></slot>\n    </span>\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from '@vue/composition-api';\nimport { isQt } from '@/utils/is-qt';\n\nexport default defineComponent({\n  props: {\n    hideBackground: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  setup(_, { root }) {\n    // p.s. 打开新窗口步骤是先打开空页面在跳路由\n    if (window.history.length <= 2 && !window._g_navigator_history_key) {\n      window._g_navigator_history_key = window.history.state.key;\n    }\n    function back() {\n      if (window.history.state.key !== window._g_navigator_history_key) {\n        root.$router.back();\n      } else {\n        root.$router.push(`${isQt() ? '/qt' : ''}/material-mall/home`);\n      }\n    }\n    return {\n      back,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.navigator{\n  position: sticky;\n  z-index: 3;\n  top: 60px;\n  user-select: none;\n  width: 100%;\n  height: 44px;\n  background:#f9f9f9;\n  line-height: 44px;\n  box-shadow:0px 2px 4px 0px rgba(0,0,0,0.1);\n  // opacity:0.75;\n  &.hide-background{\n    background: transparent;\n    border-bottom: 1px solid transparent;\n    box-shadow: none;\n  }\n}\n\n.qt-page{\n  top: 0\n}\n\n.back{\n  margin-right: 10px;\n  cursor: pointer;\n  &:hover{\n    color: $color-primary;\n  }\n}\n\n.icon-angle-left{\n  padding: 0 10px;\n}\n.page-name{\n  padding-left: 10px;\n  border-left: 1px solid #666;\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Navigator.vue?vue&type=template&id=3c55da5d&scoped=true&\"\nimport script from \"./Navigator.vue?vue&type=script&lang=js&\"\nexport * from \"./Navigator.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Navigator.vue?vue&type=style&index=0&id=3c55da5d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3c55da5d\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Navigator.vue?vue&type=style&index=0&id=3c55da5d&lang=scss&scoped=true&\""],"sourceRoot":""}