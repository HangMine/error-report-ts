{"version":3,"sources":["webpack:///./src/views/material-mall/components/CommodityItem.vue?2fb5","webpack:///./src/views/material-mall/components/CommodityItem.vue?3e87","webpack:///./src/components/OmittedDisplayer.vue?63f3","webpack:///./src/components/OmittedDisplayer.vue?a7c2","webpack:///src/components/OmittedDisplayer.vue","webpack:///./src/components/OmittedDisplayer.vue?fc76","webpack:///./src/components/OmittedDisplayer.vue","webpack:///./src/views/material-mall/components/CommodityItem.vue","webpack:///./src/views/material-mall/components/CommodityItem.vue?41f0","webpack:///./src/views/material-mall/components/CommodityItem.vue?0116"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isTextEllipsis","outsideContent","textContent","ref","staticClass","style","_width","_t","staticRenderFns","props","width","type","Number","String","default","computed","data","mounted","judgeIsVisible","node","document","documentElement","display","parentNode","observer","disconnect","res","visible","obs","observe","dom","judgeVisibilityThenInit","component","materialInfo","Object","required","displayMode","operations","Array","generateOperations","ops","goToCompany","$t","goToColorBoard","goToSearchSimilar","filter","item","idx","includes","flat","handleClickFigure","e","$act","$emit","stopPropagation","length","imgSrc","height","isCloudRenderComplete","materialName","setup","emit","root","isQtInjection","urlPrefix","imgJson","texture","thumbnail","company","value","$router","push","path","query","$route","id","companyId","supplierArticleName","searchSimilarPath","colorFamily","materialType","replace"],"mappings":"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","file":"js/chunk-0233d502.7b75f65f.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=style&index=0&id=a25b7d48&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=style&index=1&lang=scss&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=style&index=0&id=47562528&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-tooltip',{attrs:{\"disabled\":!_vm.isTextEllipsis,\"content\":_vm.outsideContent || _vm.textContent,\"tabindex\":null}},[_c('span',{ref:\"nameWrapper\",staticClass:\"omitted-displayer\",style:((\"max-width: \" + _vm._width))},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-tooltip :disabled=\"!isTextEllipsis\" :content=\"outsideContent || textContent\" :tabindex=\"null\">\n    <span :style=\"`max-width: ${_width}`\" class=\"omitted-displayer\" ref=\"nameWrapper\">\n      <slot></slot>\n    </span>\n  </el-tooltip>\n</template>\n\n<script>\nexport default {\n  props: {\n    width: {\n      type: [Number, String],\n      default: 200,\n    },\n    outsideContent: {\n      default: '',\n      type: String,\n    },\n  },\n  computed: {\n    _width() {\n      return typeof this.width === 'number'\n        ? `${this.width}px`\n        : this.width;\n    },\n  },\n  data() {\n    return {\n      isTextEllipsis: null,\n      textContent: null,\n    };\n  },\n  mounted() {\n    /** 用于递归向上判断元素是否可见，由于部分vue实例处于未匹配路由或未激活的状态，使用display：none\n     * 来实现的，所以通过这个来判断组件是否处于显示状态\n     */\n    function judgeIsVisible(node) {\n      if (node === document.documentElement) return { visible: true };\n      if (node.style.display !== 'none') return judgeIsVisible(node.parentNode);\n      return { visible: false, pendingDom: node };\n    }\n    /** 用于判断可见性，若可见，则获取必要的数据（长度是否超过限度，完整内容是什么）\n     * 分为初始化时调用、MutationObserver回调两种情况 */\n    const judgeVisibilityThenInit = (_, observer) => {\n      if (observer) observer.disconnect();\n      const res = judgeIsVisible(this.$el);\n      if (!res.visible) {\n        const dom = res.pendingDom;\n        const obs = new MutationObserver(judgeVisibilityThenInit);\n        obs.observe(dom, { attributes: true, attributeFilter: ['style'] });\n        return;\n      }\n      this.isTextEllipsis = this.$refs.nameWrapper?.offsetWidth\n        < this.$refs.nameWrapper?.scrollWidth;\n      this.textContent = this.$el.innerHTML;\n    };\n    judgeVisibilityThenInit();\n  },\n};\n</script>\n\n<style scoped>\n.omitted-displayer {\n  display: inline-block;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OmittedDisplayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OmittedDisplayer.vue?vue&type=template&id=47562528&scoped=true&\"\nimport script from \"./OmittedDisplayer.vue?vue&type=script&lang=js&\"\nexport * from \"./OmittedDisplayer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OmittedDisplayer.vue?vue&type=style&index=0&id=47562528&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47562528\",\n  null\n  \n)\n\nexport default component.exports","var render, staticRenderFns\nimport script from \"./CommodityItem.vue?vue&type=script&lang=tsx&\"\nexport * from \"./CommodityItem.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./CommodityItem.vue?vue&type=style&index=0&id=a25b7d48&lang=scss&scoped=true&\"\nimport style1 from \"./CommodityItem.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a25b7d48\",\n  null\n  \n)\n\nexport default component.exports","\nimport { computed, defineComponent, inject } from '@vue/composition-api';\nimport { getCurrentCompany } from '@/loaders/company';\nimport { MaterialGoods } from '@/models/MaterialGood';\nimport open from '@/utils/open-window';\nimport OmittedDisplayer from '@/components/OmittedDisplayer.vue';\n\nexport default defineComponent({\n  props: {\n    materialInfo: {\n      type: Object as () => MaterialGoods,\n      required: true,\n    },\n    displayMode: {\n      type: String as () => 'drape' | 'flat',\n      default: 'drape',\n    },\n    // urlPrefix: {\n    //   type: String,\n    //   required: true,\n    // },\n    operations: {\n      type: Array as () => number[],\n      default: () => [0, 1, 2],\n    },\n  },\n  render() {\n    const generateOperations = (ops: number[]) => {\n      return [\n        <li class='flex-vertical-center li-option' onclick={this.goToCompany}>\n          <i class='i-shangjia'></i>\n          <div>{this.$t('material-mall.supplier-page')}</div>\n        </li>,\n        <li class='flex-vertical-center li-option' onclick={this.goToColorBoard}>\n          <i class='i-seka'></i>\n          <div>{this.$t('material-mall.material_swatch')}</div>\n        </li>,\n        <li class='flex-vertical-center li-option' onclick={this.goToSearchSimilar}>\n          <i class='i-yitusoutu'></i>\n          <div>{this.$t('material-mall.similar_search')}</div>\n        </li>,\n      ].filter((item, idx) => ops.includes(idx));\n    };\n    return <figure class={['container', 'flex-column', { flat: this.displayMode === 'flat' }]} draggable={false} onclick={this.handleClickFigure}>\n      <div class='magnify' onclick={(e: Event) => this.$act(() => {\n        this.$emit('preview');\n        e.stopPropagation();\n      })}>\n        {\n          // <i class='tri'></i>\n        }\n\n        <i class='i-fangdajing'></i>\n      </div>\n      {\n        this.operations.length\n          ? <el-popover trigger=\"hover\" visible-arrow={false} popper-class='commodity-options'>\n            <ul class='flex-column'>\n              {generateOperations(this.operations)}\n            </ul>\n            <i class='more-options i-gengduo1' slot='reference' onclick={(e: Event) => e.stopPropagation()}></i>\n          </el-popover> : null\n      }\n      <base-image src={this.imgSrc} class={{ 'material-picture': true }}\n        fit={this.displayMode === 'flat' ? 'cover' : 'scale-down'} thumb={{ width: 204, height: 204 }}></base-image>\n      {\n        this.materialInfo.isCloudRenderComplete !== 1\n          ? <span class='material-render-flag'>{this.$t('material-mall.preview_picture')}</span>\n          : null\n      }\n      <figcaption class='flex-center material-name'>\n        <OmittedDisplayer width={224} outsideContent={this.materialInfo.materialName}>\n          {this.materialInfo.materialName}\n        </OmittedDisplayer>\n      </figcaption>\n    </figure>;\n  },\n  setup(props, { emit, root }) {\n    const isQtInjection = inject('isQt') as () => boolean;\n    const urlPrefix = isQtInjection() ? '/qt' : '';\n    const imgSrc = computed(() => {\n      if (props.displayMode === 'flat') {\n        return props.materialInfo.imgJson.texture ?? props.materialInfo.imgJson.flat;\n      }\n      return props.materialInfo.imgJson.thumbnail;\n    });\n    const company = computed(() => getCurrentCompany());\n    function handleClickFigure() {\n      if (company.value!.type === 3) {\n        root.$router.push({\n          path: `${urlPrefix}/supplier-backend/preview/goods-detail`,\n          query: {\n            ...root.$route.query,\n            id: props.materialInfo.id,\n          },\n        });\n      } else if (urlPrefix) {\n        root.$router.push({\n          path: '/qt/material-mall/goods-detail',\n          query: {\n            id: props.materialInfo.id,\n          },\n        });\n      } else {\n        open({\n          path: '/material-mall/goods-detail',\n          query: {\n            id: props.materialInfo.id,\n          },\n        });\n      }\n    }\n\n    function goToCompany(e: Event) {\n      e.stopPropagation();\n      root.$router.push({\n        path: `${urlPrefix}/supplier-page/preview/homepage`,\n        query: {\n          companyId: props.materialInfo.companyId,\n        },\n      });\n    }\n\n    function goToColorBoard(e: Event) {\n      e.stopPropagation();\n      root.$router.push({\n        path: `${urlPrefix}/material-mall/colorboard`,\n        query: {\n          supplierArticleName: props.materialInfo.supplierArticleName,\n        },\n      });\n    }\n    function goToSearchSimilar(e: Event) {\n      e.stopPropagation();\n      const searchSimilarPath = `${urlPrefix}/material-mall/searchsimilar`;\n      const query = {\n        colorFamily: props.materialInfo.colorFamily,\n        type: props.materialInfo.materialType,\n        id: props.materialInfo.id,\n      };\n      if (root.$route.path === searchSimilarPath) {\n        root.$router.replace({\n          path: searchSimilarPath,\n          // @ts-ignore\n          query,\n        });\n      } else {\n        root.$router.push({\n          path: searchSimilarPath,\n          // @ts-ignore\n          query,\n        });\n      }\n    }\n    return {\n      imgSrc,\n      company,\n      handleClickFigure,\n\n      goToCompany,\n      goToColorBoard,\n      goToSearchSimilar,\n    };\n  },\n});\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommodityItem.vue?vue&type=script&lang=tsx&\""],"sourceRoot":""}