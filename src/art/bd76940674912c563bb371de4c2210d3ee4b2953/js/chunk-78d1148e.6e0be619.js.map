{"version":3,"sources":["webpack:///./src/views/supplier-backend/company-info/CompanyInfoView.vue","webpack:///./src/views/supplier-backend/company-info/CompanyInfoView.vue?b1fd","webpack:///./src/views/supplier-backend/company-info/CompanyInfoView.vue?341a","webpack:///./src/views/material/info/components/UnitField.vue?c985","webpack:///./src/views/material/info/components/UnitField.vue?b6eb","webpack:///src/views/material/info/components/UnitField.vue","webpack:///./src/views/material/info/components/UnitField.vue?bf5f","webpack:///./src/views/material/info/components/UnitField.vue","webpack:///./src/views/supplier-backend/company-info/CompanyInfoView.vue?455c","webpack:///./src/api/dictionary.js"],"names":["staticRenderFns","CompanyInfoView","name","components","UnitField","props","companyInfo","type","Object","default","companyTypes","Array","companyScale","credentials","render","self","this","industry","logo","abbreviation","scale","creatorMail","creatorPhone","country","address","handleClick","logoError","t","find","e","itemValue","label","value","length","map","cred","index","width","height","imgUrl","backgroundColor","setup","$ImageViewer","root","show","targetElems","component","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","unit","String","required","Number","immediate","getDictionaryByTypeCode","typeCode","language","axios","method","url","headers","params","getCountryList","keyword"],"mappings":"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","file":"js/chunk-78d1148e.6e0be619.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./CompanyInfoView.vue?vue&type=script&lang=tsx&\"\nexport * from \"./CompanyInfoView.vue?vue&type=script&lang=tsx&\"\nimport style0 from \"./CompanyInfoView.vue?vue&type=style&index=0&id=01d505ec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01d505ec\",\n  null\n  \n)\n\nexport default component.exports","\nimport { defineComponent, ref, watch } from '@vue/composition-api';\nimport i18n from 'i18next';\nimport Company from '@/models/Company';\nimport { DictOption, DictItem } from '@/models/Dictionary';\nimport Credential from '@/models/CompanyCredential';\nimport UnitField from '@/views/material/info/components/UnitField.vue';\n\nconst CompanyInfoView = defineComponent({\n  name: 'CompanyInfoView',\n  components: {\n    UnitField,\n  },\n  props: {\n    companyInfo: {\n      type: Object as () => Company,\n      default: () => ({} as Company),\n    },\n    companyTypes: {\n      type: Array as () => DictItem[],\n      default: () => [] as DictItem[],\n    },\n    companyScale: {\n      type: Array as () => DictOption[],\n      default: () => [] as DictOption[],\n    },\n    credentials: {\n      type: Array as () => Credential[],\n      default: () => [] as Credential[],\n    },\n  },\n  render() {\n    const self = this as InstanceType<typeof CompanyInfoView>;\n    const {\n      companyInfo: {\n        name,\n        industry,\n        logo,\n        type,\n        abbreviation,\n        scale,\n        creatorMail,\n        creatorPhone,\n        country,\n        address,\n      },\n      companyTypes,\n      companyScale,\n      credentials,\n      handleClick,\n    } = self;\n\n    return (\n      <main class='company-info-view'>\n        <header>\n          <div class='brand-header flex'>\n            <div class='logo-wrapper flex-center'>\n              {self.logoError\n                ? <i class='logo-placeholder iconfont iconshangjiakongbaizhuangicon'></i>\n                : <img class='logo-img' src={logo}\n                onerror={() => { self.logoError = true; }} /> }\n            </div>\n            <div class=\"flex-column flex-justify-center\" style='margin-left: 20px;'>\n              <div class='brand-name'>{name || i18n.t('supplier-backend.preview.no_name')}</div>\n              <p class='brand-industry'>\n                {industry || i18n.t('supplier-backend.preview.no_industry')}\n              </p>\n            </div>\n          </div>\n        </header>\n        <section class='section-base-info'>\n          <el-divider content-position='left'>{ i18n.t('supplier-backend.company-brief.company_info') }</el-divider>\n          <div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.business_type')}:</span>\n              <span>\n                {(companyTypes ? companyTypes.find(e => e.itemValue === type)?.label : '') || i18n.t('supplier-backend.company-brief.empty')}\n              </span>\n            </div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.company_alias')}:</span>\n              <span>{abbreviation || i18n.t('supplier-backend.company-brief.empty')}</span>\n            </div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.company_size')}:</span>\n              <span>{(companyScale ? companyScale.find(e => e.value === scale)?.name : '') || i18n.t('supplier-backend.company-brief.empty')}</span>\n            </div>\n          </div>\n        </section>\n\n        <section class='section-contact-info'>\n          <el-divider content-position='left'>{ i18n.t('supplier-backend.company-brief.contact_us') }</el-divider>\n          <div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.contact_email')}:</span>\n              <span>{creatorMail || i18n.t('supplier-backend.company-brief.empty')}</span>\n            </div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.contact_info')}:</span>\n              <span>{creatorPhone || i18n.t('supplier-backend.company-brief.empty')}</span>\n            </div>\n            <div class='info-item'>\n              <span class='info-title'>{ i18n.t('supplier-backend.company-brief.address')}:</span>\n              <span class='info-content'>\n                {address}{address && country ? ', ' : ''}<UnitField type=\"country\" value={country} />\n                <span>{(!address && !country) ? i18n.t('supplier-backend.company-brief.empty') : ''}</span>\n              </span>\n            </div>\n          </div>\n        </section>\n\n        <section class='section-credentials'>\n          <el-divider content-position='left'>{ i18n.t('supplier-backend.company-brief.credentials') }</el-divider>\n          <div class=\"credentials-list\">\n            { credentials?.length > 0 ? credentials.map((cred, index) => (\n              <div class='cred-item'>\n                <div class=\"cred-img-wrap\"\n                  onClick={ () => handleClick(index) }>\n                  <div class=\"cred-img-zoom-veil\">\n                    <i class=\"iconfont el-icon-zoom-in\"></i>\n                  </div>\n                  <base-image\n                    fit=\"contain\"\n                    thumb={{ width: 220, height: 169 }}\n                    style={{ height: 200, backgroundColor: 'rgb(245, 245, 245)' }}\n                    src={ cred.imgUrl }\n                    default-image=''\n                    class=\"cred-img\">\n                  </base-image>\n                </div>\n              </div>\n            )) : <div class='credentials-empty'>{ i18n.t('supplier-backend.company-brief.credentials_empty') }</div>\n            }\n          </div>\n        </section>\n      </main>\n    );\n  },\n  setup(props, { root: { $ImageViewer } }) {\n    async function handleClick(index: number) {\n      await $ImageViewer.show(props.credentials.map(cred => cred.imgUrl), {\n        index,\n        targetElems: '.cred-img-wrap',\n      });\n    }\n    return {\n      logoError: ref(false),\n      handleClick,\n    };\n  },\n});\nexport default CompanyInfoView;\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CompanyInfoView.vue?vue&type=script&lang=tsx&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CompanyInfoView.vue?vue&type=script&lang=tsx&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"unit-text\"},[_vm._v(_vm._s(_vm.unit))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <span class=\"unit-text\">{{ unit }}</span>\n</template>\n\n<script>\nimport { defineComponent, ref, watch } from '@vue/composition-api';\nimport i18n from 'i18next';\n\nimport { getCountryList, getDictionaryByTypeCode } from '@/api/dictionary';\n\nexport default defineComponent({\n  props: {\n    // 单位的类型\n    type: {\n      type: String,\n      required: true,\n    },\n    // 单位的值\n    value: {\n      type: [Number, String],\n      // required: true,\n    },\n  },\n  setup(props, { root: { $errHandler } }) {\n    const unit = ref('');\n\n    watch(() => props.value, async () => {\n      // 处理空值和null情况\n      if (props.value) {\n        try {\n          let units;\n          let currentUnit;\n          // 国家字典的情况\n          if (props.type === 'country') {\n            units = (await getCountryList()).data;\n            currentUnit = units.find(u => +u.id === +props.value);\n            // unit.value = currentUnit ? currentUnit.usName : '';\n            unit.value = currentUnit\n              ? (i18n.language === 'en' ? (currentUnit.usName || currentUnit.name) : (currentUnit.name || currentUnit.usName))\n              : '';\n          } else {\n            units = (\n              await getDictionaryByTypeCode(props.type, i18n.language)\n            ).data;\n            currentUnit = units.find(u => +u.itemValue === +props.value);\n            unit.value = currentUnit ? currentUnit.label : '';\n          }\n        } catch (err) {\n          $errHandler(err);\n        }\n      } else {\n        unit.value = '';\n      }\n    }, {\n      immediate: true,\n    });\n\n    return { unit };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.unit-text {\n  display: inline-block;\n  line-height: 22px;;\n  vertical-align: middle;\n  white-space: normal;\n  & + .unit-text {\n    margin-left: 8px;\n  }\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnitField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UnitField.vue?vue&type=template&id=8f26f40a&scoped=true&\"\nimport script from \"./UnitField.vue?vue&type=script&lang=js&\"\nexport * from \"./UnitField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UnitField.vue?vue&type=style&index=0&id=8f26f40a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8f26f40a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CompanyInfoView.vue?vue&type=style&index=0&id=01d505ec&lang=scss&scoped=true&\"","import { getDictByType as _getDictByType } from '@/loaders/dictionary';\nimport axios from './axios';\n\n/**\n * 根据类型获取该字典数据\n * @param {String} type 类型\n * @returns {Promise}\n */\nexport const getDictByType = async (type) => {\n  return {\n    data: await _getDictByType({ type }),\n  };\n};\n\n/**\n * 根据类型获取该字典数据\n * @param {String} typeCode\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6104\n */\nexport const getDictionaryByTypeCode = (typeCode, language) => {\n  return axios({\n    method: 'get',\n    url: '/bff-center/showCommon/getDictionaryTypeItem',\n    headers: { language },\n    params: { typeCode },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCountryList = (keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCountry',\n    params: { keyword },\n  });\n};\n\n/**\n * 获取国家列表\n * @param {String} countryId 国家ID\n * @param {String} keyword 搜索关键字\n * @returns {Promise}\n */\nexport const getCityList = (countryId, keyword = '') => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getCity',\n    params: { countryId, keyword },\n  });\n};\n\n\nexport const getOSSAuth = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSAuth',\n  });\n};\n\nexport const getOSSUrl = () => {\n  return axios({\n    method: 'get',\n    url: '/show/dictionary/getOSSUrl',\n  });\n};\n\n// 获取国家下的城市\n\n\n/* ==================== 标签相关 ================== */\n/**\n * 新增标签\n * @param {Object} data { shareId: string, tags: string[], type: string }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6116\n */\nexport const addTags = (data) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/addTags',\n    data,\n  });\n};\n\n/**\n * 删除标签\n * @param {Array} tagIds { string[] }\n * @see http://yapi.4dshoetech.local/project/115/interface/api/6128\n */\nexport const removeTags = (tagIds) => {\n  return axios({\n    method: 'post',\n    url: '/bff-center/showCommon/deleteTag',\n    data: tagIds,\n  });\n};\n"],"sourceRoot":""}