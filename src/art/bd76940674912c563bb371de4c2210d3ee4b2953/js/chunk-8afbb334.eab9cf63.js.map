{"version":3,"sources":["webpack:///./src/api/material-mall.js","webpack:///./src/views/material-mall/share-goods/index.tsx"],"names":["getMaterialDetail","id","axios","method","url","params","getLibraryMaterialDetail","getMaterialCollectStatus","data","addCollect","materialId","removeCollect","increaseClick","props","type","String","required","render","this","goodInfo","colorSwatchs","setup","gi","value","supplierArticleName","get","pageNumber","pageSize","res","records","map","flat","imgJson"],"mappings":"kHAAA,4NAKaA,EAAoB,SAACC,GAChC,OAAOC,eAAM,CACXC,OAAQ,MACRC,IAAK,iBACLC,OAAQ,CACNJ,SAQOK,EAA2B,SAACL,GACvC,OAAOC,eAAM,CACXC,OAAQ,MACRC,IAAK,qBACLC,OAAQ,CACNJ,SASOM,EAA2B,SAACN,GACvC,OAAOC,eAAM,CACXC,OAAQ,OACRC,IAAK,sBACLI,KAAM,CACJP,SAQOQ,EAAa,SAACR,EAAIS,GAC7B,OAAOR,eAAM,CACXC,OAAQ,OACRC,IAAK,oBACLI,KAAM,CACJP,KACAS,iBAOOC,EAAgB,SAACV,EAAIS,GAChC,OAAOR,eAAM,CACXC,OAAQ,OACRC,IAAK,uBACLI,KAAM,CACJP,KACAS,iBAQOE,EAAgB,SAACX,GAC5B,OAAOC,eAAM,CACXC,OAAQ,OACRC,IAAK,4BACLI,KAAM,CACJP,U,sKCtES,0CAAgB,CAC7BY,MAAO,CACLZ,GAAI,CACFa,KAAMC,OACNC,UAAU,IAGdC,OAP6B,WAOvB,mBACJ,uCAA+BC,KAAKC,SAApC,aAA4DD,KAAKE,aAAjE,GAAmFF,KAAKjB,OAE1FoB,MAV6B,SAUvBR,GACJ,IAAMM,EAAW,IAAS,yDAAC,4GAASlB,EAAT,EAASA,GAAT,SACX,eAAkBA,GADP,uCACYO,MADZ,2CAAD,sDAEvBK,GAEGO,EAAe,IAAS,yDAAC,WAAOE,GAAP,6FAEzBA,EAAGC,MAFsB,uBAGnBC,EAAwBF,EAAGC,MAA3BC,oBAHmB,SAIP,OAAMC,IAAI,8BAA+B,CAC3DpB,OAAQ,CACNmB,sBACAE,WAAY,EACZC,SAAU,MARa,cAIrBC,EAJqB,OAUvBpB,KAAKqB,QAAiCC,KAAI,gBAAcC,EAAd,EAAGC,QAAWD,KAAd,OAA2BA,KAV9C,kBAWpBH,GAXoB,2CAAD,sDAa3B,sBAAST,IACZ,MAAO,CACLA,WACAC","file":"js/chunk-8afbb334.eab9cf63.js","sourcesContent":["import axios from './axios';\n\n/**\n * 查询面料详细信息\n */\nexport const getMaterialDetail = (id) => {\n  return axios({\n    method: 'get',\n    url: '/mall/material',\n    params: {\n      id,\n    },\n  });\n};\n\n/**\n * 读取收藏信息的接口\n */\nexport const getLibraryMaterialDetail = (id) => {\n  return axios({\n    method: 'get',\n    url: '/mall/collect/info',\n    params: {\n      id,\n    },\n  });\n};\n\n\n/**\n * 获取是否收藏\n */\nexport const getMaterialCollectStatus = (id) => {\n  return axios({\n    method: 'post',\n    url: '/mall/collect/check',\n    data: {\n      id,\n    },\n  });\n};\n\n/**\n * 新增收藏\n */\nexport const addCollect = (id, materialId) => {\n  return axios({\n    method: 'post',\n    url: '/mall/collect/add',\n    data: {\n      id,\n      materialId,\n    },\n  });\n};\n/**\n * 取消收藏\n */\nexport const removeCollect = (id, materialId) => {\n  return axios({\n    method: 'post',\n    url: '/mall/collect/remove',\n    data: {\n      id,\n      materialId,\n    },\n  });\n};\n\n/**\n * 取消收藏\n */\nexport const increaseClick = (id) => {\n  return axios({\n    method: 'post',\n    url: '/mall/mall/click/increase',\n    data: {\n      id,\n    },\n  });\n};\n","import { getMaterialDetail } from '@/api/material-mall';\nimport useLoader from '@4dst-saas/public-utils/dist/composables/use-loader';\nimport { defineComponent, reactive } from '@vue/composition-api';\nimport { MaterialGoods, ImgJson } from '@/models/MaterialGood';\nimport axios from '@/utils/axios';\nimport SvgGenerator from './SvgGenerator';\n\nexport default defineComponent({\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n  },\n  render() {\n    return <SvgGenerator goodInfo={this.goodInfo} colorSwatchs={this.colorSwatchs} id={this.id}></SvgGenerator>;\n  },\n  setup(props) {\n    const goodInfo = useLoader(async ({ id }) => {\n      return (await getMaterialDetail(id)).data as MaterialGoods;\n    }, props);\n    // eslint-disable-next-line consistent-return\n    const colorSwatchs = useLoader(async (gi) => {\n      // @ts-ignore\n      if (gi.value) {\n        const { supplierArticleName } = gi.value as MaterialGoods;\n        const res = ((await axios.get('/mall/mall/colorSwatch/list', {\n          params: {\n            supplierArticleName,\n            pageNumber: 1,\n            pageSize: 12,\n          },\n        })).data.records as {imgJson: ImgJson}[]).map(({ imgJson: { flat } }) => flat);\n        return res;\n      }\n    }, reactive(goodInfo));\n    return {\n      goodInfo,\n      colorSwatchs,\n    };\n  },\n});\n"],"sourceRoot":""}