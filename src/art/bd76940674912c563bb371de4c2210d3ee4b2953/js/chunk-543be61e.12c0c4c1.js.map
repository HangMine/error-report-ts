{"version":3,"sources":["webpack:///./src/views/material-mall/mobile-material-goods/core-info/MaterialSourceSwiper.vue?fc88","webpack:///./src/views/material-mall/mobile-material-goods/core-info/MaterialSourceSwiper.vue?862d","webpack:///./src/views/material-mall/mobile-material-goods/core-info/MaterialSourceSwiper.vue?4d15","webpack:///./src/views/material-mall/mobile-material-goods/core-info/MaterialSourceSwiper.vue?28cc","webpack:///./src/views/material-mall/mobile-material-goods/core-info/MaterialSourceSwiper.vue","webpack:///./src/views/material-mall/mobile-material-goods/utils.ts","webpack:///./src/utils/image-to-dataurl.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","computedImgJson","isDatapipe","on","handleLoadEnd","staticRenderFns","mixins","props","imgJson","type","Object","setup","e","dataurl","path","src","addCount","map","k","concat","images","filter","i","swipe","component","getMaterialDetail","id","method","url","params","countSettledAxios","count","Number","model","prop","event","methods","$emit","image2DataUrl","image","width","height","c","document","createElement","getContext","drawImage","toDataURL"],"mappings":"mIAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoBC,MAAM,CAAC,IAAMP,EAAIQ,gBAAgB,GAAG,IAAMR,EAAIQ,gBAAgB,GAAG,YAAcR,EAAIS,WAAWT,EAAIQ,gBAAgB,IAAM,kBAAoB,aAAaE,GAAG,CAAC,KAAOV,EAAIW,oBACnVC,EAAkB,G,gFCeP,+BAAgB,CAC7BC,OAAQ,CAAC,wBACTC,MAAO,CACLC,QAAS,CACPC,KAAMC,SAGVC,MAP6B,SAOvBJ,GACJ,SAASH,EAAcQ,GACrB,IAAMC,EAAU,eAAcD,EAAEE,KAAK,IACrCF,EAAEE,KAAK,GAAGC,IAAMF,EAChBnB,KAAKsB,WAEP,MAAO,CACLf,gBAAiB,uBAAS,WACxB,OAAKM,EAAMC,QAET,CAAC,YAAa,OAAQ,WACtBS,KAAI,SAAAC,GAAC,OAAIX,EAAMC,QAASU,MAAIC,OAAOZ,EAAMC,QAAQY,QAAQC,QAAO,SAAAC,GAAC,OAAIA,KAH5C,MAK7BC,MAAO,iBAAI,MACXrB,WAAA,OACAE,oBCtC+b,I,wBCQjcoB,EAAY,eACd,EACAhC,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAAmB,E,2MC0CFC,EAAoB,SAACC,GAChC,OAAO,eAAM,CACXC,OAAQ,MACRC,IAAK,iBACLC,OAAQ,CACNH,SAKOI,EAAoB,CAC/BvB,MAAO,CACLwB,MAAOC,QAETC,MAAO,CACLC,KAAM,QACNC,MAAO,UAETC,QAAS,CACPpB,SADO,WAELtB,KAAK2C,MAAM,SAAU3C,KAAKqC,MAAQ,O,oCCjF1B,SAAUO,EAAcC,GAAuB,IACnDC,EAAkBD,EAAlBC,MAAOC,EAAWF,EAAXE,OACTC,EAAIC,SAASC,cAAc,UAIjC,OAHAF,EAAEF,MAAQA,EACVE,EAAED,OAASA,EACXC,EAAEG,WAAW,MAAOC,UAAUP,EAAO,EAAG,EAAGC,EAAOC,GAC3CC,EAAEK,UAAU,aANrB","file":"js/chunk-543be61e.12c0c4c1.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialSourceSwiper.vue?vue&type=style&index=0&id=62f2f3ee&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"swipe-item\"},[_c('img',{staticClass:\"swipe-item__image\",attrs:{\"src\":_vm.computedImgJson[0],\"alt\":_vm.computedImgJson[0],\"crossorigin\":_vm.isDatapipe(_vm.computedImgJson[0]) ? 'use-credentials' : 'anonymous'},on:{\"load\":_vm.handleLoadEnd}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { defineComponent, computed, ref } from '@vue/composition-api';\nimport image2DataUrl from '@/utils/image-to-dataurl';\nimport isDatapipe from '@/utils/is-data-pipe-url';\nimport { ImgJson, countSettledAxios } from '../utils';\n\nexport default defineComponent({\n  mixins: [countSettledAxios],\n  props: {\n    imgJson: {\n      type: Object as () => ImgJson,\n    },\n  },\n  setup(props) {\n    function handleLoadEnd(e: Event) {\n      const dataurl = image2DataUrl(e.path[0] as HTMLImageElement);\n      e.path[0].src = dataurl;\n      this.addCount();\n    }\n    return {\n      computedImgJson: computed(() => {\n        if (!props.imgJson) return [];\n        return (\n          ['thumbnail', 'flat', 'texture'] as (keyof ImgJson)[]\n        ).map(k => props.imgJson![k]).concat(props.imgJson.images).filter(i => i);\n      }),\n      swipe: ref(null),\n      isDatapipe,\n      handleLoadEnd,\n    };\n  },\n});\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialSourceSwiper.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MaterialSourceSwiper.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./MaterialSourceSwiper.vue?vue&type=template&id=62f2f3ee&scoped=true&\"\nimport script from \"./MaterialSourceSwiper.vue?vue&type=script&lang=ts&\"\nexport * from \"./MaterialSourceSwiper.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./MaterialSourceSwiper.vue?vue&type=style&index=0&id=62f2f3ee&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62f2f3ee\",\n  null\n  \n)\n\nexport default component.exports","import axios from '@/utils/axios';\n\nexport interface ImgJson {\n  diffuse: string\n  flat: string\n  height: string\n  normal: string\n  specular: string\n  thumbnail: string\n  toeThumbnail: string\n  texture?: string\n\n  glossiness: string\n  // 有的有有的没有，条件暂时不明\n  images?: string[]\n  models?: string[]\n  videos?: string[]\n}\n\nexport interface MaterialGoods {\n  id: string\n  materialId: string\n  materialName: string\n  imgJson: ImgJson\n  /* 点击数 */\n  click?: number\n  color?: string\n  colorFamily?: string\n  companyId?: string\n  samplePrice?: number\n  totalSize?: number\n  [propName: string]: any\n\n  materialType: number\n  /** 供应商材料名称 */\n  supplierArticleName: string\n  supplierArticleNo: string\n  supplierName: string\n  /** 使用部位 */\n  partUsed: string\n  /** 起订量 */\n  moq: number\n  moqUnit: number\n  season: string\n  /** 样品周期 */\n  samplePeriod: string\n  samplePeriodUnit: number\n  /** 大货周期；接口如此 */\n  productionLeadTime: null\n  productionLeadTimeUnit: string\n  /* 规格 */\n  specification: string\n  /** 接口如此 */\n  thickness:null\n  /* 原产地 */\n  materialCountryOfOrigin: string\n}\n\n/**\n * 查询面料详细信息\n */\nexport const getMaterialDetail = (id: string) => {\n  return axios({\n    method: 'get',\n    url: '/mall/material',\n    params: {\n      id,\n    },\n  });\n};\n\nexport const countSettledAxios = {\n  props: {\n    count: Number,\n  },\n  model: {\n    prop: 'count',\n    event: 'update',\n  },\n  methods: {\n    addCount() {\n      this.$emit('update', this.count + 1);\n    },\n  },\n};\n","export default function image2DataUrl(image: HTMLImageElement) {\n  const { width, height } = image;\n  const c = document.createElement('canvas');\n  c.width = width;\n  c.height = height;\n  c.getContext('2d')!.drawImage(image, 0, 0, width, height);\n  return c.toDataURL('image/png');\n}\n"],"sourceRoot":""}