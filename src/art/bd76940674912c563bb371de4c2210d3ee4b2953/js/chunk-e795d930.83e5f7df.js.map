{"version":3,"sources":["webpack:///./src/views/supplier-backend/components/HTable/utils.ts","webpack:///./src/views/supplier-backend/components/HTable/mixin/cellClick.js"],"names":["_toString","Object","prototype","toString","toRawType","value","call","slice","getInitValue","type","Date","getInitObj","originObj","preValueObj","obj","entries","key","hasOwnProperty","deepCopy","cache","hit","filter","c","original","copy","Array","isArray","push","keys","forEach","getPx","num","val","textarea","document","createElement","body","appendChild","select","execCommand","parentNode","removeChild","getColumnKeys","column","children","helper","arr","item","mounted","this","headerFooterClick","desdroyed","$refs","table","$el","removeEventListener","handleHeaderFooterClick","methods","cellClick","row","cell","event","target","tagName","cellText","property","name","addEventListener","e","dom","nodeType","classList","contains","textContent"],"mappings":"siBAEMA,EAAYC,OAAOC,UAAUC,SACtBC,EAAY,SAACC,GAAD,OAAeL,EAAUM,KAAKD,GAAOE,MAAM,GAAI,IAG3DC,EAAe,SAACH,GAC3B,IAAMI,EAAOL,EAAUC,GACvB,OAAQI,GACN,IAAK,QACH,MAAO,GACT,IAAK,SACH,MAAO,GACT,IAAK,OACH,OAAO,IAAIC,KACb,IAAK,SACH,OAAO,EACT,IAAK,OACL,IAAK,YACL,IAAK,WACH,OAAOL,EACT,QACE,MAAO,KAIAM,EAAa,WAGxB,IAHqE,IAA5CC,EAA4C,uDAA5B,GAAIC,EAAwB,uDAAN,GACzDC,EAAU,GAEhB,MAA2Bb,OAAOc,QAAQH,GAA1C,eAAsD,8BAA1CI,EAA0C,KAArCX,EAAqC,KAEpDS,EAAIE,GAAOH,EAAYI,eAAeD,GAAOH,EAAYG,GAAOR,EAAaH,GAE/E,OAAOS,GASII,EAAW,SAAXA,EAAYJ,GAAkD,IAAzCK,EAAyC,uDAAN,GACnE,GAAY,OAARL,GAA+B,WAAf,eAAOA,GACzB,OAAOA,EAET,IAAMM,EAAMD,EAAME,QAAO,SAAAC,GAAC,OAAIA,EAAEC,WAAaT,KAAK,GAClD,GAAIM,EACF,OAAOA,EAAII,KAEb,IAAMA,EAAWC,MAAMC,QAAQZ,GAAO,GAAK,GAQ3C,OAPAK,EAAMQ,KAAK,CACTJ,SAAUT,EACVU,SAEFvB,OAAO2B,KAAKd,GAAKe,SAAQ,SAAAb,GACvBQ,EAAKR,GAAOE,EAASJ,EAAIE,GAAMG,MAE1BK,GAQIM,EAAQ,SAACC,GAAD,MAA2C,WAAnB3B,EAAU2B,GAAV,UAAiCA,EAAjC,MAA2CA,GAO3EP,EAAO,SAACQ,GAAc,MAE3BC,EAAWC,SAASC,cAAc,YAKxC,OAJAF,EAAS5B,MAAQ2B,EACjBE,SAASE,KAAKC,YAAYJ,GAC1BA,EAASK,SACTJ,SAASK,YAAY,QACrB,UAAON,EAASO,kBAAhB,aAAO,EAAqBC,YAAYR,IAG7BS,EAAgB,SAACC,GAC5B,IAAKA,EAAOC,SAAU,MAAO,CAACD,EAAO3B,KAErC,IAAMY,EAAgB,GAChBiB,EAAS,SAATA,EAAUC,GAAe,uBAEVA,GAFU,IAE7B,2BAAwB,KAAbC,EAAa,QAClBA,EAAKH,UAAUC,EAAOE,EAAKH,UAC/BhB,EAAKD,KAAKoB,EAAK/B,MAJY,gCAQ/B,OADA6B,EAAOF,EAAOC,UACPhB,I,mEC7FM,cACboB,QADa,WAEXC,KAAKC,qBAEPC,UAJa,WAKXF,KAAKG,MAAMC,MAAMC,IAAIC,oBAAoB,UAAWN,KAAKO,0BAE3DC,QAAS,CAEPC,UAFO,SAEGC,EAAKhB,EAAQiB,EAAMC,GAC3B,GAA6B,MAAzBA,EAAMC,OAAOC,QAAjB,CACA,IAAMC,EAAWL,EAAIhB,EAAOsB,UAAUC,MAAQP,EAAIhB,EAAOsB,UACzDzC,kBAAKwC,KAGPd,kBARO,WASLD,KAAKG,MAAMC,OAASJ,KAAKG,MAAMC,MAAMC,IAAIa,iBAAiB,WAAYlB,KAAKO,0BAE7EA,wBAXO,SAWiBY,GACtB,IAAIC,EAA4B,IAAtBD,EAAEN,OAAOQ,SAAiBF,EAAEN,OAAOtB,WAAa4B,EAAEN,OAE5D,GADoB,SAAhBO,EAAIN,UAAoBM,EAAMA,EAAI7B,YAClC6B,EAAI7B,WAAW+B,UAAUC,SAAS,WAAY,CAChD,IAAMR,EAAWK,EAAII,YACrBjD,kBAAKwC","file":"js/chunk-e795d930.83e5f7df.js","sourcesContent":["import { Obj, Column, Columns } from './type';\n\nconst _toString = Object.prototype.toString;\nexport const toRawType = (value:any) => _toString.call(value).slice(8, -1);\n\n// 根据类型设置默认值\nexport const getInitValue = (value:any) => {\n  const type = toRawType(value);\n  switch (type) {\n    case 'Array':\n      return [];\n    case 'Object':\n      return {};\n    case 'Date':\n      return new Date();\n    case 'Number':\n      return 0;\n    case 'Null':\n    case 'Undefined':\n    case 'Function':\n      return value;\n    default:\n      return '';\n  }\n};\n\nexport const getInitObj = (originObj:Obj = {}, preValueObj:Obj = {}) => {\n  const obj:Obj = {};\n  // eslint-disable-next-line no-restricted-syntax\n  for (const [key, value] of Object.entries(originObj)) {\n    // eslint-disable-next-line no-prototype-builtins\n    obj[key] = preValueObj.hasOwnProperty(key) ? preValueObj[key] : getInitValue(value);\n  }\n  return obj;\n};\n\n/**\n * @des: 深复制(es6，不添加原型版本)，需考虑循环引用对象的兼容处理:https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Errors/Cyclic_object_value\n * @param {Any} data 需要复制的数据\n * @param {Array} cache 保存已经遍历过的对象，是为了处理循环引用对象\n * @return {Any} 复制后的数据\n */\nexport const deepCopy = (obj:any, cache:{original:Obj, copy:Obj}[] = []) => {\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n  const hit = cache.filter(c => c.original === obj)[0];\n  if (hit) {\n    return hit.copy;\n  }\n  const copy:Obj = Array.isArray(obj) ? [] : {};\n  cache.push({\n    original: obj,\n    copy,\n  });\n  Object.keys(obj).forEach(key => {\n    copy[key] = deepCopy(obj[key], cache);\n  });\n  return copy;\n};\n\n/**\n * @description:\n * @param {Number | String} num\n * @return\n */\nexport const getPx = (num:number|string) => (toRawType(num) === 'Number' ? `${num}px` : num);\n\n/**\n * @description: 复制内容到剪贴版\n * @param {String} val 需要复制的内容\n * @return:\n */\nexport const copy = (val:string) => {\n  // 使用textarea才可以换行\n  const textarea = document.createElement('textarea');\n  textarea.value = val;\n  document.body.appendChild(textarea);\n  textarea.select();\n  document.execCommand('Copy');\n  return textarea.parentNode?.removeChild(textarea);\n};\n\nexport const getColumnKeys = (column:Column) => {\n  if (!column.children) return [column.key];\n\n  const keys:string[] = [];\n  const helper = (arr:Columns) => {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const item of arr) {\n      if (item.children) helper(item.children);\n      keys.push(item.key);\n    }\n  };\n  helper(column.children);\n  return keys;\n};\n","import { copy } from '../utils';\n\nexport default {\n  mounted() {\n    this.headerFooterClick();\n  },\n  desdroyed() {\n    this.$refs.table.$el.removeEventListener('dbclick', this.handleHeaderFooterClick);\n  },\n  methods: {\n    // 监听单元格数据\n    cellClick(row, column, cell, event) {\n      if (event.target.tagName === 'I') return; // 如果点击图标则不复制\n      const cellText = row[column.property].name || row[column.property];\n      copy(cellText);\n    },\n    // 监听汇总数据\n    headerFooterClick() {\n      this.$refs.table && this.$refs.table.$el.addEventListener('dblclick', this.handleHeaderFooterClick);\n    },\n    handleHeaderFooterClick(e) {\n      let dom = e.target.nodeType === 3 ? e.target.parentNode : e.target;\n      if (dom.tagName === 'SPAN') dom = dom.parentNode;\n      if (dom.parentNode.classList.contains('is-leaf')) {\n        const cellText = dom.textContent;\n        copy(cellText);\n      }\n    },\n  },\n};\n"],"sourceRoot":""}